{"version":3,"sources":["services/fetcher.ts","services/api.ts","components/main/Modals/DeleteCommentModal.tsx","components/main/Modals/DeletePostModal.tsx","hooks/useDidMount.tsx","hooks/useFileHandler.tsx","hooks/useModal.tsx","components/main/Modals/EditPostModal.tsx","components/main/Modals/PostLikesModal.tsx","components/main/Comments/CommentInput.tsx","components/main/Comments/CommentItem.tsx","components/main/Comments/CommentList.tsx","components/main/Comments/index.tsx","components/main/BookmarkButton/index.tsx","helpers/utils.tsx","components/main/Chats/ChatBox.tsx","components/main/Chats/MinimizedChats.tsx","components/main/Chats/Chats.tsx","components/main/FollowButton/index.tsx","components/main/LikeButton/index.tsx","components/main/Messages/MessagesList.tsx","components/main/Messages/index.tsx","components/main/Modals/ComposeMessageModal.tsx","components/main/Modals/CreatePostModal.tsx","helpers/cropImage.tsx","components/main/Modals/CropProfileModal.tsx","components/main/Modals/ImageLightbox.tsx","components/main/Modals/LogoutModal.tsx","components/main/Modals/PostModals.tsx","components/main/Notification/NotificationList.tsx","components/main/Notification/index.tsx","components/main/PostItem/index.tsx","components/main/SuggestedPeople/index.tsx","constants/routes.ts","reportWebVitals.ts","index.tsx","socket/socket.ts","redux/action/helperActions.ts","redux/action/feedActions.ts","redux/action/authActions.ts","types/types.ts","redux/action/chatActions.ts","redux/action/modalActions.ts","redux/action/errorActions.ts","images/logo-cg.svg","redux/action/profileActions.ts","components/hoc/withAuth.tsx","components/shared/Avatar.tsx","hooks/useDocumentTitle.tsx","components/main/UserCard/index.tsx","components/hoc/withTheme.tsx","constants/actionType.ts","components/hoc/index.ts","components/shared/Badge.tsx","components/shared/Boundary.tsx","components/shared/ImageGrid.tsx","components/shared/NavBar.tsx","components/shared/Preloader.tsx","components/shared/SearchInput.tsx","components/shared/SocialLogin.tsx","components/shared/ThemeToggler.tsx","components/shared/Loader.tsx","components/shared/Loaders.tsx","components/main/Options/CommentOptions.tsx","components/main/Options/PostOptions.tsx","images/avatar_placeholder.png","pages/chat/index.tsx","pages/error/PageNotFound.tsx","pages/home/SideMenu.tsx","pages/home/index.tsx","images/friends_meal.jpg","images/logo-white.svg","pages/login/index.tsx","pages/post/index.tsx","pages/profile/Header/CoverPhotoOverlay.tsx","pages/profile/Header/Tabs.tsx","pages/profile/Header/index.tsx","pages/profile/Tabs/Bio.tsx","images/thumbnail.jpg","pages/profile/Tabs/Bookmarks.tsx","pages/profile/Tabs/EditInfo.tsx","pages/profile/Tabs/Followers.tsx","pages/profile/Tabs/Following.tsx","pages/profile/Tabs/Info.tsx","pages/profile/Tabs/Posts.tsx","pages/profile/index.tsx","pages/redirects/SocialAuthFailed.tsx","images/friends_meal_2.webp","pages/register/index.tsx","pages/search/Posts.tsx","pages/search/Users.tsx","pages/search/index.tsx","pages/suggested_people/index.tsx","routers/ProtectedRoute.tsx","routers/PublicRoute.tsx","App.tsx","redux/reducer/authReducer.ts","redux/reducer/chatReducer.ts","redux/reducer/errorReducer.ts","redux/reducer/helperReducer.ts","redux/reducer/loadingReducer.ts","redux/reducer/modalReducer.ts","redux/reducer/newsFeedReducer.ts","redux/reducer/profileReducer.ts","redux/reducer/settingsReducer.ts","redux/reducer/rootReducer.ts","redux/action/loadingActions.ts","redux/sagas/authSaga.ts","redux/sagas/newsFeedSaga.ts","redux/sagas/profileSaga.ts","redux/sagas/index.ts","redux/store/store.ts","components/shared/NavBarMobile.tsx"],"names":["cinemagramUrl","process","REACT_APP_CINEMAGRAM_URL","cinemagramApiVersion","REACT_APP_CINEMAGRAM_API_VERSION","axios","defaults","baseURL","withCredentials","isLogoutTriggered","resetIsLogoutTriggered","interceptors","response","use","error","data","status","type","config","__isRetryRequest","store","dispatch","logoutStart","Promise","reject","httpRequest","req","resolve","a","request","login","username","password","method","url","checkAuthSession","register","email","logout","getNewsFeed","params","getSinglePost","postID","createPost","post","getPosts","deletePost","updatePost","updates","likePost","id","getPostLikes","getUser","updateUser","getComments","offset","limit","skip","sort","deleteComment","commentID","commentOnPost","body","updateComment","likeComment","replyOnComment","comment_id","post_id","getCommentReplies","getNotifications","followUser","unfollowUser","getFollowers","getFollowing","getSuggestedPeople","readNotification","getUnreadNotifications","markAllAsUnreadNotifications","getBookmarks","bookmarkPost","uploadPhoto","field","search","getMessages","readMessage","senderID","getUnreadMessages","sendMessage","text","to","getUserMessages","targetID","Modal","setAppElement","DeleteCommentModal","props","useState","isDeleting","setIsDeleting","setError","useDispatch","targetComment","useSelector","state","helper","handleDeleteComment","closeModal","deleteSuccessCallback","toast","dark","progressStyle","backgroundColor","autoClose","isOpen","setTargetComment","onAfterOpen","onRequestClose","contentLabel","className","shouldCloseOnOverlayClick","overlayClassName","onClick","message","disabled","DeletePostModal","didMount","useDidMount","targetPost","modal","isOpenDeletePost","handleDeletePost","setTargetPost","hideModal","EModalType","DELETE_POST","initState","setDidMount","useEffect","useFileHandler","imageFile","setImageFile","isFileLoading","setFileLoading","removeImage","Array","isArray","items","filter","item","clearFiles","onFileChange","event","callback","target","files","length","hideProgressBar","val","value","img","size","exec","file","URL","createObjectURL","name","from","forEach","oldFiles","useModal","setOpen","openModal","EditPostModal","isOpenEditPost","description","setDescription","privacy","setPrivacy","isUpdating","setIsUpdating","handleUpdatePost","trim","updatedPost","updateSuccessCallback","EDIT_POST","onChange","e","htmlFor","cols","rows","readOnly","PostLikesModal","likes","setLikes","isLoading","setIsLoading","setOffset","isOpenPostLikes","fetchLikes","initOffset","result","POST_LIKES","map","user","profile","CommentInput","forwardRef","ref","isUpdateMode","isSubmitting","rest","userPicture","auth","profilePicture","current","focus","dayjs","extend","relativeTime","CommentItem","comment","setComment","replies","setReplies","isOpenInput","setOpenInput","isVisibleReplies","setVisibleReplies","editCommentBody","setEditCommentBody","newCommentBody","setNewCommentBody","isGettingReplies","setGettingReplies","setSubmitting","isLiking","setIsLiking","setUpdateMode","replyInputRef","useRef","editCommentInputRef","getReplies","console","log","handleSubmitReply","key","blur","onClickLike","likesCount","isLiked","author","placeholder","onKeyDown","isOwnComment","isPostOwner","onClickEdit","openDeleteModal","depth","createdAt","fromNow","isEdited","replyCount","LoadingOutlined","UpOutlined","DownOutlined","status_code","comments","updateCommentCallback","oldComments","cmt","lazy","CommentList","TransitionGroup","component","CSSTransition","timeout","classNames","fallback","Comments","isCommentVisible","commentInputRef","setComments","commentBody","setCommentBody","fetchComment","reverse","handleSubmitComment","handleCancelUpdate","undefined","BookmarkButton","initBookmarkState","isBookmarked","setIsBookmarked","setLoading","dispatchBookmark","info","children","displayTime","showTime","now","created","oneDay","twelveHours","timeDisplay","format","diff","ChatBox","setText","isSending","setSending","isTyping","setIsTyping","timeoutRef","dummyEl","chats","fetchMessages","socket","on","newMessageArrived","scrollIntoView","messages","getMessagesSuccess","dispatchSendMessage","title","minimizeChat","LineOutlined","closeChat","CloseOutlined","CommentOutlined","msg","i","isOwnMessage","seen","emit","clearTimeout","setTimeout","SendOutlined","MinimizedChats","users","chat","minimized","initiateChat","Avatar","Chats","active","FollowButton","isFollowing","setIsFollowing","dispatchFollow","userID","CheckOutlined","UserAddOutlined","LikeButton","setIsLiked","dispatchLike","likeCallback","LikeOutlined","MessagesList","handleReadMessage","infiniteScrollRef","Messages","isAuth","isMessagesOpen","setMessagesOpen","setMessages","count","setCount","composeModal","history","useHistory","isMessagesOpenRef","newMessage","prevMessages","updateNewMessages","prevCount","document","addEventListener","handleClickOutside","then","messageOnList","sorted","arr","includes","b","Date","toggle","closest","wrapper","seeMoreButton","sender","updated","window","screen","width","push","infiniteRef","useInfiniteScroll","loading","hasNextPage","onLoadMore","scrollContainer","MessageOutlined","FormOutlined","ComposeMessageModal","floatingResult","clickItemCallback","showNoResultMessage","preventDefault","CreatePostModal","isLoadingCreatePost","multiple","hidden","accept","FileImageOutlined","formData","FormData","set","image","append","dispatchCreatePost","style","background","CloseCircleOutlined","createImage","Image","setAttribute","src","getRadianAngle","degreeValue","Math","PI","getCroppedImg","imageSrc","pixelCrop","rotation","canvas","createElement","ctx","getContext","maxSize","max","height","safeArea","sqrt","translate","rotate","drawImage","getImageData","putImageData","round","x","y","toBlob","blob","CropProfileModal","crop","setCrop","zoom","setZoom","aspect","setAspect","croppedAreaPixels","setCroppedAreaPixels","isCropping","setIsCropping","getCroppedImage","useCallback","File","onCropSuccessCallback","clearState","revokeObjectURL","onZoomChange","mode","cropShape","showGrid","onCropChange","onCropComplete","croppedArea","min","step","Number","ImageLightbox","images","closeLightbox","activeIndex","imgIndex","setImgIndex","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","enableZoom","wrapperClassName","reactModalStyle","content","zIndex","top","LogoutModal","isLoggingOut","dispatchLogout","PostModals","NotificationList","toggleNotification","notifications","notif","initiator","unread","link","Notification","isNotificationOpen","setNotificationOpen","hasReadAll","setHasReadAll","unreadCount","setUnreadCount","setNotifications","isNotificationOpenRef","notification","prev","fetchNotifications","notifs","handleReadNotification","updatedNotifs","handleMarkAllUnread","BellOutlined","withAuth","setCommentVisible","deleteModal","updateModal","handleToggleComment","isOwnPost","showModal","LockOutlined","UserOutlined","GlobalOutlined","openUpdateModal","photos","like","likeMinusSelf","people","peopleMinusSelf","displayLikeMetric","commentsCount","LOGIN","authorID","setInputCommentVisible","SuggestedPeople","setPeople","SUGGESTED_PEOPLE","_id","REGISTER","HOME","POST","PROFILE","PROFILE_INFO","PROFILE_EDIT_INFO","PROFILE_FOLLOWERS","PROFILE_FOLLOWING","PROFILE_BOOKMARKS","SEARCH","CHAT","SOCIAL_AUTH_FAILED","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","getElementById","io","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","SET_TARGET_COMMENT","payload","SET_TARGET_POST","getNewsFeedStart","options","GET_FEED_START","getNewsFeedSuccess","posts","GET_FEED_SUCCESS","createPostStart","CREATE_POST_START","createPostSuccess","CREATE_POST_SUCCESS","updateFeedPost","UPDATE_FEED_POST","updatePostLikes","UPDATE_POST_LIKES","deleteFeedPost","DELETE_FEED_POST","clearNewsFeed","CLEAR_FEED","hasNewFeed","bool","HAS_NEW_FEED","loginStart","LOGIN_START","loginSuccess","LOGIN_SUCCESS","LOGOUT_START","logoutSuccess","LOGOUT_SUCCESS","registerStart","REGISTER_START","registerSuccess","userAuth","REGISTER_SUCCESS","updateAuthPicture","UPDATE_AUTH_PICTURE","INITIATE_CHAT","MINIMIZE_CHAT","CLOSE_CHAT","GET_MESSAGES_SUCCESS","NEW_MESSAGE_ARRIVED","clearChat","CLEAR_CHAT","modalType","SHOW_MODAL","HIDE_MODAL","setAuthErrorMessage","SET_AUTH_ERR_MSG","setProfileErrorMessage","SET_PROFILE_ERR_MSG","setNewsFeedErrorMessage","SET_NEWSFEED_ERR_MSG","getUserStart","GET_USER_START","getUserSuccess","GET_USER_SUCCESS","updateProfileInfo","UPDATE_PROFILE_INFO","updateProfilePicture","UPDATE_PROFILE_PICTURE","updateCoverPhoto","UPDATE_COVER_PHOTO","Component","defaultProps","useDocumentTitle","useLayoutEffect","UserCard","myUsername","withTheme","theme","settings","CHECK_SESSION","CLEAR_AUTH_ERR_MSG","SET_AUTH_LOADING","SET_CREATE_POST_LOADING","SET_GET_USER_LOADING","SET_GET_FEED_LOADING","SET_THEME","Badge","Boundary","hasError","errorInfo","this","ImageGrid","setActiveIndex","dangerouslySetInnerHTML","__html","renderGrid","dataset","idx","index","NavBarMobile","isLoadingAuth","authError","logoutModal","pathname","useLocation","isLaptop","logo","alt","activeClassName","Preloader","SearchInput","searchInput","setSearchInput","isSuggesting","setSuggesting","suggestions","setSuggestions","isVisibleSuggestion","setVisibleSuggestion","isVisibleSuggestionRef","removeEventListener","inputClassName","SearchOutlined","onFocus","select","debounce","persist","q","Loader","onClickItem","SocialLogin","onClickSocialLogin","href","FacebookFilled","GoogleOutlined","GithubFilled","ThemeToggler","documentElement","classList","add","loaderBgLight","loaderFgLight","loaderBgDark","loaderFgDark","PostLoader","speed","viewBox","foregroundColor","cx","cy","r","rx","ry","UserLoader","includeButton","ProfileLoader","bg","fg","CommentOptions","setIsOpen","isOpenRef","EllipsisOutlined","fontSize","EditOutlined","DeleteOutlined","PostOptions","isOpenOption","setIsOpenOption","isOpenOptionRef","StarFilled","StarOutlined","Chat","match","find","PageNotFound","SideMenu","TeamOutlined","marginRight","newsFeed","newsFeedError","isLoadingFeed","shallowEqual","location","newLikeCount","UndoOutlined","form","CoffeeOutlined","Login","setUsername","setPassword","isPasswordVisible","setPasswordVisible","onSubmit","rel","logo_dark","autoComplete","required","maxLength","minLength","EyeInvisibleOutlined","EyeOutlined","LockFilled","getFullYear","Post","setPost","fetchPost","fetchedPost","newLikesCount","CoverPhotoOverlay","coverPhoto","coverPhotoOverlayRef","isUploadingCoverPhoto","isOwnProfile","handleSaveCoverPhoto","CameraOutlined","linkStyleName","Tabs","followersCount","followingCount","activeNav","setActiveNav","splitPath","split","currentNav","InfoCircleOutlined","initImageState","Header","isUploadingProfileImage","setIsUploadingProfileImage","setIsUploadingCoverPhoto","coverPhotoRef","cp","cpo","overlayOnMouseOver","overlayOnMouseOut","visibility","bodyStyle","color","dismiss","avatar_placeholder","fullname","Bio","bio","dateJoined","Bookmarks","bookmarks","setBookmarks","fetchBookmarks","threshold","thumbnail","EditInfo","firstname","lastname","gender","birthday","setField","bioLength","setBioLength","handleUpdateUser","handleTextOnlyInput","nativeEvent","test","toISOString","ArrowLeftOutlined","SaveOutlined","Followers","followers","setFollowers","fetchFollowers","fetchedFollowers","Following","followings","setFollowing","fetchFollowing","fetchedFollowing","Info","Posts","setPosts","isCreatingPost","setIsCreatingPost","fetchPosts","updatedPosts","fetchedPosts","filteredPosts","Profile","profileError","isLoadingGetUser","exact","path","ROUTE","SocialAuthFailed","Register","setEmail","toLowerCase","boldString","str","substr","origStr","toUpperCase","sub","indexOf","len","searchQuery","stopPropagation","onClickAuthor","Users","Search","setUsers","userOffset","setUserOffset","postOffset","setPostOffset","isLoadingUser","setIsLoadingUser","isLoadingPost","setIsLoadingPost","query","URLSearchParams","get","searchType","dispatchSearchPosts","dispatchSearchUsers","fetchedUsers","infiniteUserRef","infinitePostRef","fetchSuggested","createBrowserHistory","isCheckingSession","setCheckingSession","isNotMobile","position","transition","Slide","draggable","paddingLeft","pages","authReducer","action","chatReducer","exists","some","initChat","maxItems","hasReachedLimit","mapped","deletedFirstItem","splice","errorReducer","helperReducer","isLoadingProfile","loadingReducer","isOpenDeleteComment","modalMapType","DELETE_COMMENT","modalReducer","newsFeedReducer","isEmailValidated","profileReducer","settingsReducer","rootReducer","combineReducers","isAuthenticating","isGettingUser","isGettingFeed","handleError","authSaga","put","call","newsFeedSaga","Error","profileSaga","rootSaga","takeLatest","sagaMiddleware","createSagaMiddleware","middlewares","next","getState","localStorage","setItem","JSON","stringify","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","storage","getItem","parse","reHydrateStore","applyMiddleware","run","configureStore","isOpenSearch","setOpenSearch","isOpenMenu","setOpenMenu","onClickMenuItem"],"mappings":"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","file":"static/js/main.181f1231.chunk.js","sourcesContent":["import axios, { AxiosRequestConfig } from \"axios\";\r\nimport { logoutStart } from \"~/redux/action/authActions\";\r\nimport store from \"~/redux/store/store\";\r\n\r\nconst cinemagramUrl =\r\n  process.env.REACT_APP_CINEMAGRAM_URL || \"http://localhost:9000\";\r\nconst cinemagramApiVersion =\r\n  process.env.REACT_APP_CINEMAGRAM_API_VERSION || \"v1\";\r\naxios.defaults.baseURL = `${cinemagramUrl}/api/${cinemagramApiVersion}`;\r\naxios.defaults.withCredentials = true;\r\n\r\nlet isLogoutTriggered = false;\r\n\r\nfunction resetIsLogoutTriggered() {\r\n  isLogoutTriggered = false;\r\n}\r\n\r\naxios.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    const { data, status } = error.response;\r\n    if (\r\n      status === 401 &&\r\n      (data?.error?.type || \"\") !== \"INCORRECT_CREDENTIALS\" &&\r\n      error.config &&\r\n      !error.config.__isRetryRequest\r\n    ) {\r\n      if (!isLogoutTriggered) {\r\n        isLogoutTriggered = true;\r\n        store.dispatch(logoutStart(resetIsLogoutTriggered));\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nconst httpRequest = <T>(req: AxiosRequestConfig): Promise<T> => {\r\n  return new Promise(async (resolve, reject) => {\r\n    try {\r\n      const request = await axios(req);\r\n\r\n      resolve(request.data.data);\r\n    } catch (e) {\r\n      reject(e?.response?.data || {});\r\n    }\r\n  });\r\n};\r\n\r\nexport default httpRequest;\r\n\r\n","import { IBookmark, IComment, IFetchParams, IMessage, INotification, IPost, IProfile, IRegister, IUser } from '~/types/types';\nimport httpRequest from './fetcher';\n\nexport const login = (username: string, password: string) => httpRequest<IUser>({\n    method: 'POST',\n    url: '/authenticate',\n    data: { username, password }\n})\n\nexport const checkAuthSession = () => httpRequest<{ auth: IUser }>({ method: 'GET', url: '/check-session' });\n\nexport const register = ({ email, password, username }: IRegister) => httpRequest<IUser>({\n    method: 'POST',\n    url: '/register',\n    data: { username, password, email }\n})\n\nexport const logout = () => httpRequest<any>({ method: 'DELETE', url: '/logout' });\n\nexport const getNewsFeed = (params: IFetchParams) => httpRequest<IPost[]>({\n    method: 'GET',\n    url: '/feed',\n    params\n})\n\n//  ------------------- POST METHODS ------------------\n\nexport const getSinglePost = (postID: string) => httpRequest<IPost>({ method: 'GET', url: `/post/${postID}` });\n\nexport const createPost = (post: FormData) => httpRequest<IPost>({\n    method: 'POST',\n    url: '/post',\n    data: post\n})\n\nexport const getPosts = (username: string, params: IFetchParams) => {\n    return httpRequest<IPost[]>({\n        method: 'GET',\n        url: `/${username}/posts`,\n        params\n    })\n}\n\nexport const deletePost = (postID: string) => httpRequest<IPost>({ method: 'DELETE', url: `/post/${postID}` })\n\nexport const updatePost = (postID: string, updates: Partial<IPost>) => {\n    return httpRequest<IPost>({\n        method: 'PATCH',\n        url: `/post/${postID}`,\n        data: updates\n    })\n}\n\nexport const likePost = (id: string) => {\n    return httpRequest<{ state: boolean; likesCount: number }>({\n        method: 'POST',\n        url: `/like/post/${id}`\n    })\n}\n\nexport const getPostLikes = (postID: string, params: IFetchParams) => {\n    return httpRequest<IProfile[]>({\n        method: 'GET',\n        url: `/post/likes/${postID}`,\n        params\n    })\n}\n\n//  ------------------ USER METHODS ---------------------\n\nexport const getUser = (username: string) => httpRequest<IUser>({ method: 'GET', url: `/${username}` })\n\nexport const updateUser = (username: string, updates: Partial<IProfile>) => {\n    return httpRequest<IProfile>({\n        method: 'PATCH',\n        url: `/${username}/edit`,\n        data: updates\n    })\n}\n\n// --------------- COMMENT METHODS ------------------------\n\nexport const getComments = (postID: string, { offset = 0, limit, skip, sort = 'desc' }: IFetchParams) => {\n    return httpRequest<IComment[]>({\n        method: 'GET',\n        url: `/comment/${postID}`,\n        params: { offset, limit, skip, sort }\n    })\n}\n\nexport const deleteComment = (commentID: string) => {\n    return httpRequest<IComment>({ method: 'DELETE', url: `/comment/${commentID}` });\n}\n\nexport const commentOnPost = (postID: string, body: string) => httpRequest<IComment>({\n    method: 'POST',\n    url: `/comment/${postID}`,\n    data: { body }\n})\n\nexport const updateComment = (commentID: string, body: string) => {\n    return httpRequest<IComment>({\n        method: 'PATCH',\n        url: `/comment/${commentID}`,\n        data: { body }\n    })\n}\n\nexport const likeComment = (commentID: string) => {\n    return httpRequest<{ state: boolean; likesCount: number }>({\n        method: 'POST',\n        url: `/like/comment/${commentID}`\n    });\n}\n\nexport const replyOnComment = (body: string, comment_id: string, post_id: string) => {\n    return httpRequest<IComment>({\n        method: 'POST',\n        url: `/reply`,\n        data: {\n            body,\n            comment_id,\n            post_id\n        }\n    })\n}\n\nexport const getCommentReplies = (params: IFetchParams & { comment_id: string; post_id: string }) => {\n    return httpRequest<IComment[]>({\n        method: 'GET',\n        url: `/reply`,\n        params: {\n            offset: params.offset,\n            comment_id: params.comment_id,\n            post_id: params.post_id\n        }\n    })\n}\n\n// ------------------ NOTIFICATION METHOD ----------------\n\nexport const getNotifications = (params: IFetchParams) => {\n    return httpRequest<{ notifications: INotification[]; unreadCount: number; count: number; }>({\n        method: 'GET',\n        url: `/notifications`,\n        params: { offset: params.offset }\n    })\n}\n\n// ---------------- FOLLOW METHODS -----------------------------\n\nexport const followUser = (id: string) => httpRequest<{ state: boolean }>({ method: 'POST', url: `/follow/${id}` });\n\nexport const unfollowUser = (id: string) => httpRequest<{ state: boolean }>({\n    method: 'POST',\n    url: `/unfollow/${id}`\n})\n\nexport const getFollowers = (username: string, { offset = 0 }: IFetchParams) => {\n    return httpRequest<IProfile[]>({\n        method: 'GET',\n        url: `/${username}/followers`,\n        params: { offset }\n    })\n}\n\nexport const getFollowing = (username: string, params: IFetchParams) => {\n    return httpRequest<IProfile[]>({\n        method: 'GET',\n        url: `/${username}/following`,\n        params\n    })\n}\n\nexport const getSuggestedPeople = async (params: IFetchParams) => {\n    return httpRequest<IProfile[]>({\n        method: 'GET',\n        url: `/people/suggested`,\n        params\n    })\n}\n\n//  ---------- NOTIFICATION METHODS ---------------\nexport const readNotification = (id: string) => {\n    return httpRequest<{ state: boolean; }>({\n        method: 'PATCH',\n        url: `/read/notification/${id}`\n    })\n}\n\nexport const getUnreadNotifications = () => httpRequest<{ count: number; }>({ method: 'GET', url: `/notifications/unread` })\n\nexport const markAllAsUnreadNotifications = () => {\n    return httpRequest<{ state: boolean; }>({ method: 'PATCH', url: `/notifications/mark` })\n}\n\n//  ---------- BOOKMARK METHODS ----------------\n\nexport const getBookmarks = (params: IFetchParams) => httpRequest<IBookmark[]>({\n    method: 'GET',\n    url: `/bookmarks`,\n    params\n})\n\nexport const bookmarkPost = (postID: string) => httpRequest<{ state: boolean }>({\n    method: 'POST',\n    url: `/bookmark/post/${postID}`\n})\n\n//  ----------------- UPLOAD METHODS --------------\n\nexport const uploadPhoto = async (data: FormData, field: string) => {\n    return httpRequest<{ image: Object }>({\n        method: 'POST',\n        url: `/upload/${field}`,\n        data\n    })\n}\n\n//  ---------------- SEARCH METHOD --------------\nexport const search = async (params: IFetchParams) => {\n    return httpRequest<IPost[] | IProfile[]>({\n        method: 'GET',\n        url: `/search`,\n        params\n    })\n}\n\n//  ---------------- MESSAGE METHODS -------------\n\nexport const getMessages = (params?: IFetchParams) => {\n    return httpRequest<IMessage[]>({\n        method: 'GET',\n        url: `/messages`,\n        params\n    })\n}\n\nexport const readMessage = (senderID: string) => {\n    return httpRequest<{ state: boolean }>({\n        method: 'PATCH',\n        url: `/message/read/${senderID}`\n    })\n}\n\nexport const getUnreadMessages = () => httpRequest<{ count: number }>({ method: 'GET', url: `/messages/unread` })\n\nexport const sendMessage = (text: string, to: string) => {\n    return httpRequest<IMessage>({\n        method: 'POST',\n        url: `/message/${to}`,\n        data: { text }\n    })\n}\n\nexport const getUserMessages = (targetID: string, params: IFetchParams) => {\n    return httpRequest<IMessage[]>({\n        method: 'GET',\n        url: `/messages/${targetID}`,\n        params\n    })\n}\n","import { CloseOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport { useState } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { setTargetComment } from '~/redux/action/helperActions';\r\nimport { deleteComment } from '~/services/api';\r\nimport { IComment, IError, IRootReducer } from '~/types/types';\r\n\r\ninterface IProps {\r\n    onAfterOpen?: () => void;\r\n    isOpen: boolean;\r\n    closeModal: () => void;\r\n    deleteSuccessCallback: (comment: IComment) => void;\r\n}\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst DeleteCommentModal: React.FC<IProps> = (props) => {\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const dispatch = useDispatch();\r\n    const targetComment = useSelector((state: IRootReducer) => state.helper.targetComment);\r\n\r\n    const handleDeleteComment = async () => {\r\n        try {\r\n            setIsDeleting(true);\r\n            targetComment && await deleteComment(targetComment.id);\r\n\r\n            closeModal();\r\n            targetComment && props.deleteSuccessCallback(targetComment);\r\n            toast.dark('Comment successfully deleted.', {\r\n                progressStyle: { backgroundColor: '#4caf50' },\r\n                autoClose: 2000\r\n            });\r\n        } catch (e) {\r\n            setIsDeleting(false);\r\n            setError(e);\r\n        }\r\n    };\r\n\r\n    const closeModal = () => {\r\n        if (props.isOpen) {\r\n            props.closeModal();\r\n            dispatch(setTargetComment(null));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={props.isOpen}\r\n            onAfterOpen={props.onAfterOpen}\r\n            onRequestClose={closeModal}\r\n            contentLabel=\"Delete Comment\"\r\n            className=\"modal\"\r\n            shouldCloseOnOverlayClick={!isDeleting}\r\n            overlayClassName=\"modal-overlay\"\r\n        >\r\n            <div className=\"relative\">\r\n                <div\r\n                    className=\"absolute right-2 top-2 p-1 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:hover:bg-indigo-1100\"\r\n                    onClick={closeModal}\r\n                >\r\n                    <CloseOutlined className=\"p-2  outline-none text-gray-500 dark:text-white\" />\r\n                </div>\r\n                {error && (\r\n                    <span className=\"block p-4 bg-red-100 text-red-500 w-full\">\r\n                        {error?.error?.message || 'Unable process request. Please try again.'}\r\n                    </span>\r\n                )}\r\n                <div className=\"p-4 laptop:px-8\">\r\n                    <h2 className=\"dark:text-white\">\r\n                        <ExclamationCircleOutlined className=\"text-red-500 mr-2 pt-2\" />\r\n                        Delete Comment\r\n                    </h2>\r\n                    <p className=\"text-gray-600 my-4 dark:text-white\">Are you sure you want to delete this comment?</p>\r\n                    <div className=\"flex justify-between\">\r\n                        <button\r\n                            className=\"button--muted !rounded-full dark:bg-indigo-1100 dark:text-white dark:hover:bg-indigo-1100\"\r\n                            onClick={closeModal}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            className=\"button--danger\"\r\n                            disabled={isDeleting}\r\n                            onClick={handleDeleteComment}\r\n                        >\r\n                            Delete\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default DeleteCommentModal;\r\n","import { CloseOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport { useState } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { useDidMount } from '~/hooks';\r\nimport { setTargetPost } from '~/redux/action/helperActions';\r\nimport { hideModal } from '~/redux/action/modalActions';\r\nimport { deletePost } from '~/services/api';\r\nimport { EModalType, IError, IRootReducer } from '~/types/types';\r\n\r\ninterface IProps {\r\n    onAfterOpen?: () => void;\r\n    deleteSuccessCallback: (postID: string) => void;\r\n}\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst DeletePostModal: React.FC<IProps> = (props) => {\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const didMount = useDidMount();\r\n    const dispatch = useDispatch();\r\n    const { targetPost, isOpen } = useSelector((state: IRootReducer) => ({\r\n        targetPost: state.helper.targetPost,\r\n        isOpen: state.modal.isOpenDeletePost\r\n    }))\r\n\r\n    const handleDeletePost = async () => {\r\n        try {\r\n            setIsDeleting(true);\r\n            await deletePost(targetPost?.id as string);\r\n\r\n            didMount && setIsDeleting(false);\r\n\r\n            closeModal();\r\n            props.deleteSuccessCallback(targetPost?.id as string);\r\n            toast.dark('Post successfully deleted.', {\r\n                progressStyle: { backgroundColor: '#4caf50' }\r\n            });\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsDeleting(false);\r\n                setError(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    const closeModal = () => {\r\n        if (isOpen && !isDeleting) {\r\n            dispatch(setTargetPost(null));\r\n            dispatch(hideModal(EModalType.DELETE_POST));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={isOpen}\r\n            onAfterOpen={props.onAfterOpen}\r\n            onRequestClose={closeModal}\r\n            contentLabel=\"Example Modal\"\r\n            className=\"modal\"\r\n            shouldCloseOnOverlayClick={!isDeleting}\r\n            overlayClassName=\"modal-overlay\"\r\n        >\r\n            <div className=\"relative\">\r\n                <div\r\n                    className=\"absolute right-2 top-2 p-1 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:hover:bg-indigo-1100\"\r\n                    onClick={closeModal}\r\n                >\r\n                    <CloseOutlined className=\"p-2  outline-none text-gray-500 dark:text-white\" />\r\n                </div>\r\n                {error && (\r\n                    <span className=\"p-4 bg-red-100 text-red-500 block\">\r\n                        {error?.error?.message || 'Unable to process your request.'}\r\n                    </span>\r\n                )}\r\n                <div className=\"p-4 laptop:px-8\">\r\n                    <h2 className=\"dark:text-white\">\r\n                        <ExclamationCircleOutlined className=\"text-red-500 mr-2 pt-2\" />\r\n                        Delete Post\r\n                    </h2>\r\n                    <p className=\"text-gray-600 my-4 dark:text-gray-400\">Are you sure you want to delete this post?</p>\r\n                    <div className=\"flex justify-between\">\r\n                        <button\r\n                            className=\"button--muted !rounded-full dark:bg-indigo-1100 dark:text-white dark:hover:bg-indigo-1100\"\r\n                            onClick={closeModal}\r\n                            disabled={isDeleting}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            className=\"button--danger\"\r\n                            disabled={isDeleting}\r\n                            onClick={handleDeletePost}\r\n                        >\r\n                            Delete\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default DeletePostModal;\r\n","import { useEffect, useState } from 'react';\n\nconst useDidMount = (initState = false) => {\n    const [didMount, setDidMount] = useState(initState);\n    useEffect(() => {\n        setDidMount(true);\n\n        return () => {\n            setDidMount(false);\n        }\n    }, []);\n\n    return didMount;\n};\n\nexport default useDidMount;","import { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { IFileHandler, IImage } from '~/types/types';\n\nconst useFileHandler = <T extends unknown>(type = \"multiple\", initState: T): IFileHandler<T> => {\n    const [imageFile, setImageFile] = useState<T>(initState);\n    const [isFileLoading, setFileLoading] = useState(false);\n\n    const removeImage = (id: string) => {\n        if (!Array.isArray(imageFile)) return;\n\n        const items = imageFile.filter(item => item.id !== id);\n\n        setImageFile(items as T);\n    };\n\n    const clearFiles = () => {\n        setImageFile(initState as T);\n    }\n\n    const onFileChange = (event: React.ChangeEvent<HTMLInputElement>, callback?: (file?: IImage) => void) => {\n        if (!event.target.files) return;\n        if ((event.target.files.length + (imageFile as IImage[]).length) > 5) {\n            return toast.error('Maximum of 5 photos per post allowed.', { hideProgressBar: true });\n        }\n\n        // TODO ===  FILTER OUT DUPLICATE IMAGES\n\n        const val = event.target.value;\n        const img = event.target.files[0] as File;\n\n        if (!img) return;\n\n        const size = img.size / 1024 / 1024;\n        const regex = /(\\.jpg|\\.jpeg|\\.png)$/i;\n\n        setFileLoading(true);\n        if (!regex.exec(val)) {\n            toast.error('File type must be JPEG or PNG', { hideProgressBar: true });\n            setFileLoading(false);\n        } else if (size > 2) {\n            toast.error('File size exceeded 2mb', { hideProgressBar: true });\n            setFileLoading(false);\n        } else if (type === 'single') {\n            const file = event.target.files[0] as File;\n            const url = URL.createObjectURL(file);\n            setImageFile({\n                file,\n                url,\n                id: file.name\n            } as T);\n            if (callback) callback(imageFile as IImage);\n        } else {\n            Array.from(event.target.files).forEach((file) => {\n                const url = URL.createObjectURL(file);\n                setImageFile((oldFiles) => ([...oldFiles as any, {\n                    file,\n                    url,\n                    id: file.name\n                }] as T));\n            });\n            if (callback) callback(imageFile as IImage);\n            setFileLoading(false);\n        }\n    };\n\n    return {\n        imageFile,\n        setImageFile,\n        isFileLoading,\n        onFileChange,\n        removeImage,\n        clearFiles\n    };\n};\n\nexport default useFileHandler;","import { useState } from \"react\";\n\nconst useModal = () => {\n    const [isOpen, setOpen] = useState(false);\n\n    const openModal = () => {\n        setOpen(true);\n    }\n\n    const closeModal = () => {\n        setOpen(false);\n    };\n\n    return { isOpen, openModal, closeModal };\n};\n\nexport default useModal;","import { CloseOutlined, EditOutlined } from '@ant-design/icons';\r\nimport { useEffect, useState } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { useDidMount } from '~/hooks';\r\nimport { setTargetPost } from '~/redux/action/helperActions';\r\nimport { hideModal } from '~/redux/action/modalActions';\r\nimport { updatePost } from '~/services/api';\r\nimport { EModalType, IError, IPost, IRootReducer } from '~/types/types';\r\n\r\ninterface IProps {\r\n    onAfterOpen?: () => void;\r\n    updateSuccessCallback: (post: IPost) => void;\r\n}\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst EditPostModal: React.FC<IProps> = (props) => {\r\n    const { isOpen, targetPost } = useSelector((state: IRootReducer) => ({\r\n        isOpen: state.modal.isOpenEditPost,\r\n        targetPost: state.helper.targetPost\r\n    }));\r\n    const [description, setDescription] = useState(targetPost?.description || '');\r\n    const [privacy, setPrivacy] = useState(targetPost?.privacy || 'public');\r\n    const [isUpdating, setIsUpdating] = useState(false);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const didMount = useDidMount();\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        setPrivacy(targetPost?.privacy as IPost['privacy']);\r\n        setDescription(targetPost?.description as string);\r\n    }, [targetPost]);\r\n\r\n    const handleDescriptionChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n        const val = e.target.value;\r\n        setDescription(val);\r\n    }\r\n\r\n    const handlePrivacyChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const val = e.target.value as IPost['privacy'];\r\n        setPrivacy(val);\r\n    }\r\n\r\n    const handleUpdatePost = async () => {\r\n        try {\r\n            setIsUpdating(true);\r\n            const updatedPost = await updatePost((targetPost?.id as string), { description: description.trim(), privacy });\r\n\r\n            if (didMount) {\r\n                setIsUpdating(false);\r\n            }\r\n\r\n            props.updateSuccessCallback(updatedPost);\r\n            closeModal();\r\n            toast.dark('Post updated successfully.', {\r\n                progressStyle: { backgroundColor: '#4caf50' }\r\n            });\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsUpdating(false);\r\n                setError(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    const closeModal = () => {\r\n        if (isOpen && !isUpdating) {\r\n            dispatch(setTargetPost(null));\r\n            dispatch(hideModal(EModalType.EDIT_POST));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={isOpen}\r\n            onAfterOpen={props.onAfterOpen}\r\n            onRequestClose={closeModal}\r\n            contentLabel=\"Example Modal\"\r\n            className=\"modal\"\r\n            shouldCloseOnOverlayClick={false}\r\n            overlayClassName=\"modal-overlay\"\r\n        >\r\n            <div className=\"relative\">\r\n                <div\r\n                    className=\"absolute right-2 top-2 p-1 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:hover:bg-indigo-1100\"\r\n                    onClick={closeModal}\r\n                >\r\n                    <CloseOutlined className=\"p-2  outline-none text-gray-500 dark:text-white\" />\r\n                </div>\r\n                {error && (\r\n                    <span className=\"p-4 bg-red-100 text-red-500 block\">\r\n                        {error?.error?.message || 'Unable process request. Please try again.'}\r\n                    </span>\r\n                )}\r\n                <div className=\"p-4 laptop:px-8 w-full laptop:w-40rem\">\r\n                    <h2 className=\"dark:text-white\">\r\n                        <EditOutlined className=\"mr-2 pt-2\" />\r\n                        Edit Post\r\n                    </h2>\r\n                    <select\r\n                        className=\"!py-1 !text-sm w-32 dark:bg-indigo-1100 dark:text-white dark:border-gray-800\"\r\n                        id=\"privacy\"\r\n                        name=\"privacy\"\r\n                        onChange={handlePrivacyChange}\r\n                        value={privacy}\r\n                    >\r\n                        <option value=\"public\">Public</option>\r\n                        <option value=\"follower\">Follower</option>\r\n                        <option value=\"private\">Only Me</option>\r\n                    </select>\r\n                    <br />\r\n                    <br />\r\n                    <label htmlFor=\"update-post\">Description</label>\r\n                    <textarea\r\n                        className=\"dark:bg-indigo-1100 dark:text-white dark:border-gray-800\"\r\n                        name=\"update-post\"\r\n                        id=\"update-post\"\r\n                        cols={30}\r\n                        rows={3}\r\n                        readOnly={isUpdating}\r\n                        onChange={handleDescriptionChange}\r\n                        value={description}\r\n                    />\r\n                    <div className=\"flex justify-between mt-4\">\r\n                        <button\r\n                            className=\"button--muted !rounded-full dark:bg-indigo-1100 dark:text-white dark:hover:bg-indigo-1100\"\r\n                            onClick={closeModal}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={handleUpdatePost}\r\n                            disabled={isUpdating}\r\n                        >\r\n                            Update\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default EditPostModal;\r\n","import { CloseOutlined } from '@ant-design/icons';\r\nimport { useEffect, useState } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Loader } from '~/components/shared';\r\nimport { useDidMount } from '~/hooks';\r\nimport { setTargetPost } from '~/redux/action/helperActions';\r\nimport { hideModal } from '~/redux/action/modalActions';\r\nimport { getPostLikes } from '~/services/api';\r\nimport { EModalType, IError, IProfile, IRootReducer } from '~/types/types';\r\nimport UserCard from '../UserCard';\r\n\r\ninterface IProps {\r\n    onAfterOpen?: () => void;\r\n}\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst PostLikesModal: React.FC<IProps> = (props) => {\r\n    const [likes, setLikes] = useState<IProfile[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [offset, setOffset] = useState(0);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const didMount = useDidMount(true);\r\n    const dispatch = useDispatch();\r\n    const { isOpen, targetPost } = useSelector((state: IRootReducer) => ({\r\n        isOpen: state.modal.isOpenPostLikes,\r\n        targetPost: state.helper.targetPost\r\n    }));\r\n\r\n    useEffect(() => {\r\n        if (isOpen && targetPost) {\r\n            fetchLikes();\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isOpen]);\r\n\r\n    const fetchLikes = async (initOffset = 0) => {\r\n        try {\r\n            setIsLoading(true);\r\n            const result = await getPostLikes(targetPost?.id as string, { offset: initOffset });\r\n\r\n            if (didMount) {\r\n                setOffset(offset + 1);\r\n                setLikes(result);\r\n                setIsLoading(false);\r\n            }\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsLoading(false);\r\n                setError(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    const closeModal = () => {\r\n        if (isOpen) {\r\n            dispatch(hideModal(EModalType.POST_LIKES));\r\n            dispatch(setTargetPost(null));\r\n        }\r\n    }\r\n\r\n    return !isOpen ? null : (\r\n        <Modal\r\n            isOpen={isOpen}\r\n            onAfterOpen={props.onAfterOpen}\r\n            onRequestClose={closeModal}\r\n            contentLabel=\"Example Modal\"\r\n            className=\"modal\"\r\n            shouldCloseOnOverlayClick={true}\r\n            overlayClassName=\"modal-overlay\"\r\n        >\r\n            <div className=\"relative transition-all min-w-15rem\">\r\n                <div\r\n                    className=\"absolute right-2 top-2 p-1 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:hover:bg-indigo-1100\"\r\n                    onClick={closeModal}\r\n                >\r\n                    <CloseOutlined className=\"p-2  outline-none text-gray-500 dark:text-white\" />\r\n                </div>\r\n                {(error && likes.length === 0) && (\r\n                    <span className=\"p-4 bg-red-100 text-red-500 block\">\r\n                        {error.error.message}\r\n                    </span>\r\n                )}\r\n                <h3 className=\"py-4 px-8 dark:text-white\">Likes</h3>\r\n                {(isLoading && likes.length === 0) && (\r\n                    <div className=\"flex min-h-10rem min-w-15rem items-center justify-center py-8\">\r\n                        <Loader />\r\n                    </div>\r\n                )}\r\n                {likes.length !== 0 && (\r\n                    <div className=\"p-4 px-4 w-full laptop:w-30rem max-h-70vh overflow-y-scroll scrollbar\">\r\n                        <div className=\"divide-y divide-gray-100 dark:divide-gray-800\">\r\n                            {likes.map(user => (\r\n                                <div key={user.id}>\r\n                                    <UserCard profile={user} />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        {(!isLoading && likes.length >= 10 && !error) && (\r\n                            <div className=\"flex items-center justify-center pt-2 border-t border-gray-100 dark:border-gray-800\">\r\n                                <span\r\n                                    className=\"text-red-700 dark:text-indigo-400 text-sm font-medium cursor-pointer\"\r\n                                    onClick={() => fetchLikes(offset)}\r\n                                >\r\n                                    Load more\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                        {(isLoading && !error) && (\r\n                            <div className=\"flex w-full items-center justify-center py-8\">\r\n                                <Loader />\r\n                            </div>\r\n                        )}\r\n                        {error && (\r\n                            <div className=\"flex items-center justify-center py-8\">\r\n                                <span className=\"text-gray-400 text-sm\">No more likes.</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default PostLikesModal;\r\n","import React, { forwardRef, MutableRefObject, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Avatar } from \"~/components/shared\";\r\nimport { IRootReducer } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    isLoading: boolean;\r\n    isSubmitting: boolean;\r\n    isUpdateMode: boolean;\r\n    [prop: string]: any;\r\n}\r\n\r\nconst CommentInput = forwardRef<HTMLInputElement, IProps>((props, ref) => {\r\n    const { isUpdateMode, isSubmitting, isLoading, ...rest } = props;\r\n    const userPicture = useSelector((state: IRootReducer) => state.auth.profilePicture);\r\n\r\n    useEffect(() => {\r\n        ref && (ref as MutableRefObject<HTMLInputElement>).current.focus();\r\n    }, [ref])\r\n\r\n    return (\r\n        <div className={`flex items-center w-full`}>\r\n            {!isUpdateMode && <Avatar url={userPicture?.url} className=\"mr-2 flex-shrink-0\" size=\"sm\" />}\r\n            <div className=\"flex-grow\">\r\n                <input\r\n                    {...rest}\r\n                    className={`${isSubmitting && isLoading && 'opacity-50'} dark:bg-indigo-1100 dark:!border-gray-800 dark:text-white`}\r\n                    type=\"text\"\r\n                    readOnly={isLoading || isSubmitting}\r\n                    ref={ref}\r\n                />\r\n                {isUpdateMode && <span className=\"text-xs text-gray-500 ml-2\">Press Esc to Cancel</span>}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default CommentInput;\r\n","import { DownOutlined, LoadingOutlined, UpOutlined } from \"@ant-design/icons\";\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Avatar } from \"~/components/shared\";\r\nimport { useDidMount } from \"~/hooks\";\r\nimport { getCommentReplies, likeComment, replyOnComment, updateComment } from \"~/services/api\";\r\nimport { IComment, IError } from \"~/types/types\";\r\nimport { CommentOptions } from \"../Options\";\r\nimport CommentInput from \"./CommentInput\";\r\nimport CommentList from \"./CommentList\";\r\n\r\ndayjs.extend(relativeTime);\r\n\r\ninterface IProps {\r\n    comment: IComment;\r\n    openDeleteModal: () => void;\r\n}\r\n\r\nconst CommentItem: React.FC<IProps> = (props) => {\r\n    const [offset, setOffset] = useState(0);\r\n    const [comment, setComment] = useState<IComment>(props.comment);\r\n    const [replies, setReplies] = useState<IComment[]>([]);\r\n    const [isOpenInput, setOpenInput] = useState(false);\r\n    const [isVisibleReplies, setVisibleReplies] = useState(true);\r\n    const [editCommentBody, setEditCommentBody] = useState(comment.body || '');\r\n    const [newCommentBody, setNewCommentBody] = useState('');\r\n    const [isGettingReplies, setGettingReplies] = useState(false);\r\n    const [isSubmitting, setSubmitting] = useState(false);\r\n    const [isLiking, setIsLiking] = useState(false);\r\n    const [isUpdateMode, setUpdateMode] = useState(false);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const didMount = useDidMount(true);\r\n    const replyInputRef = useRef<HTMLInputElement | null>(null);\r\n    const editCommentInputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n    useEffect(() => {\r\n        didMount && setComment(props.comment);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [props.comment]);\r\n\r\n    const getReplies = async () => {\r\n        try {\r\n            setGettingReplies(true);\r\n            const data = await getCommentReplies({ offset, comment_id: comment.id, post_id: comment.post_id });\r\n\r\n            setGettingReplies(false);\r\n            setError(null);\r\n            setReplies([...replies, ...data]);\r\n            setOffset(offset + 1);\r\n            setVisibleReplies(true);\r\n        } catch (e) {\r\n            console.log(e);\r\n            setGettingReplies(false);\r\n            setError(e);\r\n        }\r\n    }\r\n\r\n    const onClickViewReplies = () => {\r\n        if (isGettingReplies) return;\r\n        if (didMount) setVisibleReplies(!isVisibleReplies);\r\n\r\n        if (replies.length === 0) getReplies();\r\n    }\r\n\r\n    const handleSubmitReply = async (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key === 'Enter') {\r\n            try {\r\n                let data;\r\n                setSubmitting(true);\r\n\r\n                if (isUpdateMode && editCommentBody) {\r\n                    data = await updateComment(comment.id, editCommentBody);\r\n                } else {\r\n                    data = await replyOnComment(newCommentBody, comment.id, comment.post_id);\r\n                }\r\n\r\n                // make sure it's mounted before setting states \r\n                if (didMount) {\r\n                    if (isUpdateMode) {\r\n                        setComment(data);\r\n                        setEditCommentBody('');\r\n                        setUpdateMode(false);\r\n                    } else {\r\n                        setReplies([...replies, data]);\r\n                        setNewCommentBody('');\r\n                        setOpenInput(false);\r\n                    }\r\n\r\n                    setError(null);\r\n                    setVisibleReplies(true);\r\n                    setSubmitting(false);\r\n                    replies.length === 0 && getReplies();\r\n                }\r\n            } catch (e) {\r\n                console.log(e);\r\n                if (didMount) {\r\n                    setSubmitting(false);\r\n                    setError(e);\r\n                    // setError(e.error.message);\r\n                }\r\n            }\r\n        } else if (e.key === 'Escape') {\r\n            // if (isUpdateMode) handleCancelUpdate();\r\n            setUpdateMode(false);\r\n            setOpenInput(false);\r\n            editCommentInputRef.current && editCommentInputRef.current.blur();\r\n            replyInputRef.current && replyInputRef.current.blur();\r\n        }\r\n\r\n    };\r\n\r\n    const onClickReply = () => {\r\n        setOpenInput(!isOpenInput);\r\n        setUpdateMode(false);\r\n    };\r\n\r\n    const handleOnEditReplyChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setEditCommentBody(e.target.value);\r\n    };\r\n\r\n    const handleOnNewReplyChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setNewCommentBody(e.target.value);\r\n    };\r\n\r\n    const onClickEdit = () => {\r\n        setUpdateMode(true);\r\n        setEditCommentBody(comment.body);\r\n        setOpenInput(false);\r\n    }\r\n\r\n    const onClickLike = async () => {\r\n        if (isLiking) return;\r\n\r\n        try {\r\n            setIsLiking(true);\r\n            const { state, likesCount } = await likeComment(comment.id);\r\n\r\n            if (didMount) {\r\n                setIsLiking(false);\r\n                setComment({ ...comment, isLiked: state, likesCount });\r\n            }\r\n        } catch (err) {\r\n            didMount && setIsLiking(false);\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const updateCommentCallback = (comment: IComment) => {\r\n        if (didMount) {\r\n            setReplies(oldComments => oldComments.filter((cmt) => cmt.id !== comment.id));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"flex py-2 items-start w-full\"\r\n            key={comment.id}\r\n        >\r\n            <Link to={`/user/${comment.author.username}`} className=\"mr-2\">\r\n                <Avatar url={comment.author.profilePicture?.url} size=\"sm\" />\r\n            </Link>\r\n            <div className=\"inline-flex items-start flex-col w-full\">\r\n                {isUpdateMode ? (\r\n                    <CommentInput\r\n                        value={editCommentBody}\r\n                        placeholder=\"Write a reply...\"\r\n                        onChange={handleOnEditReplyChange}\r\n                        isSubmitting={isSubmitting}\r\n                        ref={editCommentInputRef}\r\n                        isUpdateMode={isUpdateMode}\r\n                        onKeyDown={handleSubmitReply}\r\n                    />\r\n                ) : (\r\n                    <>\r\n                        <div className=\"flex items-start w-full laptop:w-auto\">\r\n                            {/* ------ USERNAME AND COMMENT TEXT ----- */}\r\n                            <div className=\"bg-gray-100 dark:bg-indigo-950 px-2 py-1 rounded-md flex-grow laptop:flex-grow-0\">\r\n                                <Link className=\"inline-block\" to={`/user/${comment.author.username}`}>\r\n                                    <h5 className=\"dark:text-indigo-400\">{comment.author.username}</h5>\r\n                                </Link>\r\n                                <p className=\"text-gray-800 text-sm min-w-full break-all dark:text-gray-200 inline-block\">\r\n                                    {comment.body}\r\n                                </p>\r\n                            </div>\r\n                            {(comment.isOwnComment || comment.isPostOwner) && (\r\n                                <CommentOptions\r\n                                    comment={comment}\r\n                                    onClickEdit={onClickEdit}\r\n                                    openDeleteModal={props.openDeleteModal}\r\n                                />\r\n                            )}\r\n                        </div>\r\n                        <div className=\"mx-2\">\r\n                            {/* ---- DATE AND LIKE BUTTON ----- */}\r\n                            <div className=\"mt-1 flex items-center space-x-2\">\r\n                                {/* ---- LIKE BUTTON ---- */}\r\n                                {comment.likesCount > 0 && (\r\n                                    <span className=\"text-sm text-gray-500\">{comment.likesCount}</span>\r\n                                )}\r\n                                <span\r\n                                    className={`text-gray-400 hover:cursor-pointer hover:text-gray-800 dark:hover:text-gray-200 text-xs ${comment.isLiked && 'font-bold text-red-500 dark:text-indigo-300'} ${isLiking && 'opacity-50 hover:cursor-default'}`}\r\n                                    onClick={onClickLike}\r\n                                >\r\n                                    {comment.isLiked ? 'Unlike' : 'Like'}\r\n                                </span>\r\n                                {/* ---- REPLY BUTTON */}\r\n                                {comment.depth < 3 && (\r\n                                    <span\r\n                                        className=\"text-gray-400 hover:cursor-pointer hover:text-gray-800 dark:hover:text-gray-200 text-xs\"\r\n                                        onClick={onClickReply}\r\n                                    >\r\n                                        Reply\r\n                                    </span>\r\n                                )}\r\n                                {/* ---- DATE ---- */}\r\n                                <span className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n                                    {dayjs(comment.createdAt).fromNow()}\r\n                                </span>\r\n                                {comment.isEdited && (\r\n                                    <span className=\"text-xs text-gray-400 dark:text-gray-500 ml-2\">\r\n                                        Edited\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            {/* ---- VIEW REPLIES BUTTON ----  */}\r\n                            {(comment.replyCount > 0 || replies.length > 0) && (\r\n                                <div className=\"flex space-x-2\">\r\n                                    {!error && (\r\n                                        <span\r\n                                            className=\"text-xs text-red-500 hover:text-red-400 dark:text-indigo-400 dark:hover:text-indigo-200 mt-2 hover:cursor-pointer\"\r\n                                            onClick={onClickViewReplies}\r\n                                        >\r\n                                            {(isVisibleReplies && replies.length !== 0) ? 'Hide Replies' : 'View Replies'}\r\n                                            &nbsp;\r\n                                            {isGettingReplies\r\n                                                ? <LoadingOutlined className=\"text-1xs\" />\r\n                                                : (isVisibleReplies && replies.length !== 0) ? <UpOutlined className=\"text-1xs\" />\r\n                                                    : <DownOutlined className=\"text-1xs\" />\r\n                                            }\r\n                                        </span>\r\n                                    )}\r\n                                    {error && error?.status_code !== 404 && (\r\n                                        <span className=\"text-gray-400 text-xs\">{error?.error?.message}</span>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </>\r\n                )}\r\n                {/* ------ REPLY INPUT ----- */}\r\n                {isOpenInput && !isUpdateMode && (\r\n                    <div className=\"py-4 w-full\">\r\n                        <CommentInput\r\n                            value={newCommentBody}\r\n                            placeholder=\"Write a reply...\"\r\n                            onChange={handleOnNewReplyChange}\r\n                            isSubmitting={isSubmitting}\r\n                            ref={replyInputRef}\r\n                            isUpdateMode={isUpdateMode}\r\n                            onKeyDown={handleSubmitReply}\r\n                        />\r\n                    </div>\r\n                )}\r\n                {/* ---- REPLY LIST ------- */}\r\n                {replies.length > 0 && isVisibleReplies && (\r\n                    <CommentList comments={replies} updateCommentCallback={updateCommentCallback} />\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default CommentItem;\r\n","import { LoadingOutlined } from \"@ant-design/icons\";\nimport React, { lazy, Suspense, useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { useDidMount, useModal } from \"~/hooks\";\nimport { setTargetComment } from \"~/redux/action/helperActions\";\nimport { IComment } from \"~/types/types\";\nimport CommentItem from \"./CommentItem\";\n\nconst DeleteCommentModal = lazy(() => import('~/components/main/Modals/DeleteCommentModal'))\n\ninterface IProps {\n    comments: IComment[];\n    updateCommentCallback?: (comment: IComment) => void;\n}\n\nconst CommentList: React.FC<IProps> = ({ comments, updateCommentCallback }) => {\n    const didMount = useDidMount();\n    const dispatch = useDispatch();\n    const [replies, setReplies] = useState<IComment[]>(comments);\n    const { isOpen, closeModal, openModal } = useModal();\n\n    useEffect(() => {\n        didMount && setReplies(comments);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [comments]);\n\n    const deleteSuccessCallback = (comment: IComment) => {\n        if (didMount) {\n            (updateCommentCallback) && updateCommentCallback(comment); // For updating the base/parent comment\n            dispatch(setTargetComment(null));\n            setReplies(oldComments => oldComments.filter((cmt) => cmt.id !== comment.id));\n        }\n    }\n\n    return (\n        <TransitionGroup component={null}>\n            {replies.map(comment => (\n                <CSSTransition\n                    timeout={500}\n                    classNames=\"fade\"\n                    key={comment.id}\n                >\n                    <CommentItem openDeleteModal={openModal} comment={comment} />\n                </CSSTransition>\n            ))}\n            {/* ---- DELETE MODAL ---- */}\n            <Suspense fallback={<LoadingOutlined className=\"text-gray-800 dark:text-white\" />}>\n                {isOpen && (\n                    <DeleteCommentModal\n                        isOpen={isOpen}\n                        closeModal={closeModal}\n                        deleteSuccessCallback={deleteSuccessCallback}\n                    />\n                )}\n            </Suspense>\n        </TransitionGroup>\n    );\n};\n\nexport default CommentList;\n","import dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Boundary, Loader } from '~/components/shared';\r\nimport { useDidMount } from '~/hooks';\r\nimport { setTargetComment } from '~/redux/action/helperActions';\r\nimport { commentOnPost, getComments } from \"~/services/api\";\r\nimport { IComment, IFetchParams } from \"~/types/types\";\r\nimport CommentInput from './CommentInput';\r\nimport CommentList from './CommentList';\r\n\r\ndayjs.extend(relativeTime);\r\n\r\ninterface IProps {\r\n    postID: string;\r\n    authorID: string;\r\n    isCommentVisible: boolean;\r\n    commentInputRef: React.RefObject<HTMLInputElement>;\r\n    setInputCommentVisible: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst Comments: React.FC<IProps> = (props) => {\r\n    const {\r\n        postID,\r\n        isCommentVisible,\r\n        commentInputRef,\r\n    } = props;\r\n    const [comments, setComments] = useState<IComment[]>([]);\r\n    const [offset, setOffset] = useState(0);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isUpdateMode, setUpdateMode] = useState(false);\r\n    const [isSubmitting, setSubmitting] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [commentBody, setCommentBody] = useState('');\r\n    const didMount = useDidMount(true);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        fetchComment({ offset: 0, limit: 1, sort: 'desc' });\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (commentInputRef.current) commentInputRef.current.focus();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isCommentVisible]);\r\n\r\n    const fetchComment = async (params: IFetchParams) => {\r\n        try {\r\n            setIsLoading(true);\r\n            const result = await getComments(postID, params);\r\n\r\n            if (didMount) {\r\n                setOffset(offset + 1);\r\n                setComments([...result.reverse(), ...comments]);\r\n                setIsLoading(false);\r\n            }\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsLoading(false);\r\n                setError(e.error?.message || 'Something went wrong.');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleCommentBodyChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setCommentBody(e.target.value);\r\n    };\r\n\r\n    const handleSubmitComment = async (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key === 'Enter' && commentBody) {\r\n            try {\r\n                setSubmitting(true);\r\n                const comment = await commentOnPost(postID, commentBody);\r\n\r\n                if (didMount) {\r\n                    setComments([...comments, comment]);\r\n\r\n                    setCommentBody('');\r\n                    setUpdateMode(false);\r\n                    setSubmitting(false);\r\n                }\r\n            } catch (e) {\r\n                if (didMount) {\r\n                    setSubmitting(false);\r\n                    setError(e.error.message);\r\n                }\r\n            }\r\n        } else if (e.key === 'Escape') {\r\n            if (isUpdateMode) handleCancelUpdate();\r\n            if (commentInputRef.current) commentInputRef.current.blur();\r\n        }\r\n\r\n    };\r\n\r\n    const handleCancelUpdate = () => {\r\n        setCommentBody('');\r\n        dispatch(setTargetComment(null));\r\n        setUpdateMode(false);\r\n    }\r\n\r\n    const updateCommentCallback = (comment: IComment) => {\r\n        if (didMount) {\r\n            setComments(oldComments => oldComments.filter((cmt) => cmt.id !== comment.id));\r\n        }\r\n    }\r\n\r\n    return !isCommentVisible ? null : (\r\n        <Boundary>\r\n            <div className=\"rounded-b-md border-t border-gray-200 dark:border-gray-800\">\r\n                {/* ---- LOAD MORE COMMENTS BUTTON ----- */}\r\n                {(!error) && (\r\n                    <span\r\n                        className=\"text-red-700 dark:text-indigo-400 text-sm font-bold cursor-pointer inline-block p-2\"\r\n                        onClick={() => fetchComment({\r\n                            offset: 1,\r\n                            limit: 10,\r\n                            skip: comments.length === 1 ? 1 : undefined,\r\n                            sort: 'asc'\r\n                        })}\r\n                    >\r\n                        {isLoading ? <div className=\"ml-8 py-2\"><Loader size=\"sm\" /></div> : 'Load more comments'}\r\n                    </span>\r\n                )}\r\n                {/* ----- COMMENT LIST ---------- */}\r\n                <div className=\"py-4 laptop:px-2 space-y-2 divide-y divide-gray-200 dark:divide-gray-800\">\r\n                    <CommentList comments={comments} updateCommentCallback={updateCommentCallback} />\r\n                </div>\r\n                {/*  ---- INPUT COMMENT ----- */}\r\n                {isCommentVisible && (\r\n                    <CommentInput\r\n                        ref={commentInputRef}\r\n                        onChange={handleCommentBodyChange}\r\n                        placeholder=\"Write a comment...\"\r\n                        isSubmitting={isSubmitting}\r\n                        isLoading={isLoading}\r\n                        isUpdateMode={isUpdateMode}\r\n                        onKeyDown={handleSubmitComment}\r\n                        value={commentBody}\r\n                    />\r\n                )}\r\n            </div>\r\n        </Boundary>\r\n    );\r\n};\r\n\r\nexport default Comments;\r\n","import { useEffect, useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { useDidMount } from '~/hooks';\nimport { bookmarkPost } from '~/services/api';\n\ninterface IProps {\n    postID: string;\n    initBookmarkState: boolean;\n    children: (props: any) => React.ReactNode;\n}\n\nconst BookmarkButton: React.FC<IProps> = (props) => {\n    const [isBookmarked, setIsBookmarked] = useState(props.initBookmarkState || false);\n    const [isLoading, setLoading] = useState(false);\n    const didMount = useDidMount(true);\n\n    useEffect(() => {\n        setIsBookmarked(props.initBookmarkState);\n    }, [props.initBookmarkState]);\n\n    const dispatchBookmark = async () => {\n        if (isLoading) return;\n\n        try {\n            // state = TRUE | FALSE\n            setLoading(true);\n            const { state } = await bookmarkPost(props.postID);\n\n            if (didMount) {\n                setIsBookmarked(state);\n                setLoading(false);\n            }\n\n            if (state) {\n                toast.dark('Post successfully bookmarked.', {\n                    hideProgressBar: true,\n                    autoClose: 2000\n                });\n            } else {\n                toast.info('Post removed from bookmarks.', {\n                    hideProgressBar: true,\n                    autoClose: 2000\n                });\n            }\n        } catch (e) {\n            didMount && setLoading(false);\n            console.log(e);\n        }\n    }\n\n    return (\n        <div>\n            { props.children({ dispatchBookmark, isBookmarked, isLoading })}\n        </div>\n    );\n};\n\nexport default BookmarkButton;\n","import dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\n\ndayjs.extend(relativeTime);\n\nexport const displayTime = (createdAt: string | Date, showTime = false) => {\n    const now = dayjs();\n    const created = dayjs(createdAt);\n    const oneDay = 24 * 60 * 60 * 1000;\n    const twelveHours = 12 * 60 * 60 * 1000;\n    const timeDisplay = !showTime ? '' : ` | ${dayjs(createdAt).format('hh:mm a')}`;\n\n    if (now.diff(created) < twelveHours) {\n        return dayjs(createdAt).fromNow();\n    } else if (now.diff(created) < oneDay) {\n        return `${dayjs(createdAt).fromNow()} ${timeDisplay}`;\n    } else if (now.diff(createdAt, 'year') >= 1) {\n        return `${dayjs(createdAt).format('MMM. DD, YYYY')} ${timeDisplay}`;\n    } else {\n        return `${dayjs(createdAt).format('MMM. DD')} ${timeDisplay}`;\n    }\n}","import { CloseOutlined, CommentOutlined, LineOutlined, SendOutlined } from \"@ant-design/icons\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport { Avatar, Loader } from \"~/components/shared\";\r\nimport { displayTime } from \"~/helpers/utils\";\r\nimport { useDidMount } from \"~/hooks\";\r\nimport { closeChat, getMessagesSuccess, minimizeChat, newMessageArrived } from \"~/redux/action/chatActions\";\r\nimport { getUserMessages, sendMessage } from \"~/services/api\";\r\nimport socket from \"~/socket/socket\";\r\nimport { IChatItemsState, IError, IMessage, IUser } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    target: IChatItemsState;\r\n    user: IUser;\r\n}\r\n\r\nconst ChatBox: React.FC<IProps> = ({ user, target }) => {\r\n    const [text, setText] = useState('');\r\n    const dispatch = useDispatch();\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const [isLoading, setLoading] = useState(false);\r\n    const [isSending, setSending] = useState(false);\r\n    const didMount = useDidMount(true);\r\n    const [isTyping, setIsTyping] = useState(false);\r\n    const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n    let dummyEl = useRef<HTMLSpanElement | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (target.chats.length === 0) fetchMessages();\r\n\r\n        socket.on('newMessage', (message: IMessage) => {\r\n            dispatch(newMessageArrived(target.username, message));\r\n\r\n            if (dummyEl.current) {\r\n                dummyEl.current.scrollIntoView();\r\n            }\r\n        });\r\n\r\n        socket.on('typing', (state: boolean) => {\r\n            setIsTyping(state);\r\n        });\r\n\r\n        if (dummyEl.current) {\r\n            dummyEl.current.scrollIntoView();\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const onMinimize = () => {\r\n        dispatch(minimizeChat(target.username));\r\n    }\r\n\r\n    const onCloseChat = () => {\r\n        dispatch(closeChat(target.username))\r\n    }\r\n\r\n    const fetchMessages = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const messages = await getUserMessages(target.id, { offset: target.offset });\r\n\r\n            dispatch(getMessagesSuccess(target.username, messages.reverse()));\r\n\r\n            if (didMount) {\r\n                setText('');\r\n                setLoading(false);\r\n                setError(null);\r\n            }\r\n\r\n\r\n            if (!target.offset || target.offset < 1) {\r\n                dummyEl.current?.scrollIntoView();\r\n            }\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setLoading(false);\r\n                setError(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    const dispatchSendMessage = async () => {\r\n        if (text) {\r\n            try {\r\n                setSending(true);\r\n\r\n                await sendMessage(text, target.id);\r\n\r\n                if (didMount) {\r\n                    setSending(false);\r\n                    setText('');\r\n                    setError(null);\r\n                }\r\n            } catch (e) {\r\n                if (didMount) {\r\n                    setSending(false);\r\n                    setError(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleTextChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setText(e.target.value);\r\n    }\r\n\r\n    const handleTextKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key === 'Enter') {\r\n            if (text) {\r\n                dispatchSendMessage();\r\n                socket.emit('user-typing', { user: target, state: false });\r\n            }\r\n        } else {\r\n            socket.emit('user-typing', { user: target, state: true });\r\n\r\n            if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n            timeoutRef.current = setTimeout(() => {\r\n                socket.emit('user-typing', { user: target, state: false })\r\n            }, 2000);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`bg-white dark:bg-indigo-1100 p-3 relative w-full h-full laptop:w-20rem laptop:shadow-lg laptop:rounded-t-xl laptop:bottom-0 laptop:right-24 laptop:border laptop:border-gray-400 dark:border-gray-800`}>\r\n            <div className=\"flex justify-between pb-3 border-b border-gray-200 dark:border-gray-800\">\r\n                <Link className=\"dark:text-indigo-400\" to={`/user/${target.username}`}>\r\n                    <div className=\"flex items-center\">\r\n                        <Avatar url={target.profilePicture?.url} className=\"mr-2\" />\r\n                        <h5>{target.username}</h5>\r\n                    </div>\r\n                </Link>\r\n                <div className=\"hidden laptop:flex laptop:items-center\">\r\n                    <div\r\n                        className=\"post-option-toggle p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:text-white dark:hover:bg-indigo-1000\"\r\n                        title=\"Minimize Chat\"\r\n                        onClick={onMinimize}\r\n                    >\r\n                        <LineOutlined className=\"flex items-center justify-center\" />\r\n                    </div>\r\n                    <div\r\n                        className=\"post-option-toggle p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:text-white dark:hover:bg-indigo-1000\"\r\n                        title=\"Close Chat\"\r\n                        onClick={onCloseChat}\r\n                    >\r\n                        <CloseOutlined className=\"flex items-center justify-center\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {/* --- MESSAGES BODY ---- */}\r\n            <div className=\"min-h-80% laptop:min-h-24rem max-h-85% laptop:max-h-80 bg-gray-100 dark:bg-indigo-1000 overflow-y-scroll pb-4 scrollbar relative\">\r\n                {(isLoading && target.chats.length === 0 && !error) && (\r\n                    <div className=\"flex justify-center min-h-18rem py-2\">\r\n                        <Loader />\r\n                    </div>\r\n                )}\r\n                {(!isLoading && target.chats.length === 0 && error) && (\r\n                    <div className=\"flex flex-col items-center min-h-18rem justify-center py-2\">\r\n                        {error.status_code === 404 ? (\r\n                            <>\r\n                                <CommentOutlined className=\"text-gray-300 text-6xl\" />\r\n                                <span className=\"text-gray-400 mb-2\">No messages.</span>\r\n                                <span className=\"text-gray-400 text-sm\">Send a message to {target.username}</span>\r\n                            </>\r\n                        ) : (\r\n                            <span className=\"text-gray-400 mb-4\">\r\n                                {error?.error?.message || 'Unable to process your request.'}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                {(!error && target.chats.length >= 10) && (\r\n                    <>\r\n                        {!isLoading ? (\r\n                            <div\r\n                                className={`flex justify-center items-center py-2 mb-4 bg-indigo-100 cursor-pointer`}\r\n                                onClick={fetchMessages}\r\n                            >\r\n                                <span className=\"text-red-700 text-xs\">Older messages</span>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"flex justify-center py-2 mb-4\">\r\n                                <Loader />\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                )}\r\n                {(target.chats.length !== 0) && (\r\n                    <>\r\n                        <TransitionGroup component={null}>\r\n                            {target.chats.map((msg, i) => (\r\n                                <CSSTransition\r\n                                    timeout={500}\r\n                                    classNames=\"fade\"\r\n                                    key={msg.id}\r\n                                >\r\n                                    <div className=\"flex flex-col\">\r\n                                        <div\r\n                                            className={`flex p-2  ${msg.isOwnMessage ? 'justify-end' : 'justify-start'}`}\r\n                                            key={`${msg.id}_${msg.from.id}`}\r\n                                        >\r\n                                            <div className=\"flex\">\r\n                                                {/* -- AVATAR --- */}\r\n                                                <Avatar\r\n                                                    url={msg.isOwnMessage ? user.profilePicture?.url : target.profilePicture?.url}\r\n                                                    size=\"xs\"\r\n                                                    className={`self-end flex-shrink-0 !bg-cover !bg-no-repeat rounded-full ${msg.isOwnMessage ? 'ml-1 order-2' : 'mr-1 order-1'}`}\r\n                                                />\r\n                                                {/*  -- MESSAGE-- */}\r\n                                                <span\r\n                                                    className={`py-2 px-3 break-all text-sm rounded-xl ${msg.isOwnMessage ? 'bg-indigo-700 text-white order-1' : 'bg-gray-300 order-2'}`}>\r\n                                                    {msg.text}\r\n                                                </span>\r\n                                                <span ref={dummyEl}></span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className={`flex pb-2 ${msg.isOwnMessage ? 'justify-end mr-8' : 'justify-start ml-8'}`}>\r\n                                            {/* ---DATE ---- */}\r\n                                            <span className={`text-gray-400 text-1xs ${msg.isOwnMessage ? 'order-2' : 'order-1'}`}>\r\n                                                {displayTime(msg.createdAt, true)}\r\n                                            </span>\r\n                                            {/* ---- SEEN ---- */}\r\n                                            {(msg.isOwnMessage && msg.seen && i === target.chats.length - 1) && (\r\n                                                <span className={`text-gray-400 mx-2 text-1xs italic flex-grow ${msg.isOwnMessage ? 'order-1' : 'order-2'}`}>\r\n                                                    &nbsp;Seen\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </CSSTransition>\r\n                            ))}\r\n                        </TransitionGroup>\r\n                        {isTyping && (\r\n                            <div className=\"flex justify-center py-2\">\r\n                                <span className=\"text-xs text-gray-400\">{target.username} is typing...</span>\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>\r\n            <div className=\"relative bottom-0 left-0 bg-white dark:bg-indigo-1100 w-full flex p-2 border-t border-gray-200 dark:border-gray-800\">\r\n                <input\r\n                    className=\"flex-grow !border-gray-400 !rounded-r-none !py-0 dark:bg-indigo-1000 dark:text-white dark:!border-gray-800\"\r\n                    type=\"text\"\r\n                    onChange={handleTextChange}\r\n                    onKeyDown={handleTextKeyDown}\r\n                    readOnly={isSending || isLoading}\r\n                    placeholder=\"Send a message...\"\r\n                    value={text}\r\n                />\r\n                <button\r\n                    className=\"!rounded-l-none flex items-center justify-center\"\r\n                    disabled={isSending || isLoading}\r\n                    onClick={dispatchSendMessage}\r\n                >\r\n                    <SendOutlined className=\"flex items-center justify-center text-xl\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatBox;\r\n","import { useDispatch } from \"react-redux\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport Avatar from \"~/components/shared/Avatar\";\r\nimport { initiateChat } from \"~/redux/action/chatActions\";\r\nimport { IChatItemsState } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    users: IChatItemsState[]\r\n}\r\n\r\nconst MinimizedChats: React.FC<IProps> = ({ users }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <div className=\"p-4 absolute bottom-0 right-0\">\r\n            <TransitionGroup component={null}>\r\n                {users.map(chat => chat.minimized && (\r\n                    <CSSTransition\r\n                        timeout={500}\r\n                        classNames=\"fade\"\r\n                        key={chat.username}\r\n                    >\r\n                        <div\r\n                            key={chat.username}\r\n                            onClick={() => dispatch(initiateChat(chat))}\r\n                            title={chat.username}\r\n                        >\r\n                            <Avatar\r\n                                url={chat.profilePicture?.url}\r\n                                size=\"lg\"\r\n                                className=\"cursor-pointer shadow-md hover:border-2 hover:border-indigo-500 hover:opacity-90  mr-2 my-4 border border-indigo-700\"\r\n                            />\r\n                        </div>\r\n                    </CSSTransition>\r\n                ))}\r\n            </TransitionGroup>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MinimizedChats;\r\n\r\n","import { useSelector } from \"react-redux\";\nimport { IRootReducer } from \"~/types/types\";\nimport ChatBox from \"./ChatBox\";\nimport MinimizedChats from \"./MinimizedChats\";\n\nconst Chats = () => {\n    const { chats, user } = useSelector((state: IRootReducer) => ({\n        chats: state.chats,\n        user: state.auth\n    }));\n\n    return (\n        <div className=\"fixed bottom-0 right-0 z-50\">\n            {chats.items.map(chat => chats.active === chat.id && (\n                <ChatBox key={chat.id} user={user} target={chat} />\n            ))}\n            <MinimizedChats users={chats.items} />\n        </div>\n    )\n};\n\nexport default Chats;\n","import { CheckOutlined, UserAddOutlined } from \"@ant-design/icons\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDidMount } from \"~/hooks\";\r\nimport { followUser, unfollowUser } from \"~/services/api\";\r\n\r\ninterface IProps {\r\n    isFollowing: boolean;\r\n    userID: string;\r\n    size?: string;\r\n}\r\n\r\nconst FollowButton: React.FC<IProps> = (props) => {\r\n    const [isFollowing, setIsFollowing] = useState(props.isFollowing);\r\n    const [isLoading, setLoading] = useState(false);\r\n    const didMount = useDidMount();\r\n\r\n    useEffect(() => {\r\n        setIsFollowing(props.isFollowing);\r\n    }, [props.isFollowing])\r\n\r\n    const dispatchFollow = async () => {\r\n        try {\r\n            setLoading(true);\r\n            if (isFollowing) {\r\n                const result = await unfollowUser(props.userID);\r\n                didMount && setIsFollowing(result.state);\r\n            } else {\r\n                const result = await followUser(props.userID);\r\n                didMount && setIsFollowing(result.state);\r\n            }\r\n\r\n            didMount && setLoading(false);\r\n        } catch (e) {\r\n            didMount && setLoading(false);\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <button\r\n            className={`${isFollowing && 'hover:bg-gray-200 bg-indigo-100 !border !border-indigo-500 text-red-700 dark:bg-indigo-1100 dark:text-indigo-400 dark:hover:bg-indigo-900 dark:hover:text-white'} flex items-center ${props.size === 'sm' && '!py-2 !px-3 !text-sm'}`}\r\n            disabled={isLoading}\r\n            onClick={dispatchFollow}\r\n        >\r\n            {isFollowing ? <CheckOutlined /> : <UserAddOutlined />}\r\n            &nbsp;&nbsp;\r\n            <span className={`${props.size === 'sm' && 'text-sm'}`}>\r\n                {isLoading\r\n                    ? 'Following'\r\n                    : !isLoading && !isFollowing\r\n                        ? 'Follow'\r\n                        : 'Following'}\r\n            </span>\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default FollowButton;\r\n","import { LikeOutlined } from '@ant-design/icons';\r\nimport { useEffect, useState } from 'react';\r\nimport { useDidMount } from '~/hooks';\r\nimport { likePost } from '~/services/api';\r\n\r\ninterface IProps {\r\n    postID: string;\r\n    isLiked: boolean;\r\n    likeCallback: (postID: string, state: boolean, newLikeCount: number) => void;\r\n}\r\n\r\nconst LikeButton: React.FC<IProps> = (props) => {\r\n    const [isLiked, setIsLiked] = useState(props.isLiked);\r\n    const [isLoading, setLoading] = useState(false);\r\n    const didMount = useDidMount();\r\n\r\n    useEffect(() => {\r\n        setIsLiked(props.isLiked);\r\n    }, [props.isLiked]);\r\n\r\n    const dispatchLike = async () => {\r\n        if (isLoading) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n\r\n            const { state, likesCount } = await likePost(props.postID);\r\n            if (didMount) {\r\n                setLoading(false);\r\n                setIsLiked(state);\r\n            }\r\n\r\n            props.likeCallback(props.postID, state, likesCount);\r\n        } catch (e) {\r\n            didMount && setLoading(false);\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <span\r\n            className={` px-1 py-2 rounded-md flex items-center justify-center hover:bg-gray-100 cursor-pointer text-l w-2/4  ${isLiked ? 'text-red-700 font-bold dark:text-indigo-400 dark:hover:bg-indigo-1100' : 'text-gray-700 dark:hover:bg-indigo-1100 dark:hover:text-white  dark:bg-indigo-1000 hover:text-gray-800 dark:text-gray-400'} ${isLoading && 'opacity-50'}`}\r\n            onClick={dispatchLike}\r\n        >\r\n\r\n            <LikeOutlined />\r\n            &nbsp;\r\n            {isLiked ? 'Unlike' : 'Like'}\r\n        </span>\r\n    );\r\n};\r\n\r\nexport default LikeButton;\r\n","import { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport Avatar from '~/components/shared/Avatar';\r\nimport { displayTime } from '~/helpers/utils';\r\nimport { IMessage, IUser } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    messages: IMessage[];\r\n    handleReadMessage: (sender: IUser) => void;\r\n    infiniteScrollRef: React.RefObject<HTMLElement>;\r\n}\r\n\r\nconst MessagesList: React.FC<IProps> = (props) => {\r\n    const { messages, handleReadMessage, infiniteScrollRef } = props;\r\n\r\n    return (\r\n        <div>\r\n            {messages.length === 0 ? (\r\n                <div className=\"text-center p-4\">\r\n                    <p className=\"text-gray-400 italic\">No Messages.</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"max-h-80vh laptop:max-h-70vh overflow-y-scroll divide-y divide-gray-100 scrollbar\">\r\n                    <TransitionGroup component={null}>\r\n                        <div ref={infiniteScrollRef as React.RefObject<HTMLDivElement>}>\r\n                            {messages.map(message => (message.from && message.to) && (\r\n                                <CSSTransition\r\n                                    timeout={500}\r\n                                    classNames=\"fade\"\r\n                                    key={message.id}\r\n                                >\r\n                                    <div\r\n                                        className={`flex justify-start cursor-pointer hover:bg-gray-100 dark:hover:bg-indigo-1100 border border-transparent dark:hover:border-indigo-700 px-2 py-3 relative ${(!message.seen && !message.isOwnMessage) && 'bg-indigo-100 dark:bg-indigo-1100 hover:bg-indigo-200'}`}\r\n                                        key={message.id}\r\n                                        onClick={() => handleReadMessage(message.isOwnMessage ? message.to : message.from)}\r\n                                    >\r\n                                        {/* --- IMAGE--- */}\r\n                                        <Avatar\r\n                                            url={!message.isOwnMessage ? message.from.profilePicture?.url : message.to.profilePicture?.url}\r\n                                            size=\"lg\"\r\n                                            className=\"flex-shrink-0 mr-4\"\r\n                                        />\r\n                                        <div className=\"relative flex-grow\">\r\n                                            {/* --- USERNAME --- */}\r\n                                            <h5 className={`${(!message.seen && !message.isOwnMessage) && 'font-bold text-gray-800 dark:text-white'} text-gray-500`}>\r\n                                                {!message.isOwnMessage ? message.from.username : message.to.username}\r\n                                            </h5>\r\n                                            {/* -- MESSAGE--- */}\r\n                                            <span className={`block max-w-16rem laptop:max-w-xs whitespace-nowrap overflow-hidden overflow-ellipsis ${(message.seen || message.isOwnMessage) ? 'text-gray-400' : 'text-red-600 dark:text-indigo-400 font-medium'} text-sm`}>\r\n                                                {message.isOwnMessage && 'You:'} {message.text}\r\n                                            </span>\r\n                                            {/* --- DATE --- */}\r\n                                            <span className=\"absolute right-4 top-0 text-1xs text-gray-400\">\r\n                                                {displayTime(message.createdAt)}\r\n                                            </span>\r\n                                            {/* ---- SEEN ---- */}\r\n                                            {(message.isOwnMessage && message.seen) && (\r\n                                                <Avatar\r\n                                                    className=\"absolute right-4 bottom-0\"\r\n                                                    size=\"xs\"\r\n                                                    url={message.to.profilePicture?.url}\r\n                                                />\r\n                                            )}\r\n                                            {/* --- BADGE ---- */}\r\n                                            {(!message.isOwnMessage && !message.seen) && (\r\n                                                <div className=\"absolute rounded-full  bottom-0 top-0 right-4 my-auto w-2 h-2 bg-red-600\" />\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </CSSTransition>\r\n                            )\r\n                            )}\r\n                        </div>\r\n                    </TransitionGroup>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MessagesList;\r\n","import { FormOutlined, MessageOutlined } from '@ant-design/icons';\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport useInfiniteScroll from 'react-infinite-scroll-hook';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport { ComposeMessageModal } from '~/components/main';\r\nimport { Badge, Loader } from '~/components/shared';\r\nimport { useModal } from '~/hooks';\r\nimport { initiateChat } from '~/redux/action/chatActions';\r\nimport { getMessages, getUnreadMessages, readMessage } from '~/services/api';\r\nimport socket from \"~/socket/socket\";\r\nimport { IError, IMessage, IRootReducer, IUser } from \"~/types/types\";\r\nimport MessagesList from \"./MessagesList\";\r\n\r\n\r\nconst Messages: React.FC<{ isAuth: boolean; }> = ({ isAuth }) => {\r\n    const id = useSelector((state: IRootReducer) => state.auth.id);\r\n    const [isMessagesOpen, setMessagesOpen] = useState(false);\r\n    const [isLoading, setLoading] = useState(false);\r\n    const [offset, setOffset] = useState(0);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const [messages, setMessages] = useState<IMessage[]>([]);\r\n    const [count, setCount] = useState(0);\r\n    const dispatch = useDispatch();\r\n    const composeModal = useModal();\r\n    const history = useHistory();\r\n    const isMessagesOpenRef = useRef(isMessagesOpen);\r\n\r\n\r\n    useEffect(() => {\r\n        isMessagesOpenRef.current = isMessagesOpen;\r\n    }, [isMessagesOpen]);\r\n\r\n    useEffect(() => {\r\n        if (isMessagesOpen) {\r\n            fetchMessages();\r\n        }\r\n\r\n        socket.on('newMessage', (newMessage: IMessage) => {\r\n            setMessages((prevMessages) => updateNewMessages(prevMessages, newMessage));\r\n            setCount((prevCount) => newMessage.isOwnMessage ? 0 : prevCount + 1);\r\n        });\r\n\r\n        document.addEventListener('click', handleClickOutside);\r\n\r\n        if (isAuth) {\r\n            getUnreadMessages()\r\n                .then((result) => {\r\n                    setCount(result.count);\r\n                });\r\n        }\r\n\r\n        return () => {\r\n            socket.emit('userDisconnect', id);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const updateNewMessages = (prevMessages: IMessage[], newMessage: IMessage) => {\r\n        let messageOnList = false;\r\n        const updated = prevMessages\r\n            .map((msg) => {\r\n                const arr = [msg.from.username, msg.to.username];\r\n\r\n                if (arr.includes(newMessage.from.username) && arr.includes(newMessage.to.username)) {\r\n                    messageOnList = true;\r\n                    return newMessage;\r\n                }\r\n\r\n                return msg;\r\n            });\r\n        const sorted = updated.sort((a, b) => new Date(a.createdAt) > new Date(b.createdAt) ? -1 : 1);\r\n\r\n        return messageOnList ? sorted : [newMessage, ...sorted];\r\n    }\r\n\r\n    const handleClickOutside = (e: Event) => {\r\n        const toggle = (e.target as HTMLElement).closest('.messages-toggle');\r\n        const wrapper = (e.target as HTMLElement).closest('.messages-wrapper');\r\n        const seeMoreButton = (e.target as HTMLElement).closest('.see-more-button');\r\n\r\n        if (!toggle && isMessagesOpenRef.current && !wrapper && !seeMoreButton) {\r\n            setMessagesOpen(false);\r\n        }\r\n    }\r\n\r\n    const fetchMessages = async () => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            const result = await getMessages({ offset });\r\n\r\n            setMessages([...messages, ...result]);\r\n            setOffset(offset + 1);\r\n            setLoading(false);\r\n        } catch (e) {\r\n            setError(e);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleReadMessage = async (sender: IUser) => {\r\n        try {\r\n            dispatch(initiateChat(sender));\r\n            setMessagesOpen(false);\r\n\r\n            await readMessage(sender.id);\r\n            const updated = messages.map((msg) => {\r\n                if (msg.from.id === sender.id) {\r\n                    return {\r\n                        ...msg,\r\n                        seen: true\r\n                    }\r\n                }\r\n\r\n                return msg;\r\n            });\r\n\r\n            setMessages(updated);\r\n\r\n            if (window.screen.width < 800) {\r\n                history.push(`/chat/${sender.username}`);\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const toggleMessages = () => {\r\n        setMessagesOpen(!isMessagesOpen);\r\n        setCount(0);\r\n\r\n        // Since setting state is asynchronous, we should flip the value of isMessagesOpen\r\n        if (!isMessagesOpen && messages.length === 0) {\r\n            fetchMessages();\r\n        }\r\n    }\r\n\r\n    const onClickCompose = () => {\r\n        composeModal.openModal();\r\n        setMessagesOpen(false);\r\n    }\r\n\r\n    const infiniteRef = useInfiniteScroll({\r\n        loading: isLoading,\r\n        hasNextPage: !error && messages.length >= 10,\r\n        onLoadMore: fetchMessages,\r\n        scrollContainer: 'parent',\r\n    });\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            <div onClick={toggleMessages}>\r\n                <Badge count={count}>\r\n                    <MessageOutlined className=\"messages-toggle text-xl focus:outline-none dark:text-white\" />\r\n                </Badge>\r\n            </div>\r\n            {isMessagesOpen && (\r\n                <div className=\"messages-wrapper h-screen border border-transparent dark:border-gray-800 laptop:h-auto fixed top-14 laptop:top-10 pb-14 laptop:pb-0 right-0 w-full laptop:w-30rem bg-white dark:bg-indigo-1000 shadow-lg laptop:rounded-md laptop:absolute\">\r\n                    {/*  ----- HEADER ----- */}\r\n                    <div className=\"px-4 py-2 border-b-gray-200 flex justify-between items-center bg-indigo-700 laptop:rounded-t-md\">\r\n                        <h6 className=\"text-white\">Messages</h6>\r\n                        <span\r\n                            className=\"text-sm flex p-2 text-white rounded-md hover:bg-indigo-500\"\r\n                            onClick={onClickCompose}\r\n                        >\r\n                            <FormOutlined className=\"mr-2\" />\r\n                            Compose\r\n                        </span>\r\n                    </div>\r\n                    {/* --- LOADER FIRST FETCH */}\r\n                    {(isLoading && !error && messages.length === 0) && (\r\n                        <div className=\"flex items-center justify-center py-8\">\r\n                            <Loader />\r\n                        </div>\r\n                    )}\r\n                    {/* --- ERROR MESSAGE ---- */}\r\n                    {(messages.length === 0 && error) && (\r\n                        <div className=\"flex justify-center py-6\">\r\n                            <p className=\"text-gray-400 italic\">\r\n                                {error.status_code === 404\r\n                                    ? 'You have no messages.'\r\n                                    : (error?.error?.message || 'Something went wrong :(')\r\n                                }\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                    {/* --- MSG LIST --- */}\r\n                    {(messages.length !== 0) && (\r\n                        <MessagesList\r\n                            messages={messages}\r\n                            handleReadMessage={handleReadMessage}\r\n                            infiniteScrollRef={infiniteRef}\r\n                        />\r\n                    )}\r\n                    {/* ---- LOADER FETCHING MORE --- */}\r\n                    {(isLoading && !error && messages.length !== 0) && (\r\n                        <div className=\"flex items-center justify-center py-4\">\r\n                            <Loader />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n            {composeModal.isOpen && (\r\n                <ComposeMessageModal\r\n                    isOpen={composeModal.isOpen}\r\n                    openModal={composeModal.openModal}\r\n                    closeModal={composeModal.closeModal}\r\n                    userID={id}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Messages;\r\n","import { CloseOutlined, FormOutlined } from '@ant-design/icons';\r\nimport Modal from 'react-modal';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { SearchInput } from '~/components/shared';\r\nimport { initiateChat } from '~/redux/action/chatActions';\r\nimport { IUser } from '~/types/types';\r\n\r\ninterface IProps {\r\n    isOpen: boolean;\r\n    onAfterOpen?: () => void;\r\n    closeModal: () => void;\r\n    openModal: () => void;\r\n    userID: string;\r\n}\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst ComposeMessageModal: React.FC<IProps> = (props) => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const clickSearchResultCallback = (user: IUser) => {\r\n        if (props.userID === user.id) return;\r\n        dispatch(initiateChat(user));\r\n        props.closeModal();\r\n\r\n        if (window.screen.width < 800) {\r\n            history.push(`/chat/${user.username}`);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={props.isOpen}\r\n            onAfterOpen={props.onAfterOpen}\r\n            onRequestClose={props.closeModal}\r\n            contentLabel=\"Compose Message Modal\"\r\n            className=\"modal\"\r\n            shouldCloseOnOverlayClick={true}\r\n            overlayClassName=\"modal-overlay\"\r\n        >\r\n            <div className=\"relative transition-all pb-8 min-h-18rem\">\r\n                <div\r\n                    className=\"absolute right-2 top-2 p-1 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:hover:bg-indigo-1100\"\r\n                    onClick={props.closeModal}\r\n                >\r\n                    <CloseOutlined className=\"p-2  outline-none text-gray-500 dark:text-white\" />\r\n                </div>\r\n                <h3 className=\"py-4 px-8 flex dark:text-white\">\r\n                    <FormOutlined className=\"mr-2\" />\r\n                    Compose Message\r\n                </h3>\r\n                <div className=\"flex justify-start px-8 mt-4\">\r\n                    <h4 className=\"mr-2 pt-2 dark:text-white\">To: </h4>\r\n                    <SearchInput\r\n                        floatingResult={false}\r\n                        clickItemCallback={clickSearchResultCallback}\r\n                        showNoResultMessage={true}\r\n                        preventDefault={true}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default ComposeMessageModal;\r\n","import { CloseCircleOutlined, CloseOutlined, FileImageOutlined } from '@ant-design/icons';\r\nimport { useState } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { useSelector } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { useFileHandler } from '~/hooks';\r\nimport { IImage, IRootReducer } from '~/types/types';\r\n\r\ninterface IProps {\r\n    isOpen: boolean;\r\n    onAfterOpen?: () => void;\r\n    closeModal: () => void;\r\n    openModal: () => void;\r\n    dispatchCreatePost: (form: FormData) => void;\r\n}\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst CreatePostModal: React.FC<IProps> = (props) => {\r\n    const [description, setDescription] = useState('');\r\n    const [privacy, setPrivacy] = useState('public');\r\n    const isLoadingCreatePost = useSelector((state: IRootReducer) => state.loading.isLoadingCreatePost);\r\n    const { imageFile, onFileChange, clearFiles, removeImage } = useFileHandler<IImage[]>('multiple', []);\r\n\r\n    const handleDescriptionChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n        const val = e.target.value;\r\n        setDescription(val);\r\n    };\r\n\r\n    const handlePrivacyChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const val = e.target.value;\r\n        setPrivacy(val);\r\n    }\r\n\r\n    const onSubmit = () => {\r\n        if (description) {\r\n            const formData = new FormData();\r\n            formData.set('description', description);\r\n            formData.set('privacy', privacy);\r\n\r\n            if (imageFile.length !== 0) {\r\n                imageFile.forEach((image) => {\r\n                    if (image.file) formData.append('photos', image.file);\r\n                });\r\n            }\r\n\r\n            props.dispatchCreatePost(formData);\r\n            toast('Creating post...');\r\n            setDescription('');\r\n            clearFiles();\r\n            props.closeModal();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={props.isOpen}\r\n            onAfterOpen={props.onAfterOpen}\r\n            onRequestClose={props.closeModal}\r\n            contentLabel=\"Create Post\"\r\n            className=\"modal\"\r\n            // shouldCloseOnOverlayClick={!isDeleting}\r\n            overlayClassName=\"modal-overlay\"\r\n        >\r\n            <div className=\"relative\">\r\n                <div\r\n                    className=\"absolute right-2 top-2 p-1 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:hover:bg-indigo-1100\"\r\n                    onClick={props.closeModal}\r\n                >\r\n                    <CloseOutlined className=\"p-2  outline-none text-gray-500 dark:text-white\" />\r\n                </div>\r\n                <div className=\"w-full laptop:w-40rem p-4 laptop:px-8\">\r\n                    <h2 className=\"dark:text-white\">Create Post</h2>\r\n                    <select\r\n                        className=\"!py-1 !text-sm w-32 dark:bg-indigo-1100 dark:text-white dark:border-gray-800\"\r\n                        id=\"privacy\"\r\n                        name=\"privacy\"\r\n                        onChange={handlePrivacyChange}\r\n                        value={privacy}\r\n                    >\r\n                        <option value=\"public\">Public</option>\r\n                        <option value=\"follower\">Follower</option>\r\n                        <option value=\"private\">Only Me</option>\r\n                    </select>\r\n                    <br />\r\n                    <br />\r\n                    <div className=\"flex flex-col\">\r\n                        <textarea\r\n                            className=\"dark:bg-indigo-1100 dark:text-white dark:!border-gray-800\"\r\n                            cols={3}\r\n                            id=\"post\"\r\n                            name=\"post\"\r\n                            onChange={handleDescriptionChange}\r\n                            placeholder=\"What's on your mind?\"\r\n                            rows={3}\r\n                            readOnly={isLoadingCreatePost}\r\n                            value={description}\r\n                        />\r\n                        <div className=\"flex items-center\">\r\n                            {/* --- UPLOAD OPTIONS */}\r\n                            <div className=\"flex items-center flex-grow\">\r\n                                <input\r\n                                    multiple\r\n                                    type=\"file\"\r\n                                    hidden\r\n                                    accept=\"image/*\"\r\n                                    onChange={onFileChange}\r\n                                    readOnly={isLoadingCreatePost}\r\n                                    id=\"photos\"\r\n                                />\r\n                                <label\r\n                                    className=\"inline-flex items-center cursor-pointer justify-start border-gray-200 text-gray-400 py-2 text-xs\"\r\n                                    htmlFor=\"photos\"\r\n                                >\r\n                                    <div\r\n                                        className=\"group flex items-center justify-center w-10 h-10 border-2 border-dashed border-gray-400 hover:border-indigo-700\"\r\n                                        title=\"Upload photo\"\r\n                                    >\r\n                                        <FileImageOutlined className=\"text-xl text-gray-400 hover:text-red-700\" />\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n                            {/* ---- POST BUTTON --- */}\r\n                            <div className=\"flex justify-end\">\r\n                                <button onClick={onSubmit} disabled={isLoadingCreatePost}>Create Post</button>\r\n                            </div>\r\n                        </div>\r\n                        {/*  ---- IMAGES PREVIEWS LIST ----- */}\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            {imageFile && imageFile.map((image) => (\r\n                                <div\r\n                                    className=\"w-14 h-14 !bg-cover !bg-no-repeat relative\"\r\n                                    key={image.id}\r\n                                    style={{\r\n                                        background: `#f7f7f7 url(${image.url})`\r\n                                    }}\r\n                                >\r\n                                    <CloseCircleOutlined\r\n                                        className=\"p-2 absolute top-0 left-0 right-0 bottom-0 margin-auto text-3xl text-white hover:bg-red-600 cursor-pointer outline-none opacity-75 hover:opacity-100\"\r\n                                        onClick={() => removeImage(image.id)}\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default CreatePostModal;\r\n","const createImage = (url: string): Promise<HTMLImageElement> =>\n    new Promise((resolve, reject) => {\n        const image = new Image()\n        image.addEventListener('load', () => resolve(image))\n        image.addEventListener('error', error => reject(error))\n        image.setAttribute('crossOrigin', 'anonymous') // needed to avoid cross-origin issues on CodeSandbox\n        image.src = url\n    })\n\nfunction getRadianAngle(degreeValue: number): number {\n    return (degreeValue * Math.PI) / 180\n}\n\ninterface IPixelCrop {\n    width: number;\n    height: number;\n    x: number;\n    y: number;\n}\n\nexport default async function getCroppedImg(imageSrc: string, pixelCrop: IPixelCrop | null, rotation = 0): Promise<any> {\n    const image: HTMLImageElement = await createImage(imageSrc)\n    const canvas = document.createElement('canvas')\n    const ctx: CanvasRenderingContext2D | null = canvas.getContext('2d')\n\n    const maxSize = Math.max(image.width, image.height)\n    const safeArea = 2 * ((maxSize / 2) * Math.sqrt(2))\n\n    if (!ctx || !pixelCrop) return;\n    // set each dimensions to double largest dimension to allow for a safe area for the\n    // image to rotate in without being clipped by canvas context\n    canvas.width = safeArea\n    canvas.height = safeArea\n\n    // translate canvas context to a central location on image to allow rotating around the center.\n    ctx.translate(safeArea / 2, safeArea / 2)\n    ctx.rotate(getRadianAngle(rotation))\n    ctx.translate(-safeArea / 2, -safeArea / 2)\n\n    // draw rotated image and store data.\n    ctx.drawImage(\n        image,\n        safeArea / 2 - image.width * 0.5,\n        safeArea / 2 - image.height * 0.5\n    )\n    const data = ctx.getImageData(0, 0, safeArea, safeArea)\n\n    // set canvas width to final desired crop size - this will clear existing context\n    canvas.width = pixelCrop.width\n    canvas.height = pixelCrop.height\n\n    // paste generated rotate image with correct offsets for x,y crop values.\n    ctx.putImageData(\n        data,\n        Math.round(0 - safeArea / 2 + image.width * 0.5 - pixelCrop.x),\n        Math.round(0 - safeArea / 2 + image.height * 0.5 - pixelCrop.y)\n    )\n\n    // As Base64 string\n    // return canvas.toDataURL('image/jpeg');\n\n    // As a blob\n    return new Promise(resolve => {\n        canvas.toBlob(file => {\n            resolve({ url: URL.createObjectURL(file), blob: file });\n        }, 'image/jpeg')\n    })\n}\n","import { useCallback, useState } from 'react';\r\nimport Cropper from 'react-easy-crop';\r\nimport Modal from 'react-modal';\r\nimport { Loader } from '~/components/shared';\r\nimport getCroppedImg from '~/helpers/cropImage';\r\nimport { IImage } from '~/types/types';\r\n\r\ninterface IProps {\r\n    isOpen: boolean;\r\n    onAfterOpen?: () => void;\r\n    closeModal: () => void;\r\n    openModal: () => void;\r\n    file: IImage;\r\n    onCropSuccessCallback: (file: File) => void;\r\n}\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst CropProfileModal: React.FC<IProps> = (props) => {\r\n    const [crop, setCrop] = useState({ x: 0, y: 0 });\r\n    const [zoom, setZoom] = useState(1.5);\r\n    const [aspect, setAspect] = useState(1);\r\n    const [croppedAreaPixels, setCroppedAreaPixels] = useState(null);\r\n    const [isCropping, setIsCropping] = useState(false);\r\n\r\n    const getCroppedImage = useCallback(async () => {\r\n        try {\r\n            setIsCropping(true);\r\n            const { url, blob } = await getCroppedImg(props.file.url, croppedAreaPixels);\r\n\r\n            setIsCropping(false);\r\n            const file = new File([blob], props.file.id, { type: 'image/jpeg' });\r\n            props.onCropSuccessCallback(file);\r\n            clearState();\r\n            URL.revokeObjectURL(url);\r\n        } catch (e) {\r\n            console.error('ERROR CROPPING: ', e);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [croppedAreaPixels]);\r\n\r\n    const onCropChange = (crop: { x: number; y: number }) => {\r\n        setCrop(crop)\r\n    }\r\n\r\n    const onCropComplete = (croppedArea: any, croppedAreaPixels: any) => {\r\n        setCroppedAreaPixels(croppedAreaPixels);\r\n    }\r\n\r\n    const onZoomChange = (zoom: number) => {\r\n        setZoom(zoom)\r\n    }\r\n\r\n    const clearState = () => {\r\n        setCroppedAreaPixels(null);\r\n        setZoom(1);\r\n        setAspect(1);\r\n        setCrop({ x: 0, y: 0 });\r\n        props.closeModal();\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Modal\r\n                isOpen={props.isOpen}\r\n                onAfterOpen={props.onAfterOpen}\r\n                onRequestClose={props.closeModal}\r\n                contentLabel=\"Example Modal\"\r\n                className=\"modal\"\r\n                shouldCloseOnOverlayClick={false}\r\n                overlayClassName=\"modal-overlay\"\r\n            >\r\n                <div className=\"w-full laptop:w-30rem rounded-md\">\r\n                    <div className=\"p-4 flex items-start justify-between\">\r\n                        <h2 className=\"text-xl laptop:text-2xl dark:text-white\">Crop Photo</h2>\r\n                        <div className=\"flex items-center\">\r\n                            <button\r\n                                className=\"button--muted !rounded-full  dark:bg-indigo-1100 dark:text-white dark:hover:bg-indigo-1100\"\r\n                                disabled={isCropping}\r\n                                onClick={clearState}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            &nbsp;\r\n                            <button\r\n                                onClick={getCroppedImage}\r\n                                disabled={isCropping}\r\n                            >\r\n                                Save\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"crop-container w-full h-20rem relative\">\r\n                        {isCropping && (\r\n                            <div className=\"w-full h-full bg-black bg-opacity-50 flex flex-col items-center justify-center z-50 absolute\">\r\n                                <h3 className=\"text-white mb-2\">Cropping</h3>\r\n                                <Loader mode=\"light\" />\r\n                            </div>\r\n                        )}\r\n                        <Cropper\r\n                            image={props.file?.url || ''}\r\n                            crop={crop}\r\n                            zoom={zoom}\r\n                            aspect={aspect}\r\n                            cropShape=\"round\"\r\n                            showGrid={false}\r\n                            onCropChange={onCropChange}\r\n                            onCropComplete={onCropComplete}\r\n                            onZoomChange={onZoomChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"controls p-4\">\r\n                        <input\r\n                            className=\"w-full outline-none\"\r\n                            value={zoom}\r\n                            min={1}\r\n                            max={3}\r\n                            step={0.1}\r\n                            readOnly={isCropping}\r\n                            onChange={(e: React.ChangeEvent<HTMLInputElement>) => onZoomChange(Number(e.target.value))}\r\n                            type=\"range\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CropProfileModal;\r\n","import { useEffect, useState } from \"react\";\nimport Lightbox from 'react-image-lightbox';\n\ninterface IProps {\n    images: string[];\n    isOpen: boolean;\n    activeIndex: number;\n    closeLightbox: () => void;\n}\n\nconst ImageLightbox: React.FC<IProps> = (props): React.ReactElement | null => {\n    const { images, isOpen, closeLightbox, activeIndex } = props;\n    const [imgIndex, setImgIndex] = useState(activeIndex);\n\n    useEffect(() => {\n        setImgIndex(activeIndex);\n    }, [activeIndex]);\n\n    const onNext = () => {\n        setImgIndex((imgIndex + 1) % images.length);\n    }\n\n    const onPrev = () => {\n        setImgIndex((imgIndex + images.length - 1) % images.length);\n    }\n\n    return isOpen ? (\n        <div className=\"relative\">\n            <Lightbox\n                mainSrc={images[imgIndex]}\n                nextSrc={images[(imgIndex + 1) % images.length]}\n                prevSrc={images[(imgIndex + images.length - 1) % images.length]}\n                onCloseRequest={closeLightbox}\n                onMovePrevRequest={onPrev}\n                onMoveNextRequest={onNext}\n                enableZoom={false}\n                wrapperClassName=\"lightbox-wrapper\"\n                reactModalStyle={{\n                    content: {\n                        zIndex: 9999,\n                        top: '60px'\n                    }\n                }}\n            />\n        </div>\n    ) : null;\n};\n\nexport default ImageLightbox;\n","import { CloseOutlined } from '@ant-design/icons';\r\nimport Modal from 'react-modal';\r\nimport { IError } from '~/types/types';\r\n\r\ninterface IProps {\r\n    isOpen: boolean;\r\n    onAfterOpen?: () => void;\r\n    closeModal: () => void;\r\n    openModal: () => void;\r\n    dispatchLogout: () => void;\r\n    isLoggingOut: boolean;\r\n    error: IError;\r\n}\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst LogoutModal: React.FC<IProps> = (props) => {\r\n    const onCloseModal = () => {\r\n        if (!props.isLoggingOut) {\r\n            props.closeModal();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={props.isOpen}\r\n            onAfterOpen={props.onAfterOpen}\r\n            onRequestClose={props.closeModal}\r\n            contentLabel=\"Example Modal\"\r\n            className=\"modal\"\r\n            shouldCloseOnOverlayClick={!props.isLoggingOut}\r\n            overlayClassName=\"modal-overlay\"\r\n        >\r\n            <div className=\"relative\">\r\n                <div\r\n                    className=\"absolute right-2 top-2 p-1 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:hover:bg-indigo-1100\"\r\n                    onClick={onCloseModal}\r\n                >\r\n                    <CloseOutlined className=\"p-2  outline-none text-gray-500 dark:text-white\" />\r\n                </div>\r\n                {props.error && (\r\n                    <span className=\"p-4 bg-red-100 text-red-500 block\">\r\n                        {props.error?.error?.message || 'Unable to process your request.'}\r\n                    </span>\r\n                )}\r\n                <div className=\"p-4 laptop:px-8\">\r\n                    <h2 className=\"dark:text-white\">Confirm Logout</h2>\r\n                    <p className=\"text-gray-600 my-4 dark:text-gray-400\">Are you sure you want to logout?</p>\r\n                    <div className=\"flex justify-between\">\r\n                        <button\r\n                            className=\"button--muted !rounded-full dark:bg-indigo-1100 dark:text-white dark:hover:bg-indigo-1100 dark:hover:text-white\"\r\n                            onClick={props.closeModal}\r\n                            disabled={props.isLoggingOut}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            className=\"button--danger\"\r\n                            disabled={props.isLoggingOut}\r\n                            onClick={props.dispatchLogout}\r\n                        >\r\n                            {props.isLoggingOut ? 'Logging Out' : 'Logout'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default LogoutModal;\r\n","import { LoadingOutlined } from \"@ant-design/icons\";\nimport { lazy, Suspense } from \"react\";\nimport { IPost } from \"~/types/types\";\n\nconst EditPostModal = lazy(() => import('./EditPostModal'));\nconst PostLikesModal = lazy(() => import('./PostLikesModal'));\nconst DeletePostModal = lazy(() => import('./DeletePostModal'));\n\ninterface IProps {\n    deleteSuccessCallback: (postID: string) => void;\n    updateSuccessCallback: (post: IPost) => void;\n}\n\nconst PostModals: React.FC<IProps> = (props) => {\n    return (\n        <Suspense fallback={<LoadingOutlined className=\"text-gray-800 dark:text-white\" />}>\n            <DeletePostModal deleteSuccessCallback={props.deleteSuccessCallback} />\n            <EditPostModal updateSuccessCallback={props.updateSuccessCallback} />\n            <PostLikesModal />\n        </Suspense>\n    );\n}\n\nexport default PostModals;\n","import { CommentOutlined, LikeOutlined, UserAddOutlined } from '@ant-design/icons';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport { Avatar } from '~/components/shared';\r\nimport { displayTime } from '~/helpers/utils';\r\nimport { INotification } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    notifications: INotification[],\r\n    toggleNotification: (bool: boolean) => void;\r\n    readNotification: (id: string) => void;\r\n    infiniteScrollRef: React.RefObject<HTMLElement>;\r\n}\r\n\r\nconst NotificationList: React.FC<IProps> = (props) => {\r\n    const { toggleNotification, notifications, readNotification, infiniteScrollRef } = props;\r\n    const history = useHistory();\r\n    const handleNotificationClick = (link: string, id: string) => {\r\n        readNotification(id);\r\n        toggleNotification(false);\r\n        history.push(link);\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            {notifications.length === 0 ? (\r\n                <div className=\"text-center p-4\">\r\n                    <p className=\"text-gray-400 italic\">No new notifications</p>\r\n                </div>\r\n            ) : (\r\n                <div\r\n                    className=\"max-h-80vh laptop:max-h-70vh relative overflow-y-scroll divide-y divide-gray-100 scrollbar\"\r\n                >\r\n                    <TransitionGroup component={null}>\r\n                        <div ref={infiniteScrollRef as React.RefObject<HTMLDivElement>}>\r\n                            {notifications.map((notif) => notif.initiator && (\r\n                                <CSSTransition\r\n                                    timeout={500}\r\n                                    classNames=\"fade\"\r\n                                    key={notif.id}\r\n                                >\r\n                                    <div\r\n                                        className={`border border-transparent dark:hover:border-indigo-700 ${notif.unread ? 'bg-indigo-100 dark:bg-indigo-1100 hover:bg-indigo-200' : 'bg-white dark:bg-indigo-1000 dark:hover:bg-indigo-1100'} p-4 hover:bg-gray-100 dark:hover:bg-indigo-1100 hover:opacity-95 divide-y divide-y-2 divide-gray-100`}\r\n                                        key={notif.id}\r\n                                        onClick={() => handleNotificationClick(notif.link, notif.id)}\r\n                                    >\r\n                                        <div className=\"relative\">\r\n                                            <div className=\"flex items-start\">\r\n                                                <Avatar\r\n                                                    url={notif.initiator.profilePicture?.url}\r\n                                                    size={window.screen.width < 1024 ? 'sm' : 'lg'}\r\n                                                    className=\"mr-2 flex-shrink-0\"\r\n                                                />\r\n                                                <div>\r\n                                                    <span className=\"text-red-700 dark:text-indigo-400 font-medium break-all\">\r\n                                                        {notif.initiator.username}\r\n                                                    </span>\r\n                                                    &nbsp;\r\n                                                    <span className=\"text-gray-600 dark:text-gray-400 break-all\">\r\n                                                        {\r\n                                                            notif.type === 'like' ? 'likes your post.'\r\n                                                                : notif.type === 'comment' ? 'commented on your post.'\r\n                                                                    : notif.type === 'comment-like' ? 'likes your comment.'\r\n                                                                        : notif.type === 'follow' ? 'started following you.'\r\n                                                                            : notif.type === 'reply' ? 'replied to your comment'\r\n                                                                                : ''\r\n                                                        }\r\n                                                    </span>\r\n                                                    <br />\r\n                                                    <span className=\"text-gray-500 text-1xs block\">\r\n                                                        {displayTime(notif.createdAt)}\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n                                            {(notif.type === 'like' || notif.type === 'comment-like') ? (\r\n                                                <LikeOutlined className=\"text-2xl text-red-700 dark:text-indigo-400 absolute right-4 top-0 bottom-0 my-auto\" />\r\n                                            ) : (notif.type === 'comment' || notif.type === 'reply') ? (\r\n                                                <CommentOutlined className=\"text-2xl text-red-700 dark:text-indigo-400 absolute right-4 top-0 bottom-0 my-auto\" />\r\n                                            ) : (\r\n                                                <UserAddOutlined className=\"text-2xl text-red-700 dark:text-indigo-400 absolute right-4 top-0 bottom-0 my-auto\" />\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </CSSTransition>\r\n                            ))}\r\n                        </div>\r\n                    </TransitionGroup>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NotificationList;\r\n","import { BellOutlined } from '@ant-design/icons';\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport useInfiniteScroll from 'react-infinite-scroll-hook';\r\nimport { useSelector } from \"react-redux\";\r\nimport { Badge, Loader } from '~/components/shared';\r\nimport {\r\n    getNotifications,\r\n    getUnreadNotifications,\r\n    markAllAsUnreadNotifications,\r\n    readNotification\r\n} from \"~/services/api\";\r\nimport socket from \"~/socket/socket\";\r\nimport { IError, INotification, IRootReducer } from \"~/types/types\";\r\nimport NotificationList from \"./NotificationList\";\r\n\r\ninterface IProps {\r\n    isAuth: boolean;\r\n}\r\n\r\nconst Notification: React.FC<IProps> = ({ isAuth }) => {\r\n    const id = useSelector((state: IRootReducer) => state.auth.id);\r\n    const [isNotificationOpen, setNotificationOpen] = useState(false);\r\n    const [isLoading, setLoading] = useState(false);\r\n    const [hasReadAll, setHasReadAll] = useState(false);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const [offset, setOffset] = useState(0);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const [notifications, setNotifications] = useState<any>({\r\n        items: [],\r\n        count: 0\r\n    });\r\n    const isNotificationOpenRef = useRef(isNotificationOpen);\r\n\r\n    useEffect(() => {\r\n        isNotificationOpenRef.current = isNotificationOpen;\r\n    }, [isNotificationOpen]);\r\n\r\n    useEffect(() => {\r\n        socket.on('newNotification', ({ notification, count }: { notification: INotification, count: number }) => {\r\n            console.log('STATE: ', notifications);\r\n            setUnreadCount(unreadCount + 1);\r\n            setNotifications((prev: any) => ({ ...prev, items: [notification, ...prev.items] }));\r\n\r\n            console.log(notification);\r\n        });\r\n\r\n        document.addEventListener('click', handleClickOutside);\r\n\r\n        if (isAuth) {\r\n            getUnreadNotifications()\r\n                .then(({ count }) => {\r\n                    setUnreadCount(count);\r\n                });\r\n        }\r\n\r\n        return () => {\r\n            socket.emit('userDisconnect', id);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n\r\n    const handleClickOutside = (e: Event) => {\r\n        const toggle = (e.target as HTMLElement).closest('.notification-toggle');\r\n        const wrapper = (e.target as HTMLElement).closest('.notification-wrapper');\r\n\r\n        if (!toggle && isNotificationOpenRef.current && !wrapper) {\r\n            setNotificationOpen(false);\r\n        }\r\n    }\r\n\r\n    const fetchNotifications = async () => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const notifs = await getNotifications({ offset });\r\n\r\n            setNotifications({\r\n                items: [...notifications.items, ...notifs.notifications],\r\n                count: notifs.count,\r\n                unreadCount: notifs.unreadCount\r\n            });\r\n            setOffset(offset + 1);\r\n            setLoading(false);\r\n        } catch (e) {\r\n            setLoading(false);\r\n            setError(e);\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    const toggleNotification = () => {\r\n        setUnreadCount(0);\r\n        setNotificationOpen(!isNotificationOpen);\r\n\r\n        // Since setting state is asynchronous, we should flip the value of isNotificationOpen\r\n        if (!isNotificationOpen && notifications.items.length === 0) {\r\n            fetchNotifications();\r\n        }\r\n    }\r\n\r\n    const handleReadNotification = async (id: string) => {\r\n        try {\r\n            const { state } = await readNotification(id);\r\n            const updatedNotifs = notifications.items.map((notif: INotification) => {\r\n                if (notif.id === id) {\r\n                    return {\r\n                        ...notif,\r\n                        unread: state\r\n                    }\r\n                }\r\n                return notif;\r\n            });\r\n            setNotifications({ ...notifications, items: updatedNotifs });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    const handleMarkAllUnread = async () => {\r\n        if (notifications.items.length === 0 || hasReadAll) return;\r\n\r\n        try {\r\n            const { state } = await markAllAsUnreadNotifications();\r\n            const updatedNotifs = notifications.items.map((notif: INotification) => {\r\n                return {\r\n                    ...notif,\r\n                    unread: state\r\n                }\r\n            });\r\n            setHasReadAll(true);\r\n            setNotifications({ ...notifications, items: updatedNotifs });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const infiniteRef = useInfiniteScroll({\r\n        loading: isLoading,\r\n        hasNextPage: !error && notifications.items.length >= 10,\r\n        onLoadMore: fetchNotifications,\r\n        scrollContainer: 'parent',\r\n    });\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            <div onClick={toggleNotification}>\r\n                <Badge count={unreadCount}>\r\n                    <BellOutlined className=\"notification-toggle text-xl focus:outline-none dark:text-white\" />\r\n                </Badge>\r\n            </div>\r\n            {isNotificationOpen && (\r\n                <div className=\"notification-wrapper border border-transparent dark:border-gray-800 fixed top-14 pb-14 laptop:pb-0 laptop:top-10 right-0 h-screen laptop:h-auto w-full laptop:w-30rem bg-white dark:bg-indigo-1000 shadow-lg rounded-md laptop:absolute\"\r\n                >\r\n                    {/*  ----- HEADER ----- */}\r\n                    <div className=\"py-2 px-4 border-b-gray-200 flex justify-between items-center bg-indigo-700 laptop:rounded-t-md\">\r\n                        <h6 className=\"text-white\">Notifications</h6>\r\n                        <span\r\n                            className=\"text-sm  p-2 text-white opacity-80 rounded-md hover:bg-indigo-500\"\r\n                            onClick={handleMarkAllUnread}\r\n                        >\r\n                            Mark all as read\r\n                        </span>\r\n                    </div>\r\n                    {/* ---- LOADER --- */}\r\n                    {(isLoading && !error && notifications.items.length === 0) && (\r\n                        <div className=\"flex items-center justify-center py-8\">\r\n                            <Loader />\r\n                        </div>\r\n                    )}\r\n                    {/* --- ERROR MESSAGE --- */}\r\n                    {(notifications.items.length === 0 && error) && (\r\n                        <div className=\"flex justify-center py-6\">\r\n                            <p className=\"text-gray-400 italic\">\r\n                                {error.status_code === 404\r\n                                    ? 'You don\\'t notification.'\r\n                                    : (error?.error?.message || 'Something went wrong :(')\r\n                                }\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                    {/* --- NOTIF LIST ---- */}\r\n                    {(notifications.items.length !== 0) && (\r\n                        <div>\r\n                            <NotificationList\r\n                                notifications={notifications.items}\r\n                                readNotification={handleReadNotification}\r\n                                toggleNotification={setNotificationOpen}\r\n                                infiniteScrollRef={infiniteRef}\r\n                            />\r\n                            {(notifications.items.length !== 0 && !error && isLoading) && (\r\n                                <div className=\"flex justify-center py-2\">\r\n                                    <Loader />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Notification;\r\n","import { CommentOutlined, GlobalOutlined, LoadingOutlined, LockOutlined, UserOutlined } from '@ant-design/icons';\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport { lazy, Suspense, useRef, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport withAuth from '~/components/hoc/withAuth';\r\nimport { LikeButton, PostOptions } from '~/components/main';\r\nimport { Avatar, ImageGrid } from '~/components/shared';\r\nimport { LOGIN } from '~/constants/routes';\r\nimport { useModal } from '~/hooks';\r\nimport { setTargetPost } from '~/redux/action/helperActions';\r\nimport { showModal } from '~/redux/action/modalActions';\r\nimport { EModalType, IPost } from \"~/types/types\";\r\n\r\nconst Comments = lazy(() => import('~/components/main/Comments'));\r\n\r\ndayjs.extend(relativeTime);\r\n\r\ninterface IProps {\r\n    post: IPost,\r\n    likeCallback: (postID: string, state: boolean, newLikeCount: number) => void;\r\n    isAuth: boolean;\r\n}\r\n\r\nconst PostItem: React.FC<IProps> = (props) => {\r\n    const { post, likeCallback, isAuth } = props;\r\n    const [isCommentVisible, setCommentVisible] = useState(false);\r\n    const deleteModal = useModal();\r\n    const updateModal = useModal();\r\n    const commentInputRef = useRef<HTMLInputElement | null>(null);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleToggleComment = () => {\r\n        if (!isAuth) return;\r\n        if (!isCommentVisible) setCommentVisible(true);\r\n        if (commentInputRef.current) commentInputRef.current.focus();\r\n    }\r\n\r\n    const displayLikeMetric = (likesCount: number, isLiked: boolean) => {\r\n        const like = likesCount > 1 ? 'like' : 'likes';\r\n        const likeMinusSelf = (likesCount - 1) > 1 ? 'like' : 'likes';\r\n        const people = likesCount > 1 ? 'people' : 'person';\r\n        const peopleMinusSelf = (likesCount - 1) > 1 ? 'people' : 'person';\r\n\r\n        if (isLiked && likesCount <= 1) {\r\n            return 'You like this.'\r\n        } else if (isLiked && likesCount > 1) {\r\n            return `You and ${likesCount - 1} other ${peopleMinusSelf} ${likeMinusSelf} this.`;\r\n        } else {\r\n            return `${likesCount} ${people} ${like} this.`;\r\n        }\r\n    }\r\n\r\n    const handleClickLikes = () => {\r\n        if (isAuth) {\r\n            dispatch(showModal(EModalType.POST_LIKES));\r\n            dispatch(setTargetPost(props.post));\r\n        }\r\n    }\r\n\r\n    const handleClickPrivacyChange = () => {\r\n        if (post.isOwnPost) {\r\n            dispatch(setTargetPost(post));\r\n            dispatch(showModal(EModalType.EDIT_POST));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col bg-white rounded-lg my-4 p-4 first:mt-0 shadow-lg dark:bg-indigo-1000\">\r\n            {/* --- AVATAR AND OPTIONS */}\r\n            <div className=\"flex justify-between items-center w-full\">\r\n                <div className=\"flex\">\r\n                    <Avatar\r\n                        url={post.author.profilePicture?.url}\r\n                        className=\"mr-3\"\r\n                    />\r\n                    <div className=\"flex flex-col\">\r\n                        <Link className=\"dark:text-indigo-400\" to={`/user/${post.author.username}`}>\r\n                            <h5 className=\"font-bold\">{post.author.username}</h5>\r\n                        </Link>\r\n                        <div className=\"flex items-center space-x-1\">\r\n                            <span className=\"text-sm text-gray-500\">{dayjs(post.createdAt).fromNow()}</span>\r\n                            <div\r\n                                className={`w-4 h-4 rounded-full flex items-center justify-center ${post.isOwnPost && 'cursor-pointer hover:bg-gray-100 dark:hover:bg-indigo-900'}`}\r\n                                onClick={handleClickPrivacyChange}\r\n                                title={post.isOwnPost ? 'Change Privacy' : ''}\r\n                            >\r\n                                {post.privacy === 'private'\r\n                                    ? <LockOutlined className=\"text-xs text-gray-500 dark:text-white\" />\r\n                                    : post.privacy === 'follower'\r\n                                        ? <UserOutlined className=\"text-xs text-gray-500 dark:text-white\" />\r\n                                        : <GlobalOutlined className=\"text-xs text-gray-500 dark:text-white\" />\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {isAuth && (\r\n                    <PostOptions\r\n                        openDeleteModal={deleteModal.openModal}\r\n                        openUpdateModal={updateModal.openModal}\r\n                        post={post}\r\n                    />\r\n                )}\r\n            </div>\r\n            {/* --- DESCRIPTION */}\r\n            <div className=\"mb-3 mt-2\">\r\n                <p className=\"text-gray-700 dark:text-gray-300 break-words\">{post.description}</p>\r\n            </div>\r\n            {/* --- IMAGE GRID ----- */}\r\n            {post.photos.length !== 0 && <ImageGrid images={post.photos.map(img => img.url)} />}\r\n            {/* ---- LIKES/COMMENTS DETAILS ---- */}\r\n            <div className=\"flex justify-between px-2 my-2\">\r\n                <div onClick={handleClickLikes}>\r\n                    {post.likesCount > 0 && (\r\n                        <span className=\"text-gray-500 text-sm cursor-pointer hover:underline hover:text-gray-800 dark:hover:text-white\">\r\n                            {displayLikeMetric(post.likesCount, post.isLiked)}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                {/* --- COMMENTS COUNT ----- */}\r\n                <div>\r\n                    {post.commentsCount > 0 && (\r\n                        <span\r\n                            className=\"text-gray-500 hover:text-gray-800 cursor-pointer text-sm hover:underline dark:text-gray-500 dark:hover:text-white\"\r\n                            onClick={handleToggleComment}\r\n                        >\r\n                            {post.commentsCount} {post.commentsCount === 1 ? 'comment' : 'comments'}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {/* --- LIKE/COMMENT BUTTON */}\r\n            {isAuth ? (\r\n                <div className=\"flex items-center justify-around py-2 border-t border-gray-200 dark:border-gray-800\">\r\n                    <LikeButton postID={post.id} isLiked={post.isLiked} likeCallback={likeCallback} />\r\n                    <span\r\n                        className=\"py-2 rounded-md flex items-center justify-center text-gray-700 hover:text-gray-800 700 dark:text-gray-400 dark:hover:text-white dark:hover:bg-indigo-1100 cursor-pointer hover:bg-gray-100 text-l w-2/4\"\r\n                        onClick={handleToggleComment}\r\n                    >\r\n                        <CommentOutlined />&nbsp;Comment\r\n                    </span>\r\n                </div>\r\n            ) : (\r\n                <div className=\"text-center py-2\">\r\n                    <span className=\"text-gray-400 text-sm\">\r\n                        <Link className=\"font-medium underline dark:text-indigo-400\" to={LOGIN}>Login</Link> to like or comment on post.\r\n                    </span>\r\n                </div>\r\n            )}\r\n            {isAuth && (\r\n                <Suspense fallback={<LoadingOutlined className=\"text-gray-800 dark:text-white\" />}>\r\n                    <Comments\r\n                        postID={post.id}\r\n                        authorID={post.author.id}\r\n                        isCommentVisible={isCommentVisible}\r\n                        commentInputRef={commentInputRef}\r\n                        setInputCommentVisible={setCommentVisible}\r\n                    />\r\n                </Suspense>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default withAuth(PostItem);\r\n","import { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FollowButton } from \"~/components/main\";\r\nimport { Avatar, UserLoader } from \"~/components/shared\";\r\nimport { SUGGESTED_PEOPLE } from \"~/constants/routes\";\r\nimport { getSuggestedPeople } from \"~/services/api\";\r\nimport { IError, IProfile } from \"~/types/types\";\r\n\r\nconst SuggestedPeople: React.FC = () => {\r\n    const [people, setPeople] = useState<IProfile[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<IError | null>(null);\r\n\r\n    useEffect(() => {\r\n        (async function () {\r\n            try {\r\n                setIsLoading(true);\r\n                const users = await getSuggestedPeople({ offset: 0, limit: 6 });\r\n\r\n                setPeople(users);\r\n                setIsLoading(false);\r\n            } catch (e) {\r\n                setIsLoading(false);\r\n                setError(e);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"w-full py-4 bg-white dark:bg-indigo-1000 rounded-md shadow-lg overflow-hidden\">\r\n            <div className=\"px-4 flex justify-between mb-4\">\r\n                <h4 className=\"dark:text-white\">Suggested People</h4>\r\n                <Link to={SUGGESTED_PEOPLE} className=\"text-xs underline dark:text-indigo-500\">See all</Link>\r\n            </div>\r\n            {isLoading && (\r\n                <div className=\"min-h-10rem px-4\">\r\n                    <UserLoader />\r\n                    <UserLoader />\r\n                    <UserLoader />\r\n                    <UserLoader />\r\n                </div>\r\n            )}\r\n            {(!isLoading && error) && (\r\n                <div className=\"flex min-h-10rem items-center justify-center\">\r\n                    <span className=\"text-gray-400 italic\">\r\n                        {(error as IError)?.error?.message || 'Something went wrong :('}\r\n                    </span>\r\n                </div>\r\n            )}\r\n            {!error && people.map((user) => (\r\n                <div className=\"mb-2\" key={user.id || user._id}>\r\n                    <div className=\"relative flex items-center justify-between px-4 py-2\">\r\n                        <Link to={`/user/${user.username}`}>\r\n                            <div className=\"flex items-center\">\r\n                                <Avatar url={user.profilePicture?.url} className=\"mr-2\" />\r\n                                <h6 className=\"mr-10 text-sm overflow-ellipsis overflow-hidden dark:text-white\">{user.username}</h6>\r\n                            </div>\r\n                        </Link>\r\n                        <div className=\"absolute px-4 bg-white dark:bg-indigo-1000 right-0 top-0 bottom-0 my-auto flex items-center\">\r\n                            <FollowButton\r\n                                userID={user.id || user._id}\r\n                                isFollowing={user.isFollowing}\r\n                                size=\"sm\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SuggestedPeople;\r\n","export const LOGIN = '/login';\nexport const REGISTER = '/register';\nexport const HOME = '/';\nexport const POST = '/post/:post_id';\nexport const PROFILE = '/user/:username';\nexport const PROFILE_INFO = '/user/:username/info';\nexport const PROFILE_EDIT_INFO = '/user/:username/edit';\nexport const PROFILE_FOLLOWERS = '/user/:username/followers';\nexport const PROFILE_FOLLOWING = '/user/:username/following';\nexport const PROFILE_BOOKMARKS = '/user/:username/bookmarks';\nexport const SEARCH = '/search';\nexport const CHAT = '/chat/:username';\nexport const SUGGESTED_PEOPLE = '/suggested';\n\nexport const SOCIAL_AUTH_FAILED = '/auth/:provider/failed';","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'react-image-lightbox/style.css';\nimport { Provider } from 'react-redux';\nimport store from '~/redux/store/store';\nimport '~/styles/app.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { io } from \"socket.io-client\";\r\n\r\nconst socket = io(\r\n  process.env.REACT_APP_CINEMAGRAM_URL || \"http://localhost:9000\",\r\n  {\r\n    reconnection: true,\r\n    reconnectionDelay: 1000,\r\n    reconnectionDelayMax: 5000,\r\n    reconnectionAttempts: 50,\r\n  }\r\n);\r\n\r\nexport default socket;\r\n","import { SET_TARGET_COMMENT, SET_TARGET_POST } from \"~/constants/actionType\";\nimport { IComment, IPost } from \"~/types/types\";\n\nexport const setTargetComment = (comment: IComment | null) => (<const>{\n    type: SET_TARGET_COMMENT,\n    payload: comment\n});\n\nexport const setTargetPost = (post: IPost | null) => (<const>{\n    type: SET_TARGET_POST,\n    payload: post\n});\n\nexport type helperActionType =\n    | ReturnType<typeof setTargetComment>\n    | ReturnType<typeof setTargetPost>","import {\n    CLEAR_FEED,\n    CREATE_POST_START,\n    CREATE_POST_SUCCESS,\n    DELETE_FEED_POST,\n    GET_FEED_START,\n    GET_FEED_SUCCESS,\n    HAS_NEW_FEED,\n    UPDATE_FEED_POST,\n    UPDATE_POST_LIKES\n} from \"~/constants/actionType\";\nimport { IFetchParams, IPost } from \"~/types/types\";\n\nexport const getNewsFeedStart = (options?: IFetchParams) => (<const>{\n    type: GET_FEED_START,\n    payload: options\n});\n\nexport const getNewsFeedSuccess = (posts: IPost[]) => (<const>{\n    type: GET_FEED_SUCCESS,\n    payload: posts\n});\n\nexport const createPostStart = (post: FormData) => (<const>{\n    type: CREATE_POST_START,\n    payload: post\n});\n\nexport const createPostSuccess = (post: IPost) => (<const>{\n    type: CREATE_POST_SUCCESS,\n    payload: post\n});\n\nexport const updateFeedPost = (post: IPost) => (<const>{\n    type: UPDATE_FEED_POST,\n    payload: post\n});\n\nexport const updatePostLikes = (postID: string, state: boolean, likesCount: number) => (<const>{\n    type: UPDATE_POST_LIKES,\n    payload: { postID, state, likesCount }\n});\n\nexport const deleteFeedPost = (postID: string) => (<const>{\n    type: DELETE_FEED_POST,\n    payload: postID\n});\n\nexport const clearNewsFeed = () => (<const>{\n    type: CLEAR_FEED\n});\n\nexport const hasNewFeed = (bool = true) => (<const>{\n    type: HAS_NEW_FEED,\n    payload: bool\n});\n\nexport type TNewsFeedActionType =\n    | ReturnType<typeof getNewsFeedStart>\n    | ReturnType<typeof getNewsFeedSuccess>\n    | ReturnType<typeof createPostStart>\n    | ReturnType<typeof createPostSuccess>\n    | ReturnType<typeof updateFeedPost>\n    | ReturnType<typeof deleteFeedPost>\n    | ReturnType<typeof hasNewFeed>\n    | ReturnType<typeof updatePostLikes>\n    | ReturnType<typeof clearNewsFeed>;","import {\n    CHECK_SESSION,\n    LOGIN_START,\n    LOGIN_SUCCESS,\n    LOGOUT_START,\n    LOGOUT_SUCCESS,\n    REGISTER_START,\n    REGISTER_SUCCESS,\n    UPDATE_AUTH_PICTURE\n} from \"~/constants/actionType\";\nimport { IRegister, IUser } from \"~/types/types\";\n\nexport const loginStart = (email: string, password: string) => (<const>{\n    type: LOGIN_START,\n    payload: {\n        email,\n        password\n    }\n});\n\nexport const loginSuccess = (auth: IUser) => (<const>{\n    type: LOGIN_SUCCESS,\n    payload: auth\n});\n\nexport const logoutStart = (callback?: () => void) => (<const>{\n    type: LOGOUT_START,\n    payload: { callback }\n});\n\nexport const logoutSuccess = () => (<const>{\n    type: LOGOUT_SUCCESS\n});\n\nexport const registerStart = ({ email, password, username }: IRegister) => (<const>{\n    type: REGISTER_START,\n    payload: {\n        email,\n        password,\n        username\n    }\n});\n\nexport const registerSuccess = (userAuth: IUser) => (<const>{\n    type: REGISTER_SUCCESS,\n    payload: userAuth\n});\n\n\nexport const checkSession = () => (<const>{\n    type: CHECK_SESSION\n});\n\nexport const updateAuthPicture = (image: Object) => (<const>{\n    type: UPDATE_AUTH_PICTURE,\n    payload: image\n});\n\nexport type TAuthActionType =\n    | ReturnType<typeof updateAuthPicture>\n    | ReturnType<typeof checkSession>\n    | ReturnType<typeof loginStart>\n    | ReturnType<typeof loginSuccess>\n    | ReturnType<typeof logoutStart>\n    | ReturnType<typeof logoutSuccess>\n    | ReturnType<typeof registerStart>\n    | ReturnType<typeof registerSuccess>;","export type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\nexport type PartialBy<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;\n\nexport interface IRootReducer {\n    auth: IUser;\n    error: IError;\n    loading: TLoading;\n    newsFeed: INewsFeed;\n    profile: IProfile;\n    chats: IChatState;\n    modal: IModalState;\n    helper: IHelperState;\n    settings: ISettingsState;\n}\n\nexport interface IErrorState {\n    authError: IError | null;\n    profileError: IError | null;\n    newsFeedError: IError | null;\n}\n\nexport interface TLoading {\n    isLoadingAuth: boolean;\n    isLoadingCreatePost: boolean;\n    isLoadingGetUser: boolean;\n    isLoadingFeed: boolean;\n}\n\nexport interface INewsFeed {\n    items: IPost[];\n    hasNewFeed: boolean;\n    offset: number;\n}\n\n\nexport interface IUser {\n    id: string;\n    username: string;\n    fullname?: string;\n    profilePicture?: Record<string, any>;\n    [prop: string]: any;\n}\n\nexport interface IPost {\n    id: string;\n    privacy: 'public' | 'private' | 'follower';\n    photos: Record<string, any>[];\n    comments: any[];\n    description: string;\n    likes: any[];\n    author: IUser;\n    commentsCount: number;\n    likesCount: number;\n    isBookmarked: boolean;\n    isLiked: boolean;\n    isOwnPost: boolean;\n    createdAt: Date;\n    updatedAt: Date;\n}\n\nexport interface IHelperState {\n    targetComment: IComment | null;\n    targetPost: IPost | null;\n}\n\nexport interface IModalState {\n    isOpenDeleteComment: boolean;\n    isOpenDeletePost: boolean;\n    isOpenEditPost: boolean;\n    isOpenPostLikes: boolean;\n}\n\nexport enum EModalType {\n    DELETE_COMMENT = 'DELETE_COMMENT',\n    DELETE_POST = 'DELETE_POST',\n    EDIT_POST = 'EDIT_POST',\n    POST_LIKES = 'POST_LIKES'\n}\n\nexport interface IComment {\n    id: string;\n    body: string;\n    createdAt: Date;\n    updatedAt: Date;\n    isEdited: boolean;\n    depth: number;\n    replyCount: number;\n    likesCount: number;\n    post_id: string;\n    isOwnComment: boolean;\n    isPostOwner: boolean;\n    isLiked: boolean;\n    author: IUser;\n}\n\nexport interface IChatItemsState {\n    username: string;\n    id: string;\n    offset: number;\n    profilePicture?: Record<string, any>;\n    minimized: boolean;\n    chats: IMessage[]\n}\n\nexport interface IChatState {\n    items: IChatItemsState[],\n    active: string;\n}\n\nexport interface IProfile {\n    _id: string;\n    id: string;\n    username: string;\n    email: string;\n    fullname?: string;\n    firstname: string;\n    lastname: string;\n    info: {\n        bio: string;\n        birthday: string;\n        gender: string;\n    },\n    isEmailValidated: boolean;\n    profilePicture?: Record<string, any>;\n    coverPhoto?: Record<string, any>;\n    dateJoined: Date | string;\n    followingCount: number;\n    followersCount: number;\n    [prop: string]: any;\n}\n\nexport interface INotification {\n    id: string;\n    initiator: IProfile;\n    target: IProfile,\n    createdAt: Date;\n    type: string;\n    unread: boolean;\n    link: string;\n}\n\nexport interface IMessage {\n    id: string;\n    from: IUser;\n    to: IUser;\n    text: string;\n    createdAt: Date;\n    seen: boolean;\n    unseenCount?: number;\n    isOwnMessage?: boolean;\n}\n\nexport interface ISettingsState {\n    theme: 'light' | 'dark';\n}\n\nexport interface IBookmark {\n    id: string;\n    isBookmarked: boolean;\n    post: IPost;\n    createdAt: Date;\n}\n\nexport interface IRegister {\n    email: string;\n    password: string;\n    username: string;\n}\n\nexport interface ICreatePost {\n    description: string;\n    photos?: []\n}\n\nexport interface IFetchParams {\n    offset?: number;\n    limit?: number;\n    skip?: number;\n    q?: string;\n    type?: string;\n    sort?: 'asc' | 'desc';\n}\n\nexport interface IError {\n    status_code: number;\n    data: any;\n    error: {\n        message: string;\n        title: string;\n        type: string;\n    };\n    success: boolean;\n    timestamp: string | Date;\n    [prop: string]: any;\n}\n\nexport interface IImage {\n    id: string;\n    url: string;\n    file: File | null;\n}\n\nexport interface IFileHandler<T> {\n    imageFile: T,\n    setImageFile: React.Dispatch<React.SetStateAction<T>>;\n    isFileLoading: boolean;\n    onFileChange: (event: React.ChangeEvent<HTMLInputElement>, callback?: (file?: IImage) => void) => void;\n    removeImage: (id: string) => void;\n    clearFiles: () => void;\n}","import {\n    CLEAR_CHAT,\n    CLOSE_CHAT,\n    GET_MESSAGES_SUCCESS,\n    INITIATE_CHAT,\n    MINIMIZE_CHAT,\n    NEW_MESSAGE_ARRIVED\n} from \"~/constants/actionType\";\nimport { IMessage, IUser, PartialBy } from \"~/types/types\";\n\nexport const initiateChat = (user: PartialBy<IUser, 'fullname'>) => (<const>{\n    type: INITIATE_CHAT,\n    payload: user\n});\n\nexport const minimizeChat = (target: string) => (<const>{\n    type: MINIMIZE_CHAT,\n    payload: target\n});\n\nexport const closeChat = (target: string) => (<const>{\n    type: CLOSE_CHAT,\n    payload: target\n});\n\nexport const getMessagesSuccess = (target: string, messages: IMessage[]) => (<const>{\n    type: GET_MESSAGES_SUCCESS,\n    payload: {\n        username: target,\n        messages\n    }\n});\n\nexport const newMessageArrived = (target: string, message: IMessage) => (<const>{\n    type: NEW_MESSAGE_ARRIVED,\n    payload: {\n        username: target,\n        message\n    }\n});\n\nexport const clearChat = () => (<const>{\n    type: CLEAR_CHAT\n});\n\nexport type TChatActionType =\n    | ReturnType<typeof minimizeChat>\n    | ReturnType<typeof closeChat>\n    | ReturnType<typeof getMessagesSuccess>\n    | ReturnType<typeof newMessageArrived>\n    | ReturnType<typeof initiateChat>\n    | ReturnType<typeof clearChat>;","import { HIDE_MODAL, SHOW_MODAL } from \"~/constants/actionType\";\nimport { EModalType } from \"~/types/types\";\n\nexport const showModal = (modalType: EModalType) => (<const>{\n    type: SHOW_MODAL,\n    payload: modalType\n});\n\nexport const hideModal = (modalType: EModalType) => (<const>{\n    type: HIDE_MODAL,\n    payload: modalType\n});\n\n\nexport type modalActionType =\n    | ReturnType<typeof showModal>\n    | ReturnType<typeof hideModal>","import {\n\tCLEAR_AUTH_ERR_MSG,\n\tSET_AUTH_ERR_MSG,\n\tSET_NEWSFEED_ERR_MSG,\n\tSET_PROFILE_ERR_MSG\n} from \"~/constants/actionType\";\nimport { IError } from \"~/types/types\";\n\nexport const setAuthErrorMessage = (error: IError | null) => (<const>{\n\ttype: SET_AUTH_ERR_MSG,\n\tpayload: error\n});\n\nexport const setProfileErrorMessage = (error: IError | null) => (<const>{\n\ttype: SET_PROFILE_ERR_MSG,\n\tpayload: error\n});\n\nexport const setNewsFeedErrorMessage = (error: IError | null) => (<const>{\n\ttype: SET_NEWSFEED_ERR_MSG,\n\tpayload: error\n});\n\nexport const clearAuthErrorMessage = () => (<const>{\n\ttype: CLEAR_AUTH_ERR_MSG\n});\n\nexport type ErrorActionType =\n\t| ReturnType<typeof setAuthErrorMessage>\n\t| ReturnType<typeof setProfileErrorMessage>\n\t| ReturnType<typeof setNewsFeedErrorMessage>\n\t| ReturnType<typeof clearAuthErrorMessage>;\n","export default __webpack_public_path__ + \"static/media/logo-cg.04d37454.svg\";","import { GET_USER_START, GET_USER_SUCCESS, UPDATE_COVER_PHOTO, UPDATE_PROFILE_INFO, UPDATE_PROFILE_PICTURE } from \"~/constants/actionType\";\nimport { IProfile } from \"~/types/types\";\n\nexport const getUserStart = (username: string) => (<const>{\n    type: GET_USER_START,\n    payload: username\n});\n\nexport const getUserSuccess = (user: IProfile) => (<const>{\n    type: GET_USER_SUCCESS,\n    payload: user\n});\n\nexport const updateProfileInfo = (user: IProfile) => (<const>{\n    type: UPDATE_PROFILE_INFO,\n    payload: user\n});\n\nexport const updateProfilePicture = (image: Object) => (<const>{\n    type: UPDATE_PROFILE_PICTURE,\n    payload: image\n});\n\nexport const updateCoverPhoto = (image: Object) => (<const>{\n    type: UPDATE_COVER_PHOTO,\n    payload: image\n});\n\nexport type TProfileActionTypes =\n    | ReturnType<typeof updateProfileInfo>\n    | ReturnType<typeof updateCoverPhoto>\n    | ReturnType<typeof updateProfilePicture>\n    | ReturnType<typeof getUserStart>\n    | ReturnType<typeof getUserSuccess>;","import { useSelector } from \"react-redux\"\nimport { IRootReducer } from \"~/types/types\"\n\ninterface IInjectedProps {\n    isAuth: boolean;\n}\n\nconst withAuth = <P extends IInjectedProps>(Component: React.ComponentType<P>) => {\n    return (props: Pick<P, Exclude<keyof P, keyof IInjectedProps>>) => {\n        const isAuth = useSelector((state: IRootReducer) => !!state.auth.id && !!state.auth.username);\n\n        return <Component {...props as P} isAuth={isAuth} />\n    }\n};\n\nexport default withAuth;\n\n","import placeholder from '~/images/avatar_placeholder.png';\n\ninterface IProps {\n    url?: string;\n    size?: string;\n    className?: string;\n}\n\nconst Avatar: React.FC<IProps> = ({ url, size, className }) => {\n    return (\n        <div\n            className={`\n                ${size === 'xs'\n                    ? 'w-5 h-5'\n                    : size === 'sm'\n                        ? 'w-8 h-8'\n                        : size === 'lg'\n                            ? 'w-12 h-12'\n                            : 'w-10 h-10'} !bg-cover !bg-no-repeat border border-gray-100 rounded-full ${className}`}\n            style={{ background: `#f8f8f8 url(${url || placeholder})` }}\n        />\n    )\n};\n\nAvatar.defaultProps = {\n    size: 'md'\n}\n\nexport default Avatar;\n","import { useLayoutEffect } from 'react';\n\nconst useDocumentTitle = (title: string) => {\n\tuseLayoutEffect(() => {\n\t\tif (title) {\n\t\t\tdocument.title = title;\n\t\t} else {\n\t\t\tdocument.title = 'Cinemagram | Community Platform';\n\t\t}\n\t}, [title]);\n};\n\nexport default useDocumentTitle;\n","import { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FollowButton } from '~/components/main';\r\nimport { Avatar } from \"~/components/shared\";\r\nimport { IProfile, IRootReducer, IUser } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    profile: IProfile | IUser;\r\n}\r\n\r\nconst UserCard: React.FC<IProps> = ({ profile }) => {\r\n    const myUsername = useSelector((state: IRootReducer) => state.auth.username);\r\n\r\n    return (\r\n        <div className=\"relative flex items-center justify-between px-4 py-2\">\r\n            <Link to={`/user/${profile.username}`}>\r\n                <div className=\"flex items-center\">\r\n                    <Avatar url={profile.profilePicture?.url} size=\"lg\" className=\"mr-2\" />\r\n                    <h6 className=\"mr-10 max-w-md overflow-ellipsis overflow-hidden dark:text-indigo-400\">@{profile.username}</h6>\r\n                </div>\r\n            </Link>\r\n            <div className=\"absolute px-4 bg-white dark:bg-transparent right-0 top-0 bottom-0 my-auto flex items-center\">\r\n                {profile.username === myUsername ? (\r\n                    <h4 className=\"text-gray-400\">Me</h4>\r\n                ) : (\r\n                    <FollowButton userID={profile.id} isFollowing={profile.isFollowing} />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserCard;\r\n","import { useSelector } from \"react-redux\";\nimport { IRootReducer } from \"~/types/types\";\n\ninterface IInjectedProps {\n    theme: string;\n    [prop: string]: any;\n}\n\nconst withTheme = <P extends IInjectedProps>(Component: React.ComponentType<P>) => {\n    return (props: Pick<P, Exclude<keyof P, keyof IInjectedProps>>) => {\n        const theme = useSelector((state: IRootReducer) => state.settings.theme);\n\n        return <Component {...props as P} theme={theme} />\n    }\n};\n\nexport default withTheme;\n\n","// ---- AUTH CONSTANTS\nexport const LOGIN_START = 'LOGIN_START';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const CHECK_SESSION = 'CHECK_SESSION';\nexport const LOGOUT_START = 'LOGOUT_START';\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nexport const REGISTER_START = 'REGISTER_START';\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\n\n// ---- ERROR CONSTANTS\nexport const SET_AUTH_ERR_MSG = 'SET_AUTH_ERR_MSG';\nexport const CLEAR_AUTH_ERR_MSG = 'CLEAR_AUTH_ERR_MSG';\nexport const SET_PROFILE_ERR_MSG = 'SET_PROFILE_ERR_MSG';\nexport const SET_NEWSFEED_ERR_MSG = 'SET_NEWSFEED_ERR_MSG';\n\n// ---- LOADING CONSTANTS\nexport const SET_AUTH_LOADING = 'SET_AUTH_LOADING';\nexport const SET_CREATE_POST_LOADING = 'SET_CREATE_POST_LOADING';\nexport const SET_GET_USER_LOADING = 'SET_GET_USER_LOADING';\nexport const SET_GET_FEED_LOADING = 'SET_GET_FEED_LOADING';\n\n// ---- FEED CONSTANTS\nexport const GET_FEED_START = 'GET_FEED_START';\nexport const GET_FEED_SUCCESS = 'GET_FEED_SUCCESS';\nexport const CREATE_POST_START = 'CREATE_POST_START';\nexport const CREATE_POST_SUCCESS = 'CREATE_POST_SUCCESS';\nexport const UPDATE_FEED_POST = 'UPDATE_FEED_POST';\nexport const DELETE_FEED_POST = 'DELETE_FEED_POST';\nexport const UPDATE_USER_POST = 'UPDATE_USER_POST';\nexport const CLEAR_FEED = 'CLEAR_FEED';\nexport const HAS_NEW_FEED = 'HAS_NEW_FEED';\nexport const UPDATE_POST_LIKES = 'UPDATE_POST_LIKES';\n\n// ---- PROFILE CONSTANTS\nexport const UPDATE_PROFILE_INFO = 'UPDATE_PROFILE_INFO';\nexport const UPDATE_PROFILE_PICTURE = 'UPDATE_PROFILE_PICTURE';\nexport const UPDATE_COVER_PHOTO = 'UPDATE_COVER_PHOTO';\nexport const UPDATE_AUTH_PICTURE = 'UPDATE_AUTH_PICTURE';\nexport const GET_USER_START = 'GET_USER_START';\nexport const GET_USER_SUCCESS = 'GET_USER_SUCCESS';\n\n// ---- CHAT CONSTANTS\nexport const INITIATE_CHAT = 'INITIATE_CHAT';\nexport const MINIMIZE_CHAT = 'MINIMIZE_CHAT';\nexport const CLOSE_CHAT = 'CLOSE_CHAT';\nexport const CLEAR_CHAT = 'CLEAR_CHAT';\nexport const GET_MESSAGES_SUCCESS = 'GET_MESSAGES_SUCCESS';\nexport const NEW_MESSAGE_ARRIVED = 'NEW_MESSAGE_ARRIVED';\n\n// ---- SETTINGS CONSTANTS\nexport const SET_THEME = 'SET_THEME';\n\n// ---- HELPERS CONSTANTS\nexport const SET_TARGET_COMMENT = 'SET_TARGET_COMMENT_ID';\nexport const SET_TARGET_POST = 'SET_TARGET_POST';\n\n// ---- MODAL CONSTANTS\nexport const SHOW_MODAL = 'SHOW_MODAL';\nexport const HIDE_MODAL = 'HIDE_MODAL';","export { default as withAuth } from './withAuth';\nexport { default as withTheme } from './withTheme';\n","interface IProps {\r\n    children?: React.ReactNode,\r\n    count: number;\r\n}\r\n\r\nconst Badge: React.FC<IProps> = ({ children, count = 0 }) => {\r\n    return (\r\n        <div className=\"relative\">\r\n            {count > 0 && (\r\n                <div className=\"w-5 h-5 flex items-center justify-center rounded-md absolute -right-2 -top-3 bg-red-700 text-1xs text-white border-2 border-white dark:border-indigo-1000\">\r\n                    {count}\r\n                </div>\r\n            )}\r\n            {children && children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Badge;\r\n","import { Component } from 'react';\n\nclass Boundary extends Component {\n    static getDerivedStateFromError(error: any) {\n        return { hasError: true };\n    }\n\n    state = {\n        hasError: false\n    };\n\n\n    componentDidCatch(error: any, errorInfo: any) {\n        console.log(error);\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return (\n                <div className=\"loader\">\n                    <h3>:( Something went wrong.</h3>\n                </div>\n            );\n        }\n\n        return this.props.children;\n    }\n}\n\nexport default Boundary;","import { useState } from \"react\";\nimport { ImageLightbox } from \"~/components/main\";\nimport { useModal } from \"~/hooks\";\n\ninterface IProps {\n    images: string[];\n}\n\nconst ImageGrid: React.FC<IProps> = ({ images }) => {\n    const { isOpen, closeModal, openModal } = useModal();\n    const [activeIndex, setActiveIndex] = useState(0);\n\n    const onClickImage = (e: any) => {\n        if (e.target.dataset) {\n            const idx = e.target.dataset.index;\n\n            setActiveIndex(idx);\n            // setting state is async\n            // so we need to add set timeout so that we give the correct index to lightbox\n            setTimeout(openModal, 100);\n        }\n    }\n\n    const onCloseLightbox = () => {\n        closeModal();\n        setActiveIndex(0);\n    }\n\n    const renderGrid = () => {\n        switch (images.length) {\n            case 1:\n                return `\n                    <div class=\"custom-grid\">\n                        <img src=${images[0]} class=\"grid-img\" data-index=\"0\"/>\n                    </div>\n                `\n            case 2:\n                return `\n                    <div class=\"custom-grid custom-grid-rows-2\">\n                        <img src=${images[0]} class=\"grid-img\" data-index=\"0\"/>\n                        <img src=${images[1]} class=\"grid-img\" data-index=\"1\"/>\n                    </div>\n                `\n            case 3:\n                return `\n                    <div class=\"custom-grid custom-grid-rows-2\">\n                        <div class=\"custom-grid\">\n                            <img src=${images[0]} class=\"grid-img\" data-index=\"0\"/>\n                        </div>\n                        <div class=\"custom-grid custom-grid-cols-2\">\n                            <img src=${images[1]} class=\"grid-img\" data-index=\"1\"/>\n                            <img src=${images[2]} class=\"grid-img\" data-index=\"2\"/>\n                        </div>\n                    </div>\n                `\n            case 4:\n                return `\n                    <div class=\"custom-grid custom-grid-rows-2\">\n                        <div class=\"custom-grid custom-grid-cols-2\">\n                            <img src=${images[0]} class=\"grid-img\" data-index=\"0\"/>\n                            <img src=${images[1]} class=\"grid-img\" data-index=\"1\"/>\n                        </div>\n                        <div class=\"custom-grid custom-grid-cols-2\">\n                            <img src=${images[2]} class=\"grid-img\" data-index=\"2\"/>\n                            <img src=${images[3]} class=\"grid-img\" data-index=\"3\"/>\n                        </div>\n                    </div>\n                `\n            case 5:\n                return `\n                    <div class=\"custom-grid custom-grid-rows-2\">\n                        <div class=\"custom-grid custom-grid-cols-2\">\n                            <img src=${images[0]} class=\"grid-img\" data-index=\"0\" />\n                            <img src=${images[1]} class=\"grid-img\" data-index=\"1\" />\n                        </div>\n                        <div class=\"custom-grid custom-grid-cols-3\">\n                            <img src=${images[2]} class=\"grid-img\" data-index=\"2\" />\n                            <img src=${images[3]} class=\"grid-img\" data-index=\"3\" />\n                            <img src=${images[4]} class=\"grid-img\" data-index=\"4\" />\n                        </div>\n                    </div>\n                `\n            default:\n                return `\n                    <div class=\"custom-grid-items custom-grid-items-2\">\n                        <img src=${images[0]} class=\"grid-img\"/>\n                    </div>\n                `\n        }\n    }\n    return (\n        <>\n            <div\n                className=\"w-full h-25rem overflow-hidden\"\n                dangerouslySetInnerHTML={{ __html: renderGrid() }}\n                onClick={onClickImage}\n            >\n\n            </div>\n            <ImageLightbox\n                activeIndex={activeIndex}\n                isOpen={isOpen}\n                closeLightbox={onCloseLightbox}\n                images={images}\n            />\n        </>\n    )\n};\n\nexport default ImageGrid;\n","import { lazy, Suspense } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, NavLink, useLocation } from \"react-router-dom\";\r\nimport { withAuth, withTheme } from \"~/components/hoc\";\r\nimport { LogoutModal, Messages, Notification } from '~/components/main';\r\nimport { Avatar, SearchInput, ThemeToggler } from \"~/components/shared\";\r\nimport { LOGIN, REGISTER } from '~/constants/routes';\r\nimport { useModal } from \"~/hooks\";\r\nimport logo from '~/images/logo-cg.svg';\r\nimport { logoutStart } from \"~/redux/action/authActions\";\r\nimport { IRootReducer } from \"~/types/types\";\r\n\r\nconst NavBarMobile = lazy(() => import('./NavBarMobile'));\r\n\r\ninterface IProps {\r\n    isAuth: boolean;\r\n    theme: string;\r\n}\r\n\r\nconst NavBar: React.FC<IProps> = ({ isAuth, theme }) => {\r\n    const dispatch = useDispatch();\r\n    const { isLoadingAuth, auth, error } = useSelector((state: IRootReducer) => ({\r\n        isLoadingAuth: state.loading.isLoadingAuth,\r\n        auth: state.auth,\r\n        error: state.error.authError\r\n    }));\r\n    const logoutModal = useModal();\r\n    const { pathname } = useLocation();\r\n    const isLaptop = window.screen.width >= 1024;\r\n\r\n    const onLogout = () => {\r\n        dispatch(logoutStart(logoutModal.closeModal));\r\n    };\r\n\r\n    const hideNavToPaths = [LOGIN, REGISTER];\r\n\r\n    return hideNavToPaths.includes(pathname)\r\n        ? null\r\n        : (\r\n            <>\r\n                {isLaptop ? (\r\n                    <nav className=\"contain flex justify-between items-center z-9999 border-b border-transparent dark:border-gray-900 align-center w-100 bg-white text-gray-700 h-60px py-2 fixed w-full shadow-md laptop:shadow-sm dark:bg-indigo-1000\">\r\n                        <div className=\"flex items-center space-x-8\">\r\n                            {/* ---- LOGO -------- */}\r\n                            <Link\r\n                                to={{\r\n                                    pathname: '/',\r\n                                    state: { from: pathname }\r\n                                }}\r\n                            >\r\n                                <img\r\n                                    src={logo}\r\n                                    alt=\"\"\r\n                                    className=\"w-36\"\r\n                                    style={{ filter: `brightness(${theme === 'dark' ? 3.5 : 1})` }}\r\n                                />\r\n                            </Link>\r\n                            {/* -------- SEARCH BAR ------- */}\r\n                            <SearchInput />\r\n                        </div>\r\n                        <div className=\"hidden laptop:flex laptop:items-center space-x-2\">\r\n                            {isAuth ? (\r\n                                <>\r\n                                    {/* ----- FOLLOW/MESSAGE/NOTIF ICONS ------ */}\r\n                                    <ul className=\"flex items-center space-x-8 mr-8\">\r\n                                        <li className=\"flex items-center justify-center w-10 h-10 cursor-pointer rounded-full hover:bg-gray-200 dark:hover:bg-indigo-1100\">\r\n                                            <Messages isAuth={isAuth} />\r\n                                        </li>\r\n                                        <li className=\"flex items-center justify-center w-10 h-10 cursor-pointer rounded-full hover:bg-gray-200 dark:hover:bg-indigo-1100\">\r\n                                            <Notification isAuth={isAuth} />\r\n                                        </li>\r\n                                    </ul>\r\n                                    <div className=\"flex items-center\">\r\n                                        {/* ---- AVATAR WITH  USERNAME ----------- */}\r\n                                        <Link to={`/user/${auth.username}`} className=\"cursor-pointer\">\r\n                                            <div className=\"flex items-center\">\r\n                                                <Avatar url={auth.profilePicture?.url} className=\"mr-2\" />\r\n                                                <h6 className=\"text-sm mr-10 dark:text-indigo-600\">@{auth.username}</h6>\r\n                                            </div>\r\n                                        </Link>\r\n                                        {/* ----- LOGOUT BUTTON ------ */}\r\n                                        <button\r\n                                            className=\"button--muted !rounded-full dark:bg-indigo-1100 dark:text-white dark:hover:bg-indigo-900 dark:hover:text-white dark:active:bg-indigo-1100\"\r\n                                            onClick={logoutModal.openModal}\r\n                                            disabled={isLoadingAuth}\r\n                                        >\r\n                                            Logout\r\n                                        </button>\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                <ul className=\"flex items-center\">\r\n                                    <li className=\"group inline-block mx-3\">\r\n                                        <NavLink to=\"/login\" className=\"group-hover:text-red-600 text-gray-500 dark:hover:text-white\" activeClassName=\"nav-active\">\r\n                                            Login\r\n                                        </NavLink>\r\n                                    </li>\r\n                                    <li className=\"group inline-block mx-3\">\r\n                                        <NavLink to=\"/register\" className=\"button py-1 group-hover:text-red-600\" activeClassName=\"nav-active\">\r\n                                            Register\r\n                                        </NavLink>\r\n                                    </li>\r\n                                </ul>\r\n                            )\r\n                            }\r\n                            <ThemeToggler />\r\n                        </div>\r\n                    </nav>\r\n                ) : (\r\n                    <Suspense fallback={<nav className=\"bg-white h-60px fixed top-0 left-0 w-full shadow-md\"></nav>}>\r\n                        <NavBarMobile\r\n                            isAuth={isAuth}\r\n                            theme={theme}\r\n                            auth={auth}\r\n                            openModal={logoutModal.openModal}\r\n                        />\r\n                    </Suspense>\r\n                )\r\n                }\r\n                {logoutModal.isOpen && (\r\n                    <LogoutModal\r\n                        isOpen={logoutModal.isOpen}\r\n                        closeModal={logoutModal.closeModal}\r\n                        openModal={logoutModal.openModal}\r\n                        dispatchLogout={onLogout}\r\n                        error={error}\r\n                        isLoggingOut={isLoadingAuth}\r\n                    />\r\n                )}\r\n            </>\r\n        )\r\n};\r\n\r\nexport default withTheme(withAuth(NavBar));\r\n","import { LoadingOutlined } from '@ant-design/icons';\nimport React from 'react';\nimport logo from '~/images/logo-cg.svg';\n\nconst Preloader = () => (\n    <div className=\"w-full h-screen z-9999 flex flex-col justify-center items-center animate-fade\">\n        <img src={logo} alt=\"Cinemagram Logo\" className=\"w-48\" />\n        <p className=\"text-sm mt-4 text-gray-600\">Nothing brings people together like good food.</p>\n        <LoadingOutlined className=\"text-xl mt-4\" />\n    </div>\n);\n\nexport default Preloader;\n","import { SearchOutlined } from '@ant-design/icons';\r\nimport debounce from 'lodash.debounce';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Avatar, Loader } from '~/components/shared';\r\nimport { search } from '~/services/api';\r\nimport { IError, IProfile, IUser } from '~/types/types';\r\n\r\ninterface IProps {\r\n    floatingResult?: boolean;\r\n    clickItemCallback?: (user: IUser) => void;\r\n    showNoResultMessage?: boolean;\r\n    inputClassName?: string;\r\n    preventDefault?: boolean;\r\n}\r\n\r\nconst SearchInput: React.FC<IProps> = (props) => {\r\n    const [searchInput, setSearchInput] = useState('');\r\n    const [isSuggesting, setSuggesting] = useState(false);\r\n    const [suggestions, setSuggestions] = useState<IProfile[]>([]);\r\n    const [isVisibleSuggestion, setVisibleSuggestion] = useState(false);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const history = useHistory();\r\n    const isVisibleSuggestionRef = useRef(isVisibleSuggestion);\r\n\r\n    useEffect(() => {\r\n        isVisibleSuggestionRef.current = isVisibleSuggestion;\r\n    }, [isVisibleSuggestion]);\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('click', handleClickOutside);\r\n\r\n        return () => {\r\n            document.removeEventListener('click', handleClickOutside);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n        const target = (e.target as HTMLDivElement).closest('.input-wrapper');\r\n\r\n        if (!target && isVisibleSuggestionRef.current) {\r\n            setVisibleSuggestion(false);\r\n        }\r\n    }\r\n\r\n    const onSearchInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        e.persist();\r\n        const val = e.target.value;\r\n        setSearchInput(val);\r\n\r\n        (async () => {\r\n            try {\r\n                setSuggesting(true);\r\n                setError(null);\r\n                const users = await search({ q: val, limit: 5 });\r\n\r\n                setSuggestions(users as IProfile[]);\r\n                setSuggesting(false);\r\n            } catch (e) {\r\n                setSuggesting(false);\r\n                setSuggestions([]);\r\n                setError(e);\r\n            }\r\n        })();\r\n    }\r\n\r\n    const onFocusInput = (e: React.FocusEvent<HTMLInputElement>) => {\r\n        setVisibleSuggestion(true);\r\n        e.target.select();\r\n    }\r\n\r\n    const onClickItem = (user: IUser) => {\r\n        if (props.clickItemCallback) {\r\n            props.clickItemCallback(user);\r\n        } else {\r\n            history.push(`/user/${user.username}`);\r\n            setVisibleSuggestion(false);\r\n        }\r\n    }\r\n\r\n    const onSearchSubmit = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        // props.preventDefault to stop dispatching the event when enter key pressed\r\n        if (e.key === 'Enter' && searchInput && !props.preventDefault) {\r\n            history.push({\r\n                pathname: '/search',\r\n                search: `q=${searchInput.trim()}&type=users`\r\n            });\r\n            setVisibleSuggestion(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`input-wrapper relative flex flex-col items-center ${props.inputClassName}`}>\r\n            <SearchOutlined className=\"text-gray-400 absolute left-3 top-3 z-50\" />\r\n            <input\r\n                className=\"!border-gray-100 !pl-10 !py-2 dark:bg-indigo-1000 dark:!border-gray-800 dark:text-white\"\r\n                placeholder=\"Search...\"\r\n                type=\"text\"\r\n                onFocus={onFocusInput}\r\n                onChange={debounce(onSearchInputChange, 200)}\r\n                onKeyDown={onSearchSubmit}\r\n            />\r\n            {(searchInput && isVisibleSuggestion) && (\r\n                <div className={` bg-white dark:bg-indigo-1000 shadow-lg rounded-md w-full flex justify-center flex-col overflow-hidden ${props.floatingResult ? 'absolute top-12' : 'relative top-0'}`}>\r\n                    {(!props.showNoResultMessage && !error) && (\r\n                        <h6 className=\"p-4 text-xs border-b dark:text-white border-gray-100 dark:border-gray-800\">Search Suggestion</h6>\r\n                    )}\r\n                    {(isSuggesting && !error) && (\r\n                        <div className=\"flex items-center justify-center p-4\">\r\n                            <Loader />\r\n                        </div>\r\n                    )}\r\n                    {(!isSuggesting && !error && suggestions.length !== 0) && suggestions.map((user) => (\r\n                        <div\r\n                            className=\"hover:bg-indigo-100 dark:hover:bg-indigo-900 p-2 cursor-pointer\"\r\n                            key={user.id}\r\n                            onClick={() => onClickItem(user)}\r\n                        >\r\n                            <div className=\"flex items-center\">\r\n                                <Avatar url={user.profilePicture?.url} className=\"mr-2\" />\r\n                                <h6 className=\"mr-10 text-sm max-w-md overflow-ellipsis overflow-hidden dark:text-white\">{user.username}</h6>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                    {(error && suggestions.length === 0 && props.showNoResultMessage) && (\r\n                        <div className=\"flex items-center justify-center p-4\">\r\n                            <span className=\"text-gray-400 text-sm italic\">\r\n                                {error?.error?.message || 'Something went wrong :('}\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nSearchInput.defaultProps = {\r\n    floatingResult: true,\r\n    showNoResultMessage: false,\r\n    inputClassName: 'w-20rem',\r\n    preventDefault: false\r\n}\r\n\r\nexport default SearchInput;\r\n","import { FacebookFilled, GithubFilled, GoogleOutlined } from \"@ant-design/icons\";\r\n\r\nconst SocialLogin: React.FC<{ isLoading: boolean; }> = ({ isLoading }) => {\r\n    const onClickSocialLogin = (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\r\n        if (isLoading) e.preventDefault();\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-full flex space-x-2 items-center\">\r\n            <a\r\n                className=\"button w-full bg-blue-500 hover:bg-blue-600\"\r\n                href={`${process.env.REACT_APP_CINEMAGRAM_URL}/api/v1/auth/facebook`}\r\n                onClick={onClickSocialLogin}\r\n            >\r\n                <FacebookFilled className=\"m-0 laptop:mr-4 text-xl laptop:text-sm\" />\r\n                <span className=\"hidden laptop:inline-block\">Facebook</span>\r\n            </a>\r\n            <a\r\n                className=\"button w-full text-gray-800 bg-white hover:bg-gray-200 border border-gray-200\"\r\n                href={`${process.env.REACT_APP_CINEMAGRAM_URL}/api/v1/auth/google`}\r\n                onClick={onClickSocialLogin}\r\n            >\r\n                <GoogleOutlined className=\"m-0 laptop:mr-4 text-xl laptop:text-sm\" />\r\n                <span className=\"hidden laptop:inline-block\">Google</span>\r\n            </a>\r\n            <a\r\n                className=\"button w-full border border-gray-300 bg-gray-700 hover:bg-gray-600\"\r\n                href={`${process.env.REACT_APP_CINEMAGRAM_URL}/api/v1/auth/github`}\r\n                onClick={onClickSocialLogin}\r\n            >\r\n                <GithubFilled className=\"m-0 laptop:mr-4 text-xl laptop:text-sm\" />\r\n                <span className=\"hidden laptop:inline-block\">GitHub</span>\r\n            </a>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default SocialLogin;\r\n","import { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux'\r\nimport { IRootReducer } from '~/types/types';\r\n\r\n// import { useDispatch } from 'react-redux';\r\n// import { setTheme } from '~/redux/action/settingsActions';\r\n\r\nconst ThemeToggler = () => {\r\n    const { theme } = useSelector((state: IRootReducer) => ({ theme: state.settings.theme }));\r\n    // const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        const root = document.documentElement;\r\n        root.classList.add('dark');\r\n        // if (theme === 'dark') {\r\n        //     root.classList.add('dark');\r\n        // } else {\r\n        //     root.classList.remove('dark');\r\n        // }\r\n    }, [theme]);\r\n\r\n    // const onThemeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    //     if (e.target.checked) {\r\n    //         dispatch(setTheme('dark'));\r\n    //     } else {\r\n    //         dispatch(setTheme('light'));\r\n    //     }\r\n    // }\r\n\r\n    return (\r\n        // <label\r\n        //     className=\"w-9 h-9 p-2 flex items-center justify-center rounded-full border border-gray-200 hover:bg-indigo-100 dark:hover:bg-indigo-900 dark:border-gray-800 cursor-pointer\"\r\n        //     title={theme === 'dark' ? 'Toggle Light Theme' : 'Toggle Dark Theme'}\r\n        // >\r\n        //     <input\r\n        //         className=\"hidden\"\r\n        //         checked={theme === 'dark'}\r\n        //         type=\"checkbox\"\r\n        //         id=\"theme\"\r\n        //         // onChange={onThemeChange}\r\n        //         name=\"theme-switch\"\r\n        //         hidden\r\n        //     />\r\n        //     <svg viewBox=\"0 0 512.166 512.166\">\r\n        //         <g>\r\n        //             <g>\r\n        //                 <path d=\"M503.536,289.135c-6.827-5.227-16.384-5.653-23.829-1.408c-2.219,1.259-4.416,2.539-6.699,3.712\r\n\t\t// \tc-50.709,26.624-108.437,31.403-162.517,13.419c-56.469-18.773-102.187-59.755-128.768-115.371\r\n\t\t// \tc-24.128-50.432-29.653-108.245-15.552-162.752c2.176-8.32-0.875-17.109-7.701-22.315c-6.805-5.205-16.085-5.803-23.573-1.536\r\n\t\t// \tC12.186,73.305-34.939,230.937,27.589,361.753c31.659,66.176,86.293,114.987,153.856,137.451\r\n\t\t// \tc25.963,8.619,52.629,12.907,79.168,12.907c40.064,0,79.851-9.749,116.608-29.013c66.027-34.624,114.965-97.259,134.293-171.84\r\n        //     C513.669,302.959,510.341,294.34,503.536,289.135z\"\r\n        //                     style={{ fill: `${theme === 'dark' ? 'cyan' : '#cacaca'}` }}\r\n        //                 />\r\n        //             </g>\r\n        //         </g>\r\n        //     </svg>\r\n        // </label>\r\n        <div></div>\r\n    );\r\n};\r\n\r\nexport default ThemeToggler;","\nconst Loader: React.FC<{ mode?: string; size?: string }> = ({ mode, size }) => {\n    return (\n        <div className=\"flex items-center space-x-2\">\n            <div\n                className={`animate-loader ${mode === 'light' ? 'animate-loader-light' : 'animate-loader-dark'}`}\n                style={{\n                    width: `${size === 'md' ? '20px' : '10px'}`,\n                    height: `${size === 'md' ? '20px' : '10px'}`\n                }}\n            />\n            <div\n                className={`animate-loader ${mode === 'light' ? 'animate-loader-light' : 'animate-loader-dark'}`}\n                style={{\n                    width: `${size === 'md' ? '20px' : '10px'}`,\n                    height: `${size === 'md' ? '20px' : '10px'}`\n                }}\n            />\n            <div\n                className={`animate-loader ${mode === 'light' ? 'animate-loader-light' : 'animate-loader-dark'}`}\n                style={{\n                    width: `${size === 'md' ? '20px' : '10px'}`,\n                    height: `${size === 'md' ? '20px' : '10px'}`\n                }}\n            />\n        </div>\n    );\n};\n\nLoader.defaultProps = {\n    mode: 'dark',\n    size: 'sm'\n}\n\nexport default Loader;\n","import ContentLoader from 'react-content-loader';\r\nimport withTheme from '../hoc/withTheme';\r\n\r\ninterface IUserLoader {\r\n    includeButton?: boolean;\r\n    backgroundColor?: string;\r\n    foregroundColor?: string;\r\n}\r\n\r\nconst loaderBgLight = \"#e2e2e2\";\r\nconst loaderFgLight = \"#ecebeb\";\r\nconst loaderBgDark = \"#181621\";\r\nconst loaderFgDark = \"#25232f\";\r\n\r\nexport const PostLoader: React.FC<any> = withTheme((props) => {\r\n    return (\r\n        <ContentLoader\r\n            speed={2}\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            viewBox=\"0 0 500 400\"\r\n            backgroundColor={props.theme === 'dark' ? loaderBgDark : loaderBgLight}\r\n            foregroundColor={props.theme === 'dark' ? loaderFgDark : loaderFgLight}\r\n            {...props}\r\n        >\r\n            <circle cx=\"20\" cy=\"20\" r=\"20\" />\r\n            <rect x=\"48\" y=\"8\" rx=\"3\" ry=\"3\" width=\"100\" height=\"10\" />\r\n            <rect x=\"48\" y=\"26\" rx=\"3\" ry=\"3\" width=\"52\" height=\"10\" />\r\n            <rect x=\"0\" y=\"60\" rx=\"3\" ry=\"3\" width=\"80%\" height=\"10\" />\r\n            <rect x=\"0\" y=\"78\" rx=\"3\" ry=\"3\" width=\"56%\" height=\"10\" />\r\n            <rect x=\"0\" y=\"98\" rx=\"3\" ry=\"3\" width=\"65%\" height=\"10\" />\r\n            <rect x=\"0\" y=\"132\" rx=\"3\" ry=\"3\" width=\"100%\" height=\"420\" />\r\n        </ContentLoader>\r\n    )\r\n})\r\n\r\nexport const UserLoader: React.FC<IUserLoader> = withTheme((props) => (\r\n    <ContentLoader\r\n        speed={2}\r\n        width=\"100%\"\r\n        height=\"55\"\r\n        // viewBox=\"0 0 400 80\"\r\n        backgroundColor={props.theme === 'dark' ? loaderBgDark : loaderBgLight}\r\n        foregroundColor={props.theme === 'dark' ? loaderFgDark : loaderFgLight}\r\n    >\r\n        <circle cx=\"30\" cy=\"30\" r=\"20\" />\r\n        <rect x=\"60\" y=\"25\" rx=\"5\" ry=\"5\" width=\"30%\" height=\"10\" />\r\n        {props.includeButton && <rect x=\"70%\" y=\"10\" rx=\"20\" ry=\"20\" width=\"100\" height=\"40\" />}\r\n    </ContentLoader>\r\n));\r\n\r\nUserLoader.defaultProps = { includeButton: false };\r\n\r\nexport const ProfileLoader: React.FC = withTheme(({ theme }) => {\r\n    const bg = theme === 'dark' ? loaderBgDark : loaderBgLight;\r\n    const fg = theme === 'dark' ? loaderFgDark : loaderFgLight;\r\n\r\n    return (\r\n        <div>\r\n            {/*  ----- COVER PHOTO ------- */}\r\n            <div className=\"w-full h-60 laptop:mb-0 laptop:h-80 bg-gray-200 dark:bg-indigo-1000 relative overflow-hidden\" />\r\n            <div className=\"contain w-full relative flex transform laptop:-translate-y-28\">\r\n                {/* --- PROFILE PICTURE */}\r\n                <div className=\"absolute left-0 right-0 mx-auto transform -translate-y-32 laptop:transform-none laptop:relative laptop:w-1/3 h-60 mr-2 flex justify-center\">\r\n                    <div className=\"w-40 h-40 laptop:w-60 laptop:h-60 rounded-full border-4 border-white dark:border-indigo-1000 overflow-hidden\">\r\n                        <ContentLoader\r\n                            speed={2}\r\n                            width=\"100%\"\r\n                            height=\"100%\"\r\n                            viewBox=\"0 0 500 500\"\r\n                            backgroundColor={bg}\r\n                            foregroundColor={fg}\r\n                        >\r\n                            <circle cx=\"250\" cy=\"250\" r=\"250\" />\r\n                        </ContentLoader>\r\n                    </div>\r\n                </div>\r\n                {window.screen.width >= 800 && (\r\n                    <div className=\"flex w-full  flex-col self-end transform -translate-y-4 laptop:transform-none\">\r\n                        <div className=\"w-full  flex flex-col laptop:flex-row justify-center laptop:justify-between mr-14 ml-2 mb-2\">\r\n                            {/* ---- NAME AND USERNAME */}\r\n                            <div>\r\n                                <ContentLoader\r\n                                    speed={2}\r\n                                    width=\"100%\"\r\n                                    height=\"100%\"\r\n                                    backgroundColor={bg}\r\n                                    foregroundColor={fg}\r\n                                >\r\n                                    <rect x=\"0\" y=\"70\" rx=\"15\" ry=\"15\" width=\"220\" height=\"25\" />\r\n                                    <rect x=\"0\" y=\"110\" rx=\"5\" ry=\"5\" width=\"100\" height=\"15\" />\r\n                                </ContentLoader>\r\n                            </div>\r\n                            {/* ---- FOLLOW/UNFOLLOW/MESSAGE BUTTON */}\r\n                            <div>\r\n                                <ContentLoader\r\n                                    speed={2}\r\n                                    width=\"100%\"\r\n                                    height=\"100%\"\r\n                                    backgroundColor={bg}\r\n                                    foregroundColor={fg}\r\n                                >\r\n                                    <rect x=\"25\" y=\"70\" rx=\"25\" ry=\"25\" width=\"100\" height=\"50\" />\r\n                                    <rect x=\"140\" y=\"70\" rx=\"25\" ry=\"25\" width=\"100\" height=\"50\" />\r\n                                </ContentLoader>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n});\r\n","import { DeleteOutlined, EditOutlined, EllipsisOutlined } from '@ant-design/icons';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setTargetComment } from '~/redux/action/helperActions';\r\nimport { IComment } from '~/types/types';\r\n\r\ninterface IProps {\r\n    comment: IComment;\r\n    onClickEdit: () => void;\r\n    openDeleteModal: () => void;\r\n}\r\n\r\nconst CommentOptions: React.FC<IProps> = (props) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const isOpenRef = useRef(isOpen);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('click', handleClickOutside);\r\n\r\n        return () => {\r\n            document.removeEventListener('click', handleClickOutside);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        isOpenRef.current = isOpen;\r\n    }, [isOpen]);\r\n\r\n    const handleClickOutside = (e: Event) => {\r\n        const option = (e.target as HTMLDivElement).closest(`#comment_${props.comment.id}`);\r\n\r\n        if (!option && isOpenRef.current) {\r\n            setIsOpen(false);\r\n        }\r\n    }\r\n\r\n    const toggleOpen = () => {\r\n        setIsOpen(!isOpen);\r\n    }\r\n\r\n    const onClickDelete = () => {\r\n        dispatch(setTargetComment(props.comment));\r\n        props.openDeleteModal();\r\n    }\r\n\r\n    const onClickEdit = () => {\r\n        setIsOpen(false);\r\n\r\n        props.onClickEdit();\r\n        dispatch(setTargetComment(props.comment));\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative z-10\" id={`comment_${props.comment.id}`}>\r\n            <div\r\n                className=\"p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:text-white dark:hover:bg-indigo-1100\"\r\n                onClick={toggleOpen}\r\n            >\r\n                <EllipsisOutlined style={{ fontSize: '20px' }} />\r\n            </div>\r\n            {isOpen && (\r\n                <div className=\" w-56 flex flex-col bg-white dark:bg-indigo-1000 rounded-md shadow-lg overflow-hidden absolute top-8 right-3 border border-gray-200 dark:border-gray-800 divide-y divide-gray-100 dark:divide-gray-800\">\r\n                    {props.comment.isOwnComment && (\r\n                        <h4\r\n                            className=\"p-4 flex items-center hover:bg-indigo-700 hover:text-white cursor-pointer dark:text-white\"\r\n                            onClick={onClickEdit}\r\n                        >\r\n                            <EditOutlined className=\"mr-4\" />\r\n                            Edit Comment\r\n                        </h4>\r\n                    )}\r\n                    <h4\r\n                        className=\"p-4 flex items-center hover:bg-indigo-700 hover:text-white cursor-pointer dark:text-white\"\r\n                        onClick={onClickDelete}\r\n                    >\r\n                        <DeleteOutlined className=\"mr-4\" />\r\n                        Delete Comment\r\n                </h4>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CommentOptions;\r\n","import {\r\n    DeleteOutlined,\r\n    EditOutlined,\r\n    EllipsisOutlined,\r\n    LoadingOutlined,\r\n    StarFilled,\r\n    StarOutlined\r\n} from '@ant-design/icons';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { BookmarkButton } from '~/components/main';\r\nimport { setTargetPost } from '~/redux/action/helperActions';\r\nimport { showModal } from '~/redux/action/modalActions';\r\nimport { EModalType, IPost } from '~/types/types';\r\n\r\ninterface IProps {\r\n    openDeleteModal: () => void;\r\n    openUpdateModal: () => void;\r\n    post: IPost;\r\n}\r\n\r\nconst PostOptions: React.FC<IProps> = (props) => {\r\n    const [isOpenOption, setIsOpenOption] = useState(false);\r\n    const isOpenOptionRef = useRef(isOpenOption);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('click', handleClickOutside);\r\n\r\n        return () => {\r\n            document.removeEventListener('click', handleClickOutside);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        isOpenOptionRef.current = isOpenOption;\r\n    }, [isOpenOption]);\r\n\r\n    const handleClickOutside = (e: Event) => {\r\n        const option = (e.target as HTMLDivElement).closest(`#post_${props.post.id}`);\r\n\r\n        if (!option && isOpenOptionRef.current) {\r\n            setIsOpenOption(false);\r\n        }\r\n    }\r\n\r\n    const handleClickDelete = () => {\r\n        dispatch(showModal(EModalType.DELETE_POST));\r\n        dispatch(setTargetPost(props.post));\r\n    }\r\n\r\n    const handleClickEdit = () => {\r\n        dispatch(showModal(EModalType.EDIT_POST));\r\n        dispatch(setTargetPost(props.post));\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative z-10\" id={`post_${props.post.id}`}>\r\n            <div\r\n                className=\"post-option-toggle p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:text-white dark:hover:bg-indigo-1100\"\r\n                onClick={() => setIsOpenOption(!isOpenOption)}\r\n            >\r\n                <EllipsisOutlined style={{ fontSize: '20px' }} />\r\n            </div>\r\n            {isOpenOption && (\r\n                <div className=\"w-60 flex flex-col bg-white dark:bg-indigo-1000 rounded-md shadow-lg overflow-hidden absolute top-8 right-3 border border-gray-200 dark:border-gray-800 divide-y divide-gray-100 dark:divide-gray-800\">\r\n                    {props.post.isOwnPost ? (\r\n                        <>\r\n                            <h4\r\n                                className=\"p-4 flex items-center hover:bg-indigo-700 hover:text-white cursor-pointer dark:text-white\"\r\n                                onClick={handleClickEdit}\r\n                            >\r\n                                <EditOutlined className=\"mr-4\" />\r\n                                Edit Post\r\n                            </h4>\r\n                            <h4\r\n                                className=\"p-4 flex items-center hover:bg-indigo-700 hover:text-white cursor-pointer dark:text-white\"\r\n                                onClick={handleClickDelete}\r\n                            >\r\n                                <DeleteOutlined className=\"mr-4\" />\r\n                                Delete Post\r\n                            </h4>\r\n                        </>\r\n                    ) : (\r\n                        <BookmarkButton postID={props.post.id} initBookmarkState={props.post.isBookmarked}>\r\n                            {({ dispatchBookmark, isBookmarked, isLoading }) => (\r\n                                <h4\r\n                                    className=\"group p-4 flex items-center cursor-pointer dark:text-white hover:bg-indigo-500 hover:text-white\"\r\n                                    onClick={dispatchBookmark}\r\n                                >\r\n                                    {isLoading\r\n                                        ? <LoadingOutlined className=\"text-gray-600 text-2xl p-2 dark:text-white group-hover:text-white\" />\r\n                                        : isBookmarked ? (\r\n                                            <StarFilled className=\"text-red-600 group-hover:text-white text-2xl p-2 flex justify-center items-center rounded-full\" />\r\n                                        ) : (\r\n                                            <StarOutlined className=\"text-red-600 group-hover:text-white text-2xl p-2 flex justify-center items-center rounded-full\" />\r\n                                        )}\r\n                                    <span className={`${isLoading && 'opacity-50'}`}>{isBookmarked ? 'Unbookmark Post' : 'Bookmark Post'} </span>\r\n                                </h4>\r\n                            )}\r\n                        </BookmarkButton>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostOptions;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAFoCAMAAABNO5HnAAAAvVBMVEXh4eGjo6OkpKSpqamrq6vg4ODc3Nzd3d2lpaXf39/T09PU1NTBwcHOzs7ExMS8vLysrKy+vr7R0dHFxcXX19e5ubmzs7O6urrZ2dmnp6fLy8vHx8fY2NjMzMywsLDAwMDa2trV1dWysrLIyMi0tLTCwsLKysrNzc2mpqbJycnQ0NC/v7+tra2qqqrDw8OoqKjGxsa9vb3Pz8+1tbW3t7eurq7e3t62travr6+xsbHS0tK4uLi7u7vW1tbb29sZe/uLAAAG2UlEQVR4XuzcV47dSAyG0Z+KN+ccO+ecHfe/rBl4DMNtd/cNUtXD6DtLIAhCpMiSXwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIhHnfm0cVirHTam884sVu6Q1GvPkf0heq7VE+UF5bt2y97Vat+VlRniev/EVjjp12NlgdEytLWEy5G2hepDYOt7qGob2L23Dd3valPY6dsW+jvaBOKrkm2ldBVrbag+2tYeq1oX6RxYBsF6SY3vA8to8F0roRJaZmFFK2ASWA6CiT6EhuWkoQ9gablZ6l1oW47aWoF8dpvT6FrOunoD5pa7uf6CaslyV6rqD0guzYHLRK/hwJw40Cu4MUdu9Bt8C8yR4Jt+gRbmzEKvUTicFw8kY3NonOg/aJpTTf2AWWBOBTNBkvrmWF+QNDPnZoLUNOeagpKSOVdKhK550BVa5kGLOFfMCxY92ubFuYouNC9CFdyuebKrYrsyL9hcGpgnAxVaXDJPSrGKrGreVFVkU/NmykDJj1sV2Z55s0e74hwtS9k8KvNzxY8ZozvX+L67M4/uVFwT84Kt9CPz6EjFdUqgMyCjCTSHWD4cq7jOzKMzxtGu8ddwxzzaUXHFgXkTxCqwyLyJOON0j9POc/OCpbAj+hU/Zsz9Pbk2T65VbM/mybOKbd882VexjegLPXk0L154uvF/tR5N7RjJB9bvBsLEPJgI5dCcC2P5wL3QlSClJ+bYSSpIqpljh4IkpWNzapzqB3T9vCGBuGUOtWL9hDNPizMYmjND/QIloTkSJvKB4tHRK1iaE0u9hnhgDgxi/QFJZLmLEv0FvbHlbNzTG9ApWa5KHb0J9cByFNT1DhznGOngWO9CvWQ5KdX1AXweWy7Gn/Uh9CLLQdTTCkgPLLODVCshPrSMarHWgUpkGURrl2c83drWbp+0PlRebCsvFW0G+6FtLNzXxlDuXttGrrtlbQPlacvW1ppmCDPOHgJbQ/BwpmyQnh6siHVwcJoqB3iqNx/tHY/N+pPyg7Rz83Xv0n5zuff1ppPKCSS9audf1V6i9QAAAAAAAAAAAAAAAAAAAAAAEMdyAuVeZ9I4H95/uojGgf0QjKOLT/fD88ak0ysrI6SVo9qXRWgrhIsvtaNKqs2hXNlvD0LbSDho71fKWhsxvulf2NYu+jcro42d+e0isMyCxe18R2/D6HQYWY6i4elIryE9brbMgVbzONVP2G3sBeZMsNfYFf5h715302aDIADP2Lw+CIdDQhKcGuIgKKSIk1MSMND7v6zvBvqprdqY3bWfS1itRto/O+52t+KnW+2+OdSYK+5TViS9LxxqyX07p6xUeq7hXl+WPq/AX15QI+9fDryaw5d31EP7HPGqonMb5rmvYwow/upgWTDzKYQ/C2BV3o8oSNTPYVH26FEY7zGDNfnZo0DeOYclwc6jUN4ugBVxZ0HBFp0YJoxaFK41gn7ZGxWYZtDNrSOqEK0dFLscqMbhArXuIioS3UGnHw9U5uEHFCp9quOXUGfrUSFvC11cl0p1nbK+KwHs92yFYyo2DqFEsKdq+wAqhHsqtw+hQHykescY4rnvNOC7g3TPNOEZwt3QiBuINkxpRDqEZFOaMYVgTzTkCWKFGxqyCSHVkqYsIVQQ0ZQogEwJjUkgkvNpjO8g0ZzmzCHRieacIJBLaU7qIE+bBrUhz5YGbSHPmQadIc+EBk0gT48G9SDPPQ06QZ5gQ3M2AQQa0ZwRqtCExz1kClc0ZRVCqFuacguxEhqSQC53pBlHB8HyDY3Y5BDttgnoinRoQgfinZrTuxrxgeodYiiQ+1TOz6HCy4KqLV6gREHVCqjxSsVeociaaq2hyjOVeoYyXarUhTrdZs4VeaQ6j9DIdZsXEhXpU5U+1EqoSALFtlRjC9VGHlXwRlCuTKlAWkK9rEfxehkMCB8o3EMIE1yfovUdrHiKKFb0BEMuPQrVu8CU9xNFOr3DmtcFxVm8wqBsTGHGGUxya4+CeGsHqwZjijEewDAn5Rt9dOdgWzZt6kAqMm/xylpz1EI8i3hF0SxGXQxPvJrTEHXyMuVVTF9QN+WElZuUqKPiyEodC9RV+cbKvJWos0E1TbTe4wB1l89W/GSrWY4G4G4+NUHebhwEkGGYtPgpWskQAkjSXvr8x/xlGz/RKHcr/jOrXYn/1bh0Jh7/mjfpXPALjXC+O/Av7HfzEL+nERbJZME/tpgkRYg/1Mjms48Wf1PrYzbPIIBW8aDY9j/2vsef8vz9R39bDOL/2qlDIwCBGACCOMTLl4klOpP+i4MimFe7DZy7v3rcuaYqej+f3VE1K09+AgAAAAAAAAAAAAAAAAAAAAAAgBf6wsTW1jN3CAAAAABJRU5ErkJggg==\"","import { useSelector } from \"react-redux\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { ChatBox } from \"~/components/main\";\nimport { PageNotFound } from \"~/pages\";\nimport { IRootReducer } from \"~/types/types\";\n\nconst Chat: React.FC<RouteComponentProps<{ username: string }>> = ({ match }) => {\n    const { username } = match.params;\n    const { target, user } = useSelector((state: IRootReducer) => ({\n        target: state.chats.items.find(chat => chat.username === username),\n        user: state.auth\n    }));\n\n    return !target ? <PageNotFound /> : (\n        <div className=\"relative w-full h-screen pt-14\">\n            <ChatBox\n                user={user}\n                target={target}\n            />\n        </div>\n    );\n};\n\nexport default Chat;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useDocumentTitle } from '~/hooks';\n\nconst PageNotFound: React.FC = () => {\n    useDocumentTitle('Page Not Found');\n\n    return (\n        <div className=\"p-4 laptop:p-20 pt-40 h-screen flex items-start laptop:justify-center flex-col\">\n            <h1 className=\"text-xl mb-2 laptop:text-4xl dark:text-white\">Uh oh, you seemed lost.</h1>\n            <p className=\"dark:text-gray-400\">The page you're trying to visit doesn't exist.</p>\n            <br />\n            <Link\n                className=\"button inline-flex\"\n                to={'/'}\n            >\n                Go to News Feed\n            </Link>\n        </div>\n    );\n};\n\nexport default PageNotFound;\n","import { StarOutlined, TeamOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Avatar } from \"~/components/shared\";\r\n\r\ninterface IProps {\r\n    username: string;\r\n    profilePicture?: string;\r\n}\r\n\r\nconst SideMenu: React.FC<IProps> = ({ username, profilePicture }) => {\r\n    return (\r\n        <ul className=\"overflow-hidden\">\r\n            <li className=\"px-4 py-3 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-900\">\r\n                <Link to={`/user/${username}`} className=\"flex items-center text-black\">\r\n                    <Avatar url={profilePicture} className=\"mr-4\" />\r\n                    <h6 className=\"text-sm dark:text-white\">My Profile</h6>\r\n                </Link>\r\n            </li>\r\n            <li className=\"px-4 py-3 cursor-pointer mt-4 hover:bg-indigo-100  dark:hover:bg-indigo-900\">\r\n                <Link to={`/user/${username}/following`} className=\"flex items-center text-black\">\r\n                    <TeamOutlined className=\"text-red-700 dark:text-indigo-400\" style={{ fontSize: '30px', marginRight: '25px' }} />\r\n                    <h6 className=\"text-sm dark:text-white\">Following</h6>\r\n                </Link>\r\n            </li>\r\n            <li className=\"px-4 py-3 cursor-pointer mt-4 hover:bg-indigo-100  dark:hover:bg-indigo-900\">\r\n                <Link to={`/user/${username}/followers`} className=\"flex items-center text-black\">\r\n                    <TeamOutlined className=\"text-red-700 dark:text-indigo-400\" style={{ fontSize: '30px', marginRight: '25px' }} />\r\n                    <h6 className=\"text-sm dark:text-white\">Followers</h6>\r\n                </Link>\r\n            </li>\r\n            <li className=\"px-4 py-3 cursor-pointer mt-4 hover:bg-indigo-100  dark:hover:bg-indigo-900\">\r\n                <Link to={`/user/${username}/bookmarks`} className=\"flex items-center text-black\">\r\n                    <StarOutlined className=\"text-red-700 dark:text-indigo-400\" style={{ fontSize: '30px', marginRight: '25px' }} />\r\n                    <h6 className=\"text-sm dark:text-white\">Bookmarks</h6>\r\n                </Link>\r\n            </li>\r\n        </ul>\r\n    )\r\n};\r\n\r\nexport default SideMenu;\r\n","import { CoffeeOutlined, UndoOutlined } from \"@ant-design/icons\";\r\nimport { useEffect } from \"react\";\r\nimport useInfiniteScroll from 'react-infinite-scroll-hook';\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, RouteComponentProps } from \"react-router-dom\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport { withAuth } from \"~/components/hoc\";\r\nimport { CreatePostModal, PostItem, PostModals, SuggestedPeople } from \"~/components/main\";\r\nimport { Avatar, Loader, PostLoader } from \"~/components/shared\";\r\nimport { SUGGESTED_PEOPLE } from \"~/constants/routes\";\r\nimport { useDocumentTitle, useModal } from \"~/hooks\";\r\nimport { clearNewsFeed, createPostStart, deleteFeedPost, getNewsFeedStart, hasNewFeed, updateFeedPost, updatePostLikes } from \"~/redux/action/feedActions\";\r\nimport socket from \"~/socket/socket\";\r\nimport { IPost, IRootReducer } from \"~/types/types\";\r\nimport SideMenu from \"./SideMenu\";\r\n\r\ninterface ILocation {\r\n    from: string;\r\n}\r\n\r\ninterface IProps extends RouteComponentProps<any, any, ILocation> {\r\n    isAuth: boolean;\r\n}\r\n\r\nconst Home: React.FC<IProps> = (props) => {\r\n    const state = useSelector((state: IRootReducer) => ({\r\n        newsFeed: state.newsFeed,\r\n        auth: state.auth,\r\n        error: state.error.newsFeedError,\r\n        isLoadingFeed: state.loading.isLoadingFeed,\r\n        isLoadingCreatePost: state.loading.isLoadingCreatePost\r\n    }), shallowEqual);\r\n    const dispatch = useDispatch();\r\n    const { isOpen, openModal, closeModal } = useModal();\r\n    const from = props.location.state?.from || null;\r\n\r\n\r\n    useDocumentTitle('Cinemagram | Community Platform');\r\n    useEffect(() => {\r\n        console.log('TRIGGER', from)\r\n        if (state.newsFeed.items.length === 0 || from === '/') {\r\n            dispatch(clearNewsFeed());\r\n            dispatch(getNewsFeedStart({ offset: 0 }));\r\n        }\r\n\r\n        socket.on('newFeed', () => {\r\n            dispatch(hasNewFeed());\r\n        });\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const fetchNewsFeed = () => {\r\n        dispatch(getNewsFeedStart({ offset: state.newsFeed.offset }));\r\n    };\r\n\r\n    const likeCallback = (postID: string, state: boolean, newLikeCount: number) => {\r\n        dispatch(updatePostLikes(postID, state, newLikeCount));\r\n    }\r\n\r\n    const updateSuccessCallback = (post: IPost) => {\r\n        dispatch(updateFeedPost(post));\r\n    }\r\n\r\n    const deleteSuccessCallback = (postID: string) => {\r\n        dispatch(deleteFeedPost(postID));\r\n    }\r\n\r\n    const dispatchCreatePost = (form: FormData) => {\r\n        dispatch(createPostStart(form));\r\n    }\r\n\r\n    const onClickNewFeed = () => {\r\n        dispatch(clearNewsFeed());\r\n        dispatch(getNewsFeedStart({ offset: 0 }));\r\n        dispatch(hasNewFeed(false));\r\n    }\r\n\r\n    const infiniteRef = useInfiniteScroll({\r\n        loading: state.isLoadingFeed,\r\n        hasNextPage: !state.error && state.newsFeed.offset > 0,\r\n        onLoadMore: fetchNewsFeed,\r\n        scrollContainer: 'window',\r\n    });\r\n\r\n    return (\r\n        <div className=\"laptop:px-6% pt-20 flex items-start\">\r\n            {/*  --- SIDE MENU --- */}\r\n            <div className=\"hidden laptop:block laptop:w-1/4 laptop:rounded-md bg-white laptop:sticky laptop:top-20 mr-4 laptop:shadow-lg divide-y-2 dark:bg-indigo-1000\">\r\n                {props.isAuth && (\r\n                    <SideMenu username={state.auth.username} profilePicture={state.auth.profilePicture?.url} />\r\n                )}\r\n            </div>\r\n            <div className=\"w-full laptop:w-2/4 relative\">\r\n                {/* --- CREATE POST INPUT ---- */}\r\n                {props.isAuth && (\r\n                    <div className=\"flex items-center justify-start mb-4 px-4 laptop:px-0\">\r\n                        <Avatar url={state.auth.profilePicture?.url} className=\"mr-2\" />\r\n                        <div className=\"flex-grow\">\r\n                            <input\r\n                                className=\"dark:bg-indigo-1000 dark:!border-gray-800 dark:text-white\"\r\n                                type=\"text\"\r\n                                placeholder=\"Create a post.\"\r\n                                onClick={() => (!state.isLoadingCreatePost && !state.isLoadingFeed) && openModal()}\r\n                                readOnly={state.isLoadingFeed || state.isLoadingCreatePost}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                {/*  --- HAS NEW FEED NOTIF --- */}\r\n                {state.newsFeed.hasNewFeed && (\r\n                    <button\r\n                        className=\"sticky mt-2 top-16 left-0 right-0 mx-auto z-20 flex items-center\"\r\n                        onClick={onClickNewFeed}\r\n                    >\r\n                        <UndoOutlined className=\"flex items-center justify-center text-xl mr-4\" />\r\n                        New Feed Available\r\n                    </button>\r\n                )}\r\n                {/* --- CREATE POST MODAL ----- */}\r\n                {(props.isAuth && isOpen) && (\r\n                    <CreatePostModal\r\n                        isOpen={isOpen}\r\n                        openModal={openModal}\r\n                        closeModal={closeModal}\r\n                        dispatchCreatePost={dispatchCreatePost}\r\n                    />\r\n                )}\r\n                {(state.error && state.newsFeed.items.length === 0 && !state.isLoadingCreatePost) && (\r\n                    <div className=\"flex flex-col w-full min-h-24rem px-8 items-center justify-center text-center\">\r\n                        {state.error.status_code === 404 ? (\r\n                            <>\r\n                                <CoffeeOutlined className=\"text-8xl text-gray-300 mb-4 dark:text-gray-800\" />\r\n                                <h5 className=\"text-gray-500\">News feed is empty</h5>\r\n                                <p className=\"text-gray-400\">Start following people or create your first post.</p>\r\n                                <br />\r\n                                <Link className=\"underline dark:text-indigo-400\" to={SUGGESTED_PEOPLE}>\r\n                                    See Suggested People\r\n                                </Link>\r\n                            </>\r\n                        ) : (\r\n                            <h5 className=\"text-gray-500 italic\">\r\n                                {state.error?.error?.message || 'Something went wrong :('}\r\n                            </h5>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                {/* ---- LOADING INDICATOR ----- */}\r\n                {(state.isLoadingFeed && state.newsFeed.items.length === 0) && (\r\n                    <div className=\"mt-4 px-2 overflow-hidden space-y-6 pb-10\">\r\n                        <PostLoader />\r\n                        <PostLoader />\r\n                    </div>\r\n                )}\r\n                {state.isLoadingCreatePost && (\r\n                    <div className=\"mt-4 px-2 overflow-hidden pb-10\">\r\n                        <PostLoader />\r\n                    </div>\r\n                )}\r\n                {(!props.isAuth && !state.isLoadingFeed) && (\r\n                    <div className=\"px-4 laptop:px-0 py-4 mb-4\">\r\n                        <h2 className=\"dark:text-white\">Public posts that might <br />interest you.</h2>\r\n                    </div>\r\n                )}\r\n                {/* ---- NEWS FEED ---- */}\r\n                {(state.newsFeed.items.length !== 0) && (\r\n                    <div className=\"mb-8\">\r\n                        <TransitionGroup component={null}>\r\n                            <div ref={infiniteRef as React.RefObject<HTMLDivElement>}>\r\n                                {state.newsFeed.items.map((post: IPost) => post.author && ( // avoid render posts with null author\r\n                                    <CSSTransition\r\n                                        timeout={500}\r\n                                        classNames=\"fade\"\r\n                                        key={post.id}\r\n                                    >\r\n                                        <PostItem\r\n                                            key={post.id}\r\n                                            post={post}\r\n                                            likeCallback={likeCallback}\r\n                                        />\r\n                                    </CSSTransition>\r\n                                ))}\r\n                            </div>\r\n                        </TransitionGroup>\r\n                        {state.isLoadingFeed && (\r\n                            <div className=\"flex justify-center py-6\">\r\n                                <Loader />\r\n                            </div>\r\n                        )}\r\n                        {state.error && (\r\n                            <div className=\"flex justify-center py-6\">\r\n                                <p className=\"text-gray-400 italic\">\r\n                                    {state.error.error?.message || 'Something went wrong.'}\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n            {/* --- SUGGESTED PEOPLE --- */}\r\n            <div className=\"hidden laptop:block laptop:w-1/4 laptop:sticky laptop:top-20 ml-4\">\r\n                {props.isAuth && (\r\n                    <SuggestedPeople />\r\n                )}\r\n            </div>\r\n            {/*  --- ALL POST MODALS (DELETE COMMENT NOT INCLUDED) --- */}\r\n            <PostModals\r\n                deleteSuccessCallback={deleteSuccessCallback}\r\n                updateSuccessCallback={updateSuccessCallback}\r\n            />\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default withAuth(Home);\r\n","export default __webpack_public_path__ + \"static/media/friends_meal.d706cb83.jpg\";","export default __webpack_public_path__ + \"static/media/logo-white.65ef8154.svg\";","import { EyeInvisibleOutlined, EyeOutlined, LockFilled } from '@ant-design/icons';\r\nimport React, { FormEvent, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { SocialLogin } from '~/components/shared';\r\nimport { REGISTER } from '~/constants/routes';\r\nimport { useDocumentTitle } from '~/hooks';\r\nimport bg from '~/images/friends_meal.jpg';\r\nimport logo from '~/images/logo-white.svg';\r\nimport logo_dark from '~/images/logo-cg.svg';\r\nimport { loginStart } from '~/redux/action/authActions';\r\nimport { setAuthErrorMessage } from '~/redux/action/errorActions';\r\nimport { IRootReducer } from '~/types/types';\r\n\r\nconst Login: React.FC = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [isPasswordVisible, setPasswordVisible] = useState(false);\r\n    const dispatch = useDispatch();\r\n\r\n    useDocumentTitle('Login to Cinemagram');\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(setAuthErrorMessage(null));\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const { error, isLoading } = useSelector((state: IRootReducer) => ({\r\n        error: state.error.authError,\r\n        isLoading: state.loading.isLoadingAuth\r\n    }));\r\n\r\n    const onUsernameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const val = e.target.value.trim();\r\n\r\n        setUsername(val);\r\n    };\r\n\r\n    const onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const val = e.target.value;\r\n\r\n        setPassword(val);\r\n    };\r\n\r\n    const onSubmit = async (e: FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (username && password) {\r\n            dispatch(loginStart(username, password));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-white\">\r\n            <div\r\n                className=\"relative laptop:w-7/12 h-screen laptop:p-8 hidden laptop:justify-start laptop:items-end laptop:!bg-cover laptop:!bg-no-repeat laptop:!bg-center laptop:flex\"\r\n                style={{\r\n                    background: `#f7f7f7 url(${bg})`\r\n                }}\r\n            >\r\n                {/* --- LOGO --- */}\r\n                <Link className=\"absolute left-8 top-8\" to=\"/\">\r\n                    <img src={logo} alt=\"Cinemagram Logo\" className=\"w-24\" />\r\n                </Link>\r\n                {/* -- INFO --- */}\r\n                <h3 className=\"animate-fade text-white w-9/12 mb-14\">\r\n                    Looking for a new idea for your next menu? You're in the right place.\r\n                </h3>\r\n                {/* --- CREDITS LINK --- */}\r\n                <a\r\n                    className=\"animate-fade absolute bottom-8 left-8 text-1xs text-white underline\"\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                    href=\"https://infinityrimapts.com/5-reasons-host-dinner-party/friends-enjoying-a-meal/\"\r\n                >\r\n                    Photo: Credits to the photo owner\r\n                </a>\r\n            </div>\r\n            <div className=\"animate-fade laptop:w-5/12 w-full flex items-center flex-col justify-center pt-8 laptop:pt-0 relative\">\r\n                <Link to=\"/\">\r\n                    <img\r\n                        src={logo_dark}\r\n                        alt=\"Cinemagram Logo\"\r\n                        className=\"w-24 relative mx-auto laptop:hidden\"\r\n                    />\r\n                </Link>\r\n                {error && (\r\n                    <div className=\"py-2 w-full text-center bg-red-100 border-red-300 absolute top-0 left-0\">\r\n                        <p className=\"text-red-500\">{error?.error?.message || 'Something went wrong :('}</p>\r\n                    </div>\r\n                )}\r\n                <div className=\"w-full laptop:px-14 px-8 text-center laptop:text-left\">\r\n                    <div>\r\n                        <h2 className=\"mt-6 text-xl laptop:text-2xl font-extrabold text-gray-900\">\r\n                            Login to Cinemagram\r\n                        </h2>\r\n                    </div>\r\n                    <form className=\"mt-8 space-y-6\" onSubmit={onSubmit}>\r\n                        <div className=\"rounded-md shadow-sm -space-y-px\">\r\n                            <div className=\"mb-2\">\r\n                                <label htmlFor=\"username\" className=\"sr-only\">Username</label>\r\n                                <input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    type=\"text\"\r\n                                    autoComplete=\"username\"\r\n                                    value={username}\r\n                                    required\r\n                                    maxLength={30}\r\n                                    className={`text-center ${error ? 'input--error' : ''} laptop:text-left`}\r\n                                    placeholder=\"Username\"\r\n                                    readOnly={isLoading}\r\n                                    onChange={onUsernameChange}\r\n                                />\r\n                            </div>\r\n                            <div className=\"relative\">\r\n                                <label htmlFor=\"password\" className=\"sr-only\">Password</label>\r\n                                <input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    type={isPasswordVisible ? 'text' : 'password'}\r\n                                    autoComplete=\"current-password\"\r\n                                    required\r\n                                    className={`text-center !pr-12 ${error ? 'input--error' : ''} laptop:text-left`}\r\n                                    placeholder=\"Password\"\r\n                                    minLength={8}\r\n                                    maxLength={100}\r\n                                    onChange={onPasswordChange}\r\n                                    readOnly={isLoading}\r\n                                    value={password}\r\n                                />\r\n                                <div className=\"absolute right-0 top-0 bottom-0 my-auto flex items-center justify-center w-12 h-12 hover:bg-gray-200 cursor-pointer rounded-tr-full rounded-br-full z-10\">\r\n                                    {isPasswordVisible ? (\r\n                                        <EyeInvisibleOutlined\r\n                                            className=\"h-full w-full outline-none text-gray-500\"\r\n                                            onClick={() => setPasswordVisible(false)}\r\n                                        />\r\n                                    ) : (\r\n                                        <EyeOutlined\r\n                                            className=\"h-full w-full outline-none\"\r\n                                            onClick={() => setPasswordVisible(true)}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <Link className=\"font-medium text-sm text-gray-400 inline-block laptop:block my-4  laptop:mb-0 hover:text-red-500 underline laptop:w-2/4 laptop:pl-4\" to=\"/forgot-password\">\r\n                            Forgot your password?\r\n                        </Link>\r\n                        <button type=\"submit\" className=\"button--stretch\" disabled={isLoading}>\r\n                            <LockFilled className=\"absolute left-8 top-0 bottom-0 my-auto\" />\r\n                            {isLoading ? 'Logging In...' : 'Login'}\r\n                        </button>\r\n                        {/* -- TOO HARD TO REPLICATE PSEUDO IN TAILWIND :() */}\r\n                        <i className=\"social-login-divider\">OR</i>\r\n                        <div className=\"flex justify-between space-x-2\">\r\n                            <SocialLogin isLoading={isLoading} />\r\n                        </div>\r\n                    </form>\r\n                    <div className=\"text-center mt-8\">\r\n                        <Link\r\n                            className=\"underline font-medium\"\r\n                            onClick={(e) => isLoading && e.preventDefault()}\r\n                            to={REGISTER}\r\n                        >\r\n                            I dont have an account\r\n                        </Link>\r\n                    </div>\r\n                    {/* --- COPYRIGHT -- */}\r\n                    <span className=\"text-gray-400 text-xs mx-auto text-center block mt-4\">\r\n                        &copy;Copyright {new Date().getFullYear()} Cinemagram\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","import { useEffect, useState } from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { PostItem, PostModals } from '~/components/main';\nimport { Loader } from '~/components/shared';\nimport { useDocumentTitle } from '~/hooks';\nimport { PageNotFound } from '~/pages';\nimport { getSinglePost } from '~/services/api';\nimport { IError, IPost } from '~/types/types';\n\nconst Post: React.FC<RouteComponentProps<{ post_id: string; }>> = ({ history, match }) => {\n    const [post, setPost] = useState<IPost | null>(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<IError | null>(null);\n    const { post_id } = match.params;\n\n    useDocumentTitle(`${post?.description} - Cinemagram` || 'View Post');\n    useEffect(() => {\n        fetchPost();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const likeCallback = (postID: string, state: boolean, newLikesCount: number) => {\n        setPost({\n            ...post,\n            isLiked: state,\n            likesCount: newLikesCount\n        } as IPost);\n    }\n\n    const updateSuccessCallback = (updatedPost: IPost) => {\n        setPost({ ...post, ...updatedPost });\n    }\n\n    const deleteSuccessCallback = () => {\n        history.push('/');\n    }\n\n    const fetchPost = async () => {\n        try {\n            setIsLoading(true);\n\n            const fetchedPost = await getSinglePost(post_id);\n            console.log(fetchedPost);\n            setIsLoading(false);\n            setPost(fetchedPost);\n        } catch (e) {\n            console.log(e);\n            setIsLoading(false);\n            setError(e);\n        }\n    };\n\n    return (\n        <>\n            {(isLoading && !error) && (\n                <div className=\"flex min-h-screen items-center justify-center\">\n                    <Loader />\n                </div>\n            )}\n            {(!isLoading && !error && post) && (\n                <div className=\"pt-20 w-full px-4 laptop:w-2/4 m-auto\">\n                    <PostItem post={post} likeCallback={likeCallback} />\n                </div>\n            )}\n            {(!isLoading && error) && (\n                <>\n                    {error.status_code === 404 ? (\n                        <PageNotFound />\n                    ) : (\n                        <div className=\"flex items-center justify-center min-h-screen\">\n                            <h4 className=\"text-xl italic dark:text-white\">\n                                {error?.error?.message || 'Something went wrong :('}\n                            </h4>\n                        </div>\n                    )}\n                </>\n            )}\n            {/*  ----- ALL PSOST MODALS ----- */}\n            <PostModals\n                deleteSuccessCallback={deleteSuccessCallback}\n                updateSuccessCallback={updateSuccessCallback}\n            />\n        </>\n    )\n};\n\nexport default Post;\n","import { CameraOutlined, CloseOutlined } from \"@ant-design/icons\";\r\nimport Loader from \"~/components/shared/Loader\";\r\nimport { IFileHandler, IImage } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    coverPhotoOverlayRef: React.RefObject<HTMLDivElement>;\r\n    coverPhoto: IFileHandler<IImage>;\r\n    isUploadingCoverPhoto: boolean;\r\n    isOwnProfile: boolean;\r\n    handleSaveCoverPhoto: () => void;\r\n}\r\n\r\nconst CoverPhotoOverlay: React.FC<IProps> = (props) => {\r\n    return (\r\n        <div\r\n            className={`w-full h-full laptop:bg-black laptop:bg-opacity-50 absolute flex items-center justify-center laptop:invisible transition-all ${props.coverPhoto.imageFile.file ? 'z-10' : 'z-0'}`}\r\n            ref={props.coverPhotoOverlayRef}\r\n        >\r\n            <input\r\n                type=\"file\"\r\n                hidden\r\n                accept=\"image/*\"\r\n                onChange={props.coverPhoto.onFileChange}\r\n                readOnly={props.isUploadingCoverPhoto}\r\n                id=\"cover\"\r\n            />\r\n            {props.isOwnProfile && (\r\n                <>\r\n                    {props.isUploadingCoverPhoto ? <Loader mode=\"light\" /> : (\r\n                        <>\r\n                            {props.coverPhoto.imageFile.file ? (\r\n                                <div className=\"flex\">\r\n                                    <button className=\"button--danger !rounded-full\" onClick={props.coverPhoto.clearFiles}>\r\n                                        <CloseOutlined className=\"text-xl text-white\" />\r\n                                    </button>\r\n                                            &nbsp;\r\n                                    <label\r\n                                        className=\"button--muted !rounded-full cursor-pointer\"\r\n                                        htmlFor=\"cover\"\r\n                                    >\r\n                                        Change\r\n                                            </label>\r\n                                            &nbsp;\r\n                                    <button onClick={props.handleSaveCoverPhoto}>Save</button>\r\n                                </div>\r\n                            ) : (\r\n                                <label\r\n                                    className=\"p-3 laptop:p-4 bg-indigo-700 absolute right-4 top-4  laptop:relative text-white font-medium rounded-full cursor-pointer hover:bg-indigo-800\"\r\n                                    htmlFor=\"cover\"\r\n                                >\r\n                                    {window.screen.width > 800 ? 'Change Cover Photo' : (\r\n                                        <CameraOutlined className=\"text-xl text-white\" />\r\n                                    )}\r\n                                </label>\r\n\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CoverPhotoOverlay;\r\n","import { FormOutlined, InfoCircleOutlined, StarOutlined, TeamOutlined, UserAddOutlined } from \"@ant-design/icons\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\ninterface IProps {\r\n    followersCount: number;\r\n    followingCount: number;\r\n    username: string;\r\n    isOwnProfile: boolean;\r\n}\r\n\r\nconst linkStyleName = `\r\n    text-sm laptop:text-lg font-medium text-gray-500 hover:bg-gray-200 \r\n    hover:text-gray-800 rounded-t-md cursor-pointer px-2 laptop:px-4 py-2\r\n    border-b-4 border-transparent hover:border-indigo-400 dark:hover:bg-indigo-1000 \r\n    flex justify-center items-center space-x-2 dark:hover:text-white\r\n`;\r\n\r\nconst Tabs: React.FC<IProps> = ({ username, isOwnProfile, followersCount, followingCount }) => {\r\n    const { pathname } = useLocation();\r\n    const [activeNav, setActiveNav] = useState('');\r\n\r\n    useEffect(() => {\r\n        const splitPath = pathname.split('/');\r\n        const currentNav = splitPath[splitPath.length - 1];\r\n\r\n        setActiveNav(currentNav);\r\n    }, [pathname]);\r\n\r\n    return (\r\n        <ul className=\"flex items-center justify-between tablet:justify-evenly flex-wrap laptop:justify-start space-x-1 laptop:space-x-4 px-4 bg-indigo-100 dark:bg-indigo-1000 laptop:dark:bg-transparent laptop:bg-transparent laptop:p-0\">\r\n            <li>\r\n                <Link\r\n                    to={`/user/${username}/`}\r\n                    className={`${linkStyleName} ${(activeNav === username || activeNav === '') && 'border-indigo-700 dark:border-indigo-400  border-b-4 text-gray-800 dark:text-white '}`}\r\n                >\r\n                    <span className=\"hidden laptop:inline-block\">Posts</span>\r\n                    <FormOutlined className=\"laptop:hidden text-2xl\" />\r\n                </Link>\r\n            </li>\r\n            <li>\r\n                <Link\r\n                    to={`/user/${username}/info`}\r\n                    className={`${linkStyleName} ${activeNav === 'info' && 'border-indigo-700 dark:border-indigo-400  border-b-4'}`}\r\n                >\r\n                    <span className=\"hidden laptop:inline-block\">Info</span>\r\n                    <InfoCircleOutlined className=\"laptop:hidden text-2xl\" />\r\n                </Link>\r\n            </li>\r\n            <li>\r\n                <Link\r\n                    to={`/user/${username}/followers`}\r\n                    className={`${linkStyleName} ${activeNav === 'followers' && 'border-indigo-700 dark:border-indigo-400 border-b-4'}`}\r\n                >\r\n                    <span className=\"laptop:text-lg text-red-700 dark:text-indigo-400\">{followersCount}</span>\r\n                    <span className=\"hidden laptop:inline-block\">{followersCount > 1 ? 'Followers' : 'Follower'}</span>\r\n                    <TeamOutlined className=\"laptop:hidden text-2xl\" />\r\n                </Link>\r\n            </li>\r\n            <li>\r\n                <Link\r\n                    to={`/user/${username}/following`}\r\n                    className={`${linkStyleName} ${activeNav === 'following' && 'border-indigo-700 dark:border-indigo-400 border-b-4'}`}\r\n                >\r\n                    <span className=\"laptop:text-lg text-red-700 dark:text-indigo-400\">{followingCount}</span>\r\n                    <span className=\"hidden laptop:inline-block\">Following</span>\r\n                    <UserAddOutlined className=\"laptop:hidden text-2xl\" />\r\n                </Link>\r\n            </li>\r\n            {isOwnProfile && (\r\n                <li>\r\n                    <Link\r\n                        to={`/user/${username}/bookmarks`}\r\n                        className={`${linkStyleName} ${activeNav === 'bookmarks' && 'border-indigo-700 dark:border-indigo-400 border-b-4'}`}\r\n                    >\r\n                        <span className=\"hidden laptop:inline-block\">Bookmarks</span>\r\n                        <StarOutlined className=\"laptop:hidden text-2xl\" />\r\n                    </Link>\r\n                </li>\r\n            )}\r\n        </ul>\r\n    );\r\n};\r\n\r\nexport default Tabs;\r\n","import { CameraOutlined, EditOutlined, MessageOutlined } from '@ant-design/icons';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { CropProfileModal, FollowButton } from '~/components/main';\r\nimport { Loader } from '~/components/shared';\r\nimport { useFileHandler, useModal } from '~/hooks';\r\nimport avatar_placeholder from '~/images/avatar_placeholder.png';\r\nimport { updateAuthPicture } from '~/redux/action/authActions';\r\nimport { initiateChat } from '~/redux/action/chatActions';\r\nimport { updateCoverPhoto, updateProfilePicture } from '~/redux/action/profileActions';\r\nimport { uploadPhoto } from '~/services/api';\r\nimport { IImage, IProfile, IUser } from \"~/types/types\";\r\nimport CoverPhotoOverlay from './CoverPhotoOverlay';\r\nimport Tabs from './Tabs';\r\n\r\ninterface IProps {\r\n    profile: IProfile,\r\n    auth: IUser;\r\n}\r\n\r\nconst initImageState = { id: '', file: null, url: '' };\r\n\r\nconst Header: React.FC<IProps> = ({ profile, auth }) => {\r\n    const [isUploadingProfileImage, setIsUploadingProfileImage] = useState(false);\r\n    const [isUploadingCoverPhoto, setIsUploadingCoverPhoto] = useState(false);\r\n    const history = useHistory();\r\n    const { isOpen, openModal, closeModal } = useModal();\r\n    const dispatch = useDispatch();\r\n    const coverPhotoOverlayRef = useRef<HTMLDivElement | null>(null);\r\n    const coverPhotoRef = useRef<HTMLDivElement | null>(null);\r\n    const coverPhoto = useFileHandler<IImage>('single', initImageState);\r\n    const profilePicture = useFileHandler<IImage>('single', initImageState);\r\n\r\n    useEffect(() => {\r\n        const cp = coverPhotoRef.current;\r\n        const cpo = coverPhotoOverlayRef.current;\r\n\r\n        if (cp && cpo && profile.isOwnProfile && window.screen.width > 800) {\r\n            cp.addEventListener('mouseover', overlayOnMouseOver);\r\n            cp.addEventListener('mouseout', overlayOnMouseOut);\r\n        }\r\n\r\n        return () => {\r\n            if (cp && cpo) {\r\n                cp.removeEventListener('mouseover', overlayOnMouseOver);\r\n                cp.removeEventListener('mouseout', overlayOnMouseOut);\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [coverPhoto.imageFile.file, isUploadingCoverPhoto, profile.isOwnProfile]);\r\n\r\n    const overlayOnMouseOver = () => {\r\n        if (!isUploadingCoverPhoto && coverPhotoOverlayRef.current) {\r\n            coverPhotoOverlayRef.current.style.visibility = 'visible';\r\n        }\r\n    }\r\n\r\n    const overlayOnMouseOut = () => {\r\n        if (!isUploadingCoverPhoto && !coverPhoto.imageFile.file && coverPhotoOverlayRef.current) {\r\n            coverPhotoOverlayRef.current.style.visibility = 'hidden';\r\n        }\r\n    }\r\n\r\n    const handleProfilePictureFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        profilePicture.onFileChange(e, () => {\r\n            openModal();\r\n        });\r\n    };\r\n\r\n    const onCropSuccessCallback = async (file: File) => {\r\n        const formData = new FormData();\r\n        formData.append('photo', file);\r\n\r\n        try {\r\n            setIsUploadingProfileImage(true);\r\n            toast('Uploading...', { hideProgressBar: true, bodyStyle: { color: '#1a1a1a' } });\r\n\r\n            const { image } = await uploadPhoto(formData, 'picture');\r\n\r\n            dispatch(updateProfilePicture(image));\r\n            dispatch(updateAuthPicture(image));\r\n            setIsUploadingProfileImage(false);\r\n\r\n            toast.dismiss();\r\n            toast.dark('Profile picture successfully changed.', { hideProgressBar: true });\r\n        } catch (e) {\r\n            console.log(e);\r\n            setIsUploadingProfileImage(false);\r\n            toast.error(e.error.message);\r\n        }\r\n    };\r\n\r\n    const handleSaveCoverPhoto = async () => {\r\n        if (coverPhoto.imageFile.file) {\r\n            const formData = new FormData();\r\n            formData.append('photo', coverPhoto.imageFile.file);\r\n\r\n            try {\r\n                setIsUploadingCoverPhoto(true);\r\n                toast('Uploading Cover Photo...', { hideProgressBar: true, bodyStyle: { color: '#1a1a1a' } });\r\n\r\n                const { image } = await uploadPhoto(formData, 'cover');\r\n\r\n                dispatch(updateCoverPhoto(image));\r\n                setIsUploadingCoverPhoto(false);\r\n\r\n                coverPhoto.clearFiles();\r\n                toast.dismiss();\r\n                toast.dark('Cover photo successfully changed.', { hideProgressBar: true });\r\n            } catch (e) {\r\n                console.log(e);\r\n                setIsUploadingCoverPhoto(false);\r\n                toast.error(e.error.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    const onClickMessage = () => {\r\n        dispatch(initiateChat({\r\n            username: profile.username,\r\n            id: profile.id,\r\n            fullname: profile.fullname || '',\r\n            profilePicture: profile.profilePicture?.url || ''\r\n        }));\r\n\r\n        if (window.screen.width < 1024) {\r\n            history.push(`/chat/${profile.username}`);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <CropProfileModal\r\n                isOpen={isOpen}\r\n                closeModal={closeModal}\r\n                openModal={openModal}\r\n                file={profilePicture.imageFile}\r\n                onCropSuccessCallback={onCropSuccessCallback}\r\n            />\r\n            {/*  ----- COVER PHOTO ------- */}\r\n            <div className=\"w-full h-60 mb-8 laptop:mb-0 laptop:h-80 bg-gray-200 dark:bg-gray-800 relative overflow-hidden\" ref={coverPhotoRef}>\r\n                {/* ---- OVERLAY FOR CHOOSING PHOTO AND SHOWING LOADER ----- */}\r\n                <CoverPhotoOverlay\r\n                    coverPhotoOverlayRef={coverPhotoOverlayRef}\r\n                    coverPhoto={coverPhoto}\r\n                    isUploadingCoverPhoto={isUploadingCoverPhoto}\r\n                    isOwnProfile={profile.isOwnProfile}\r\n                    handleSaveCoverPhoto={handleSaveCoverPhoto}\r\n                />\r\n                {/* ---- ACTUAL COVER PHOTO ---- */}\r\n                <img\r\n                    alt=\"\"\r\n                    className=\"w-full h-full object-cover\"\r\n                    src={coverPhoto.imageFile.url || profile.coverPhoto?.url || `https://source.unsplash.com/oDhGIbegZNI/1400x900`}\r\n                />\r\n            </div>\r\n            <div className=\"laptop:px-6% w-full relative flex mt-2 laptop:transform laptop:-translate-y-2/4\">\r\n                {/* --- PROFILE PICTURE */}\r\n                <div className=\"absolute left-0 right-0 mx-auto w-40 h-40 transform -translate-y-44 laptop:transform-none laptop:relative laptop:w-1/3 laptop:h-60 laptop:mr-2 flex justify-center\">\r\n                    {(!coverPhoto.imageFile.file) && (\r\n                        <>\r\n                            <div\r\n\r\n                                className=\"w-full h-full laptop:w-60 laptop:h-60 !bg-cover !bg-no-repeat rounded-full border-4 border-white dark:border-indigo-1000 overflow-hidden\"\r\n                                style={{\r\n                                    background: `#f7f7f7 url(${profile.profilePicture?.url || avatar_placeholder})`\r\n                                }}\r\n                            >\r\n                                {isUploadingProfileImage && (\r\n                                    <div className=\"w-full h-full bg-black bg-opacity-50 flex items-center justify-center\">\r\n                                        <Loader mode=\"light\" />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            {/* ---- UPDLOAD PROFILE PICTURE ---- */}\r\n                            {profile.isOwnProfile && (\r\n                                <div>\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        hidden\r\n                                        accept=\"image/*\"\r\n                                        onChange={handleProfilePictureFileChange}\r\n                                        readOnly={isUploadingProfileImage}\r\n                                        id=\"picture\"\r\n                                    />\r\n                                    <label\r\n                                        htmlFor=\"picture\"\r\n                                    >\r\n                                        <div className=\"flex items-center w-10 h-10 justify-center cursor-pointer p-4 bg-indigo-700 rounded-full absolute -bottom-2 laptop:bottom-0 left-14 hover:bg-indigo-800\">\r\n                                            <CameraOutlined className=\"text-xl flex items-center justify-center text-white\" />\r\n                                        </div>\r\n                                    </label>\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </div>\r\n                <div className=\"flex w-full  flex-col self-end\">\r\n                    <div className=\"px-4 laptop:px-0 w-full flex items-center flex-col laptop:flex-row justify-between mb-2 laptop:ml-2 laptop:mr-14\">\r\n                        {/* ---- NAME AND USERNAME */}\r\n                        <div className=\"text-center laptop:text-left mb-4 laptop:mb-0\">\r\n                            <h2 className=\"text-3xl dark:text-white\">{profile.fullname || `@${profile.username}`}</h2>\r\n                            <span className=\"text-red-700 dark:text-indigo-400\">{profile.fullname && `@${profile.username}`}</span>\r\n                        </div>\r\n                        {/* ---- FOLLOW/UNFOLLOW/MESSAGE BUTTON */}\r\n                        {!profile.isOwnProfile ? (\r\n                            <div className=\"flex justify-center laptop:justify-start space-x-4 items-start\">\r\n                                <FollowButton isFollowing={profile.isFollowing} userID={profile.id} />\r\n                                <button\r\n                                    className=\"button--muted !border-gray-400 !rounded-full flex items-center dark:bg-indigo-1100 dark:text-white dark:hover:text-white dark:hover:bg-indigo-900 dark:!border-gray-800\"\r\n                                    onClick={onClickMessage}\r\n                                >\r\n                                    <MessageOutlined className=\"flex items-center justify-center mr-2\" />\r\n                                    Message\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            <button\r\n                                className=\"button--muted !rounded-full !border !border-gray-400 !focus:bg-gray-200 !py-2 flex items-center justify-center dark:bg-indigo-1100 dark:text-white dark:hover:text-white dark:hover:bg-indigo-900 dark:!border-gray-800\"\r\n                                onClick={() => history.push(`/user/${profile.username}/edit`)}\r\n                            >\r\n                                <EditOutlined className=\"text-xl mr-4\" />\r\n                                Edit Profile\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                    {/* ---- PROFILE NAVS ----- */}\r\n                    <Tabs\r\n                        username={profile.username}\r\n                        isOwnProfile={profile.id === auth.id}\r\n                        followersCount={profile.followersCount}\r\n                        followingCount={profile.followingCount}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","import dayjs from 'dayjs';\r\n\r\ninterface IProps {\r\n    bio: string;\r\n    dateJoined: string | Date;\r\n}\r\n\r\nconst Bio: React.FC<IProps> = ({ bio, dateJoined }) => {\r\n    return (\r\n        <aside className=\"p-4 bg-white dark:bg-indigo-1000 shadow-lg rounded-md space-y-4\">\r\n            <div>\r\n                <h4 className=\"mb-2 dark:text-white\">Bio</h4>\r\n                {\r\n                    bio ? (\r\n                        <p className=\"text-gray-600 dark:text-gray-400\">{bio}</p>\r\n                    ) : (\r\n                        <p className=\"text-gray-400 italic\">No bio set.</p>\r\n                    )\r\n                }\r\n            </div>\r\n            <div>\r\n                <h4 className=\"mb-2 dark:text-white\">Joined</h4>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">{dayjs(dateJoined).format('MMM.DD, YYYY')}</p>\r\n            </div>\r\n        </aside>\r\n    );\r\n};\r\n\r\nexport default Bio;\r\n","export default __webpack_public_path__ + \"static/media/thumbnail.0a63f821.jpg\";","import { LoadingOutlined, StarFilled, StarOutlined } from '@ant-design/icons';\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport useInfiniteScroll from 'react-infinite-scroll-hook';\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport { BookmarkButton } from \"~/components/main\";\r\nimport { Loader } from '~/components/shared';\r\nimport { useDidMount, useDocumentTitle } from '~/hooks';\r\nimport thumbnail from '~/images/thumbnail.jpg';\r\nimport { getBookmarks } from \"~/services/api\";\r\nimport { IBookmark, IError } from \"~/types/types\";\r\n\r\ndayjs.extend(relativeTime);\r\n\r\ninterface IProps {\r\n    username: string;\r\n    isOwnProfile: boolean;\r\n}\r\n\r\nconst Bookmarks: React.FC<IProps> = ({ username, isOwnProfile }) => {\r\n    const [bookmarks, setBookmarks] = useState<IBookmark[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const [offset, setOffset] = useState(0);\r\n    const didMount = useDidMount(true);\r\n\r\n    useDocumentTitle(`Bookmarks - ${username} | Cinemagram`);\r\n    useEffect(() => {\r\n        fetchBookmarks();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const fetchBookmarks = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n\r\n            const data = await getBookmarks({ offset });\r\n\r\n            if (didMount) {\r\n                setBookmarks(data);\r\n                setOffset(offset + 1);\r\n\r\n                setIsLoading(false);\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n            if (didMount) {\r\n                setIsLoading(false);\r\n                setError(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    const infiniteRef = useInfiniteScroll({\r\n        loading: isLoading,\r\n        hasNextPage: !error && bookmarks.length >= 10,\r\n        onLoadMore: fetchBookmarks,\r\n        scrollContainer: 'window',\r\n        threshold: 200\r\n    });\r\n\r\n    return (!isOwnProfile && username) ? <Redirect to={`/user/${username}`} /> : (\r\n        <div className=\"flex flex-col items-start justify-start w-full min-h-10rem\">\r\n            {(isLoading && bookmarks.length === 0) && (\r\n                <div className=\"flex w-full items-center justify-center min-h-10rem\">\r\n                    <Loader />\r\n                </div>\r\n            )}\r\n            {(bookmarks.length === 0 && error && !isLoading) && (\r\n                <div className=\"w-full p-4 flex min-h-10rem items-center justify-center\">\r\n                    <span className=\"text-gray-400 text-lg italic\">\r\n                        {error?.error?.message || \"Something went wrong :(\"}\r\n                    </span>\r\n                </div>\r\n            )}\r\n            {(bookmarks.length !== 0 && !error) && (\r\n                <div className=\"w-full space-y-4\" ref={infiniteRef as React.RefObject<HTMLDivElement>}>\r\n                    <h4 className=\"text-gray-700 dark:text-white mb-4 ml-4 mt-4 laptop:mt-0\">Bookmarks</h4>\r\n                    <TransitionGroup component={null}>\r\n                        {bookmarks.map(item => (\r\n                            <CSSTransition\r\n                                timeout={500}\r\n                                classNames=\"fade\"\r\n                                key={item.id}\r\n                            >\r\n                                <div key={item.id} className=\"h-24 flex justify-between bg-white dark:bg-indigo-1000 rounded-md shadow-lg overflow-hidden\">\r\n                                    <div className=\"flex justify-center items-center\">\r\n                                        <BookmarkButton postID={item.post.id} initBookmarkState={item.isBookmarked}>\r\n                                            {({ dispatchBookmark, isBookmarked, isLoading }) => (\r\n                                                <h4\r\n                                                    className=\"p-4 flex items-center cursor-pointer\"\r\n                                                    onClick={dispatchBookmark}\r\n                                                >\r\n                                                    {isLoading\r\n                                                        ? <LoadingOutlined className=\"text-gray-600 text-2xl p-2 dark:text-white\" />\r\n                                                        : isBookmarked ? (\r\n                                                            <StarFilled className=\"text-red-600 text-2xl p-2 rounded-full hover:bg-red-100\" />\r\n                                                        ) : (\r\n                                                            <StarOutlined className=\"text-red-600 text-2xl p-2 rounded-full hover:bg-red-100\" />\r\n                                                        )}\r\n                                                </h4>\r\n                                            )}\r\n                                        </BookmarkButton>\r\n                                    </div>\r\n                                    <Link\r\n                                        className=\"flex flex-grow justify-between hover:bg-indigo-100 border border-transparent dark:hover:bg-indigo-1000 dark:hover:border-gray-800\"\r\n                                        key={item.id}\r\n                                        to={`/post/${item.post.id}`}\r\n                                    >\r\n                                        <div className=\"flex-grow p-2 pb-4 max-w-sm\">\r\n                                            <h4 className=\"break-all overflow-hidden overflow-ellipsis h-8 laptop:h-12 dark:text-indigo-400\">\r\n                                                {item.post.description}\r\n                                            </h4>\r\n                                            <span className=\"text-xs text-gray-400 self-end\">Bookmarked {dayjs(item.createdAt).fromNow()}</span>\r\n                                        </div>\r\n                                        <div\r\n                                            className=\"w-32 h-full !bg-cover !bg-no-repeat !bg-center\"\r\n                                            style={{\r\n                                                background: `#f7f7f7 url(${item.post.photos[0]?.url || thumbnail})`\r\n                                            }}\r\n                                        />\r\n                                    </Link>\r\n                                </div>\r\n                            </CSSTransition>\r\n                        ))}\r\n                    </TransitionGroup>\r\n                    {(bookmarks.length !== 0 && !error && isLoading) && (\r\n                        <div className=\"flex justify-center py-6\">\r\n                            <Loader />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Bookmarks;\r\n","import { ArrowLeftOutlined, SaveOutlined } from '@ant-design/icons';\r\nimport { FormEvent, useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport { toast } from 'react-toastify';\r\nimport { useDidMount, useDocumentTitle } from '~/hooks';\r\nimport { updateProfileInfo } from '~/redux/action/profileActions';\r\nimport { updateUser } from '~/services/api';\r\nimport { IProfile } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    isOwnProfile: boolean;\r\n    profile: IProfile;\r\n}\r\n\r\nconst EditInfo: React.FC<IProps> = ({ isOwnProfile, profile }) => {\r\n    const [isUpdating, setIsUpdating] = useState(false);\r\n    const [field, setField] = useState({\r\n        firstname: profile?.firstname || '',\r\n        lastname: profile?.lastname || '',\r\n        gender: profile?.info?.gender || '',\r\n        bio: profile?.info?.bio || '',\r\n        birthday: profile?.info?.birthday || ''\r\n    });\r\n    const [bioLength, setBioLength] = useState(200 - profile?.info?.bio?.length || 0);\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const didMount = useDidMount();\r\n\r\n    useDocumentTitle(`Edit Info - ${profile.username} | Cinemagram`);\r\n    useEffect(() => {\r\n        setField({\r\n            firstname: profile.firstname,\r\n            lastname: profile.lastname,\r\n            gender: profile.info.gender,\r\n            bio: profile.info?.bio || '',\r\n            birthday: profile.info.birthday\r\n        });\r\n\r\n    }, [profile]);\r\n\r\n    const handleUpdateUser = async () => {\r\n        try {\r\n            setIsUpdating(true);\r\n            const user = await updateUser(profile.username, field);\r\n\r\n            dispatch(updateProfileInfo(user));\r\n\r\n            if (didMount) {\r\n                setIsUpdating(false);\r\n\r\n                history.push(`/user/${profile.username}/info`);\r\n                toast.dark('Profile updated successfully.')\r\n            }\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsUpdating(false);\r\n            }\r\n\r\n            toast.dismiss();\r\n            toast.error(e.error?.message || 'Unable to process your request.');\r\n        }\r\n    };\r\n\r\n    const handleFirstnameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setField({ ...field, firstname: e.target.value });\r\n    }\r\n\r\n    const handleLastnameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setField({ ...field, lastname: e.target.value });\r\n    }\r\n\r\n    const handleGenderChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        setField({ ...field, gender: e.target.value });\r\n    }\r\n\r\n    const handleBirthdayChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setField({ ...field, birthday: e.target.value });\r\n    }\r\n\r\n    const handleBioChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n        const val = e.target.value;\r\n\r\n        setField({ ...field, bio: val });\r\n        setBioLength(200 - val.length);\r\n    }\r\n\r\n    const handleTextOnlyInput = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        const key = e.nativeEvent.key;\r\n        const regex = /[a-zA-Z\\s]/ig;\r\n        if (!regex.test(key)) {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    const handleBack = () => {\r\n        history.push(`/user/${profile.username}/info`)\r\n    };\r\n\r\n    const handleSubmit = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        handleUpdateUser();\r\n    }\r\n\r\n    return (!isOwnProfile && profile.username) ? <Redirect to={`/user/${profile.username}`} /> : (\r\n        <div className=\"p-4 pb-8 bg-white dark:bg-indigo-1000 rounded-md min-h-10rem shadow-lg\">\r\n            <h3 className=\"text-gray-500 dark:text-white\">Edit Info</h3>\r\n            <form className=\"mt-8 space-y-4 divide-y divide-gray-100 dark:divide-gray-800\" onSubmit={handleSubmit}>\r\n                {/* ---- FIRST NAME ------- */}\r\n                <div className=\"flex flex-col py-2\">\r\n                    <label htmlFor=\"firstname\" className=\"ml-4 text-gray-400 mb-2\">First Name</label>\r\n                    <input\r\n                        className=\"dark:bg-indigo-1100 dark:text-white dark:border-gray-800\"\r\n                        readOnly={isUpdating}\r\n                        id=\"firstname\"\r\n                        type=\"text\"\r\n                        maxLength={50}\r\n                        onChange={handleFirstnameChange}\r\n                        onKeyDown={handleTextOnlyInput}\r\n                        value={field.firstname}\r\n                    />\r\n                </div>\r\n                {/* ---- LAST NAME ------- */}\r\n                <div className=\"flex flex-col py-2\">\r\n                    <label htmlFor=\"lastname\" className=\"ml-4 text-gray-400 mb-2\">Last Name</label>\r\n                    <input\r\n                        className=\"dark:bg-indigo-1100 dark:text-white dark:border-gray-800\"\r\n                        readOnly={isUpdating}\r\n                        id=\"lastname\"\r\n                        type=\"text\"\r\n                        maxLength={50}\r\n                        onChange={handleLastnameChange}\r\n                        onKeyDown={handleTextOnlyInput}\r\n                        value={field.lastname}\r\n                    />\r\n                </div>\r\n                {/* ---- GENDER && BIRTHDAY ------- */}\r\n                <div className=\"grid laptop:grid-cols-2\">\r\n                    <div className=\"flex flex-col py-2\">\r\n                        <label htmlFor=\"gender\" className=\"ml-4 text-gray-400 mb-2\">Gender</label>\r\n                        <select\r\n                            className=\"dark:bg-indigo-1100 dark:text-white dark:border-gray-800\"\r\n                            id=\"gender\"\r\n                            onChange={handleGenderChange}\r\n                            disabled={isUpdating}\r\n                            value={field.gender === null ? '' : field.gender}\r\n                        >\r\n                            <option disabled value=\"\">Select Gender</option>\r\n                            <option value=\"male\">Male</option>\r\n                            <option value=\"female\">Female</option>\r\n                            <option value=\"unspecified\">Better Not Say</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"flex flex-col py-2\">\r\n                        <label htmlFor=\"birthday\" className=\"ml-4 text-gray-400 mb-2\">Birthday (mm/dd/yyyy)</label>\r\n                        <input\r\n                            className=\"dark:bg-indigo-1100 dark:text-white dark:border-gray-800\"\r\n                            readOnly={isUpdating}\r\n                            type=\"date\"\r\n                            value={field.birthday ? new Date(field.birthday).toISOString().split('T')[0] : ''}\r\n                            onChange={handleBirthdayChange}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                {/* ---- BIO ------- */}\r\n                <div className=\"flex flex-col py-2\">\r\n                    <label htmlFor=\"bio\" className=\"ml-4 text-gray-400 mb-2\">Bio</label>\r\n                    <textarea\r\n                        placeholder=\"Tell something about yourself\"\r\n                        id=\"bio\"\r\n                        cols={10}\r\n                        rows={4}\r\n                        className=\"dark:bg-indigo-1100 dark:text-white dark:border-gray-800\"\r\n                        readOnly={isUpdating}\r\n                        onChange={handleBioChange}\r\n                        maxLength={200}\r\n                        value={field.bio}\r\n                    />\r\n                    <span className=\"text-xs text-gray-400 block text-right\">\r\n                        {bioLength} {bioLength <= 1 ? 'character' : 'characters'} left\r\n                    </span>\r\n                </div>\r\n                {/* ---- SUBMIT BUTTON ----- */}\r\n                <div className=\"flex justify-between pt-8\">\r\n                    <button\r\n                        disabled={isUpdating}\r\n                        type=\"button\"\r\n                        onClick={handleBack}\r\n                        className=\"button--muted !rounded-full dark:bg-indigo-1100 dark:text-white dark:hover:bg-indigo-1100\"\r\n                    >\r\n                        <ArrowLeftOutlined className=\"text-xl mr-4\" />\r\n                        Back to Info\r\n                    </button>\r\n                    <button\r\n                        className=\"flex items-center\"\r\n                        type=\"submit\"\r\n                        disabled={isUpdating}\r\n                    >\r\n                        <SaveOutlined className=\"text-xl mr-4\" />\r\n                        {isUpdating ? 'Updating...' : 'Update'}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditInfo;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport useInfiniteScroll from \"react-infinite-scroll-hook\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport { UserCard } from \"~/components/main\";\r\nimport { Loader, UserLoader } from \"~/components/shared\";\r\nimport { useDidMount, useDocumentTitle } from \"~/hooks\";\r\nimport { getFollowers } from \"~/services/api\";\r\nimport { IError, IProfile } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    username: string;\r\n}\r\n\r\nconst Followers: React.FC<IProps> = ({ username }) => {\r\n    const [followers, setFollowers] = useState<IProfile[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [offset, setOffset] = useState(0); // Pagination\r\n    const didMount = useDidMount(true);\r\n    const [error, setError] = useState<IError | null>(null);\r\n\r\n    useDocumentTitle(`Followers - ${username} | Cinemagram`);\r\n    useEffect(() => {\r\n        fetchFollowers();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const fetchFollowers = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            const fetchedFollowers = await getFollowers(username, { offset });\r\n\r\n            if (didMount) {\r\n                setFollowers([...followers, ...fetchedFollowers]);\r\n                setIsLoading(false);\r\n                setOffset(offset + 1);\r\n\r\n                setError(null);\r\n            }\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsLoading(false);\r\n                setError(e)\r\n            }\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    const infiniteRef = useInfiniteScroll({\r\n        loading: isLoading,\r\n        hasNextPage: !error && followers.length >= 10,\r\n        onLoadMore: fetchFollowers,\r\n        scrollContainer: 'window',\r\n        threshold: 200\r\n    });\r\n\r\n    return (\r\n        <div className=\"w-full\" ref={infiniteRef as React.RefObject<HTMLDivElement>}>\r\n            {(isLoading && followers.length === 0) && (\r\n                <div className=\"min-h-10rem px-4\">\r\n                    <UserLoader includeButton={true} />\r\n                    <UserLoader includeButton={true} />\r\n                    <UserLoader includeButton={true} />\r\n                    <UserLoader includeButton={true} />\r\n                </div>\r\n            )}\r\n            {(!isLoading && followers.length === 0 && error) && (\r\n                <div className=\"w-full min-h-10rem flex items-center justify-center\">\r\n                    <h6 className=\"text-gray-400 italic\">{error?.error?.message || 'Something went wrong.'}</h6>\r\n                </div>\r\n            )}\r\n            {followers.length !== 0 && (\r\n                <div>\r\n                    <h4 className=\"text-gray-700 dark:text-white mb-4 ml-4 mt-4 laptop:mt-0\">Followers</h4>\r\n                    <TransitionGroup component={null}>\r\n                        {followers.map(user => (\r\n                            <CSSTransition\r\n                                timeout={500}\r\n                                classNames=\"fade\"\r\n                                key={user.id}\r\n                            >\r\n                                <div className=\"bg-white dark:bg-indigo-1000 rounded-md mb-4 shadow-md\">\r\n                                    <UserCard profile={user} />\r\n                                </div>\r\n                            </CSSTransition>\r\n                        ))}\r\n                    </TransitionGroup>\r\n                    {(followers.length !== 0 && !error && isLoading) && (\r\n                        <div className=\"flex justify-center py-6\">\r\n                            <Loader />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Followers;\r\n","import { useEffect, useState } from \"react\";\r\nimport useInfiniteScroll from \"react-infinite-scroll-hook\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport { UserCard } from '~/components/main';\r\nimport { Loader, UserLoader } from \"~/components/shared\";\r\nimport { useDidMount, useDocumentTitle } from \"~/hooks\";\r\nimport { getFollowing } from \"~/services/api\";\r\nimport { IError, IProfile } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    username: string;\r\n}\r\n\r\nconst Following: React.FC<IProps> = ({ username }) => {\r\n    const [followings, setFollowing] = useState<IProfile[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [offset, setOffset] = useState(0); // Pagination\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const didMount = useDidMount(true);\r\n\r\n    useDocumentTitle(`Following - ${username} | Cinemagram`);\r\n    useEffect(() => {\r\n        fetchFollowing();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const fetchFollowing = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            const fetchedFollowing = await getFollowing(username, { offset });\r\n\r\n            if (didMount) {\r\n                setFollowing([...followings, ...fetchedFollowing]);\r\n                setIsLoading(false);\r\n                setOffset(offset + 1);\r\n                setError(null);\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n            if (didMount) {\r\n                setIsLoading(false);\r\n                setError(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    const infiniteRef = useInfiniteScroll({\r\n        loading: isLoading,\r\n        hasNextPage: !error && followings.length >= 10,\r\n        onLoadMore: fetchFollowing,\r\n        scrollContainer: 'window',\r\n        threshold: 200\r\n    });\r\n\r\n    return (\r\n        <div className=\"w-full\" ref={infiniteRef as React.RefObject<HTMLDivElement>}>\r\n            {(isLoading && followings.length === 0) && (\r\n                <div className=\"min-h-10rem px-4\">\r\n                    <UserLoader includeButton={true} />\r\n                    <UserLoader includeButton={true} />\r\n                    <UserLoader includeButton={true} />\r\n                    <UserLoader includeButton={true} />\r\n                </div>\r\n            )}\r\n            {(!isLoading && followings.length === 0 && error) && (\r\n                <div className=\"w-full min-h-10rem flex items-center justify-center\">\r\n                    <h6 className=\"text-gray-400 italic\">\r\n                        {error?.error?.message || `${username} isn't following anyone.`}\r\n                    </h6>\r\n                </div>\r\n            )}\r\n            {followings.length !== 0 && (\r\n                <div>\r\n                    <h4 className=\"text-gray-700 dark:text-white mb-4 ml-4 mt-4 laptop:mt-0\">Following</h4>\r\n                    <TransitionGroup component={null}>\r\n                        {followings.map(user => (\r\n                            <CSSTransition\r\n                                timeout={500}\r\n                                classNames=\"fade\"\r\n                                key={user.id}\r\n                            >\r\n                                <div className=\"bg-white dark:bg-indigo-1000 rounded-md mb-4 shadow-md\">\r\n                                    <UserCard profile={user} />\r\n                                </div>\r\n                            </CSSTransition>\r\n                        ))}\r\n                    </TransitionGroup>\r\n                    {(!error && isLoading) && (\r\n                        <div className=\"flex justify-center py-6\">\r\n                            <Loader />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Following;\r\n","import dayjs from 'dayjs';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDocumentTitle } from '~/hooks';\r\nimport { IRootReducer } from \"~/types/types\";\r\n\r\nconst Info = () => {\r\n    const { profile, isOwnProfile } = useSelector((state: IRootReducer) => ({\r\n        profile: state.profile,\r\n        isOwnProfile: state.auth.username === state.profile.username\r\n    }));\r\n    const history = useHistory();\r\n    useDocumentTitle(`Info - ${profile.username} | Cinemagram`);\r\n\r\n    return (\r\n        <div className=\"p-4 bg-white dark:bg-indigo-1000 rounded-md min-h-10rem shadow-lg\">\r\n            <div className=\"flex justify-between\">\r\n                <h3 className=\"text-gray-500 dark:text-white\">Info</h3>\r\n                {isOwnProfile && (\r\n                    <span\r\n                        className=\"underline cursor-pointer text-red-700 dark:text-indigo-400 pr-4\"\r\n                        onClick={() => history.push(`/user/${profile.username}/edit`)}\r\n                    >\r\n                        Edit\r\n                    </span>\r\n                )}\r\n            </div>\r\n            <div className=\"divide-y divide-gray-100 dark:divide-gray-800 space-y-4 mt-8\">\r\n                <div className=\"grid grid-cols-3 py-4\">\r\n                    <h5 className=\"dark:text-white\">Full Name</h5>\r\n                    {profile.fullname ? (\r\n                        <span className=\"text-gray-600 dark:text-gray-400 col-span-2\">{profile.fullname}</span>\r\n                    ) : (\r\n                        <span className=\"text-gray-300 italic\">Name not set.</span>\r\n                    )}\r\n                </div>\r\n                <div className=\"grid grid-cols-3 py-4\">\r\n                    <h5 className=\"dark:text-white\">Gender</h5>\r\n                    {profile.info.gender ? (\r\n                        <span className=\"text-gray-600 dark:text-gray-400 col-span-2 capitalize\">{profile.info.gender}</span>\r\n                    ) : (\r\n                        <span className=\"text-gray-300 italic\">Gender not set.</span>\r\n                    )}\r\n                </div>\r\n                <div className=\"grid grid-cols-3 py-4\">\r\n                    <h5 className=\"dark:text-white\">Birthday</h5>\r\n                    {profile.info.birthday ? (\r\n                        <span className=\"text-gray-600 dark:text-gray-400 col-span-2\">{dayjs(profile.info.birthday).format('MMM.DD, YYYY')}</span>\r\n                    ) : (\r\n                        <span className=\"text-gray-300 italic\">Birthday not set.</span>\r\n                    )}\r\n                </div>\r\n                <div className=\"grid grid-cols-3 py-4\">\r\n                    <h5 className=\"dark:text-white\">Bio</h5>\r\n                    {profile.info.bio ? (\r\n                        <span className=\"text-gray-600 dark:text-gray-400 col-span-2\">{profile.info.bio}</span>\r\n                    ) : (\r\n                        <span className=\"text-gray-300 italic\">Bio not set.</span>\r\n                    )}\r\n                </div>\r\n                <div className=\"grid grid-cols-3 py-4\">\r\n                    <h5 className=\"dark:text-white\">Date Joined</h5>\r\n                    <span className=\"text-gray-600 dark:text-gray-400 col-span-2\">{dayjs(profile.dateJoined).format('MMM.DD, YYYY')}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Info;\r\n","import { useEffect, useState } from \"react\";\r\nimport useInfiniteScroll from \"react-infinite-scroll-hook\";\r\nimport { toast } from \"react-toastify\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport { CreatePostModal, PostItem, PostModals } from \"~/components/main\";\r\nimport { Avatar, Loader } from \"~/components/shared\";\r\nimport { PostLoader } from \"~/components/shared/Loaders\";\r\nimport { useDidMount, useDocumentTitle, useModal } from \"~/hooks\";\r\nimport { createPost, getPosts } from \"~/services/api\";\r\nimport { IError, IPost, IUser } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    username: string;\r\n    isOwnProfile: boolean;\r\n    auth: IUser;\r\n}\r\n\r\nconst Posts: React.FC<IProps> = (props) => {\r\n    const [posts, setPosts] = useState<IPost[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isCreatingPost, setIsCreatingPost] = useState(false);\r\n    const [offset, setOffset] = useState(0); // Pagination\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const { isOpen, openModal, closeModal } = useModal();\r\n    const didMount = useDidMount(true);\r\n\r\n    useDocumentTitle(`Posts - ${props.username} | Cinemagram`);\r\n    useEffect(() => {\r\n        fetchPosts();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const likeCallback = (postID: string, state: boolean, newLikesCount: number) => {\r\n        const updatedPosts = posts.map((item) => {\r\n            if (item.id === postID) {\r\n                return {\r\n                    ...item,\r\n                    isLiked: state,\r\n                    likesCount: newLikesCount\r\n                }\r\n            }\r\n\r\n            return item;\r\n        });\r\n        setPosts(updatedPosts)\r\n    };\r\n\r\n    const updateSuccessCallback = (post: IPost) => {\r\n        const updatedPosts = posts.map((item) => {\r\n            if (item.id === post.id) {\r\n                return {\r\n                    ...item,\r\n                    ...post\r\n                }\r\n            }\r\n\r\n            return item;\r\n        });\r\n        setPosts(updatedPosts);\r\n    }\r\n\r\n    const deleteSuccessCallback = (postID: string) => {\r\n        // eslint-disable-next-line array-callback-return\r\n        const filteredPosts = posts.filter((item) => {\r\n            if (item.id !== postID) {\r\n                return item;\r\n            }\r\n        });\r\n        setPosts(filteredPosts);\r\n    }\r\n\r\n    const fetchPosts = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            const fetchedPosts = await getPosts(props.username, { offset });\r\n\r\n            if (didMount) {\r\n                setPosts([...posts, ...fetchedPosts]);\r\n                setIsLoading(false);\r\n\r\n                if (fetchedPosts.length !== 0) {\r\n                    setOffset(offset + 1);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setError(e);\r\n                setIsLoading(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const dispatchCreatePost = async (form: FormData) => {\r\n        try {\r\n            setIsCreatingPost(true);\r\n            const post = await createPost(form);\r\n\r\n            if (didMount) {\r\n                setPosts([post, ...posts]);\r\n                setIsCreatingPost(false);\r\n                setError(null);\r\n            }\r\n\r\n            toast.dismiss();\r\n            toast.dark('Post created successfully.');\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsCreatingPost(false);\r\n            }\r\n\r\n            toast.dismiss();\r\n            toast.error('Somehing went wrong. Please try again later.');\r\n        }\r\n    }\r\n\r\n    const infiniteRef = useInfiniteScroll({\r\n        loading: isLoading,\r\n        hasNextPage: !error && posts.length >= 10,\r\n        onLoadMore: fetchPosts,\r\n        scrollContainer: 'window',\r\n        threshold: 200\r\n    });\r\n\r\n    return (\r\n        <div className=\"w-full\">\r\n            {props.isOwnProfile && (\r\n                <div className=\"flex items-center justify-start mb-4 px-4 mt-4 laptop:mt-0 laptop:px-0\">\r\n                    <Avatar url={props.auth.profilePicture?.url} className=\"mr-2\" />\r\n                    <div className=\"flex-grow\">\r\n                        <input\r\n                            className=\"dark:bg-indigo-1100 dark:text-white dark:border-gray-800\"\r\n                            type=\"text\"\r\n                            placeholder=\"Create a post.\"\r\n                            onClick={() => !isCreatingPost && openModal()}\r\n                            readOnly={isCreatingPost}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {/* --- CREATE POST MODAL ----- */}\r\n            {isOpen && (\r\n                <CreatePostModal\r\n                    isOpen={isOpen}\r\n                    openModal={openModal}\r\n                    closeModal={closeModal}\r\n                    dispatchCreatePost={dispatchCreatePost}\r\n                />\r\n            )}\r\n            {(isLoading || isCreatingPost) && (\r\n                <div className=\"mt-4 px-2 overflow-hidden space-y-6 pb-10\">\r\n                    <PostLoader />\r\n                </div>\r\n            )}\r\n            {!isLoading && posts.length === 0 && error && (\r\n                <div className=\"w-full min-h-10rem flex items-center justify-center\">\r\n                    <h6 className=\"text-gray-400 italic\">\r\n                        {error?.error?.message || 'Something went wrong :('}\r\n                    </h6>\r\n                </div>\r\n            )}\r\n            {(posts.length !== 0) && (\r\n                <div ref={infiniteRef as React.RefObject<HTMLDivElement>}>\r\n                    <TransitionGroup component={null}>\r\n                        {posts.map(post => (\r\n                            <CSSTransition\r\n                                timeout={500}\r\n                                classNames=\"fade\"\r\n                                key={post.id}\r\n                            >\r\n                                <PostItem\r\n                                    key={post.id}\r\n                                    likeCallback={likeCallback}\r\n                                    post={post}\r\n                                />\r\n                            </CSSTransition>\r\n                        ))}\r\n                    </TransitionGroup>\r\n                    {(posts.length !== 0 && !error && isLoading) && (\r\n                        <div className=\"flex justify-center py-6\">\r\n                            <Loader />\r\n                        </div>\r\n                    )}\r\n                    {(posts.length !== 0 && error) && (\r\n                        <div className=\"flex justify-center py-6\">\r\n                            <p className=\"text-gray-400 italic\">\r\n                                {(error as IError)?.error?.message || 'No more posts.'}\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n            {/* ----- POST MODALS ---- */}\r\n            <PostModals\r\n                deleteSuccessCallback={deleteSuccessCallback}\r\n                updateSuccessCallback={updateSuccessCallback}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Posts;\r\n","import { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Route, RouteComponentProps, Switch } from \"react-router-dom\";\nimport { Boundary, ProfileLoader } from \"~/components/shared\";\nimport * as ROUTE from \"~/constants/routes\";\nimport { PageNotFound } from \"~/pages\";\nimport { getUserStart } from \"~/redux/action/profileActions\";\nimport { IRootReducer } from \"~/types/types\";\nimport Header from './Header';\nimport * as Tab from './Tabs';\n\ninterface MatchParams {\n    username: string;\n}\n\ninterface IProps extends RouteComponentProps<MatchParams> {\n    children: React.ReactNode;\n}\n\nconst Profile: React.FC<IProps> = (props) => {\n    const dispatch = useDispatch();\n    const { username } = props.match.params;\n    const state = useSelector((state: IRootReducer) => ({\n        profile: state.profile,\n        auth: state.auth,\n        error: state.error.profileError,\n        isLoadingGetUser: state.loading.isLoadingGetUser\n    }));\n\n    useEffect(() => {\n        if (state.profile.username !== username) {\n            dispatch(getUserStart(username));\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n        <Boundary>\n            {(state.error && !state.isLoadingGetUser) && (\n                <PageNotFound />\n            )}\n            {(state.isLoadingGetUser) && (\n                <div className=\"pt-14\"><ProfileLoader /></div>\n            )}\n            {(!state.error && !state.isLoadingGetUser && state.profile.id) && (\n                <div className=\"pt-14\">\n                    <Header\n                        auth={state.auth}\n                        profile={state.profile}\n                    />\n                    <div className=\"laptop:px-6% relative flex min-h-10rem  items-start transform laptop:-translate-y-24\">\n                        <div className=\"hidden laptop:block laptop:w-1/4 laptop:mr-4 laptop:sticky laptop:top-44\">\n                            <Tab.Bio\n                                bio={state.profile.info.bio}\n                                dateJoined={state.profile.dateJoined}\n                            />\n                        </div>\n                        <div className=\"w-full laptop:w-2/4 mb-14\">\n                            <Switch>\n                                <Route exact path={ROUTE.PROFILE}>\n                                    <Tab.Posts\n                                        username={username}\n                                        isOwnProfile={state.profile.isOwnProfile}\n                                        auth={state.auth}\n                                    />\n                                </Route>\n                                <Route path={ROUTE.PROFILE_FOLLOWERS}>\n                                    <Tab.Followers username={username} />\n                                </Route>\n                                <Route path={ROUTE.PROFILE_FOLLOWING}>\n                                    <Tab.Following username={username} />\n                                </Route>\n                                <Route path={ROUTE.PROFILE_BOOKMARKS}>\n                                    <Tab.Bookmarks username={username} isOwnProfile={state.profile.isOwnProfile} />\n                                </Route>\n                                <Route path={ROUTE.PROFILE_INFO}>\n                                    <Tab.Info />\n                                </Route>\n                                <Route path={ROUTE.PROFILE_EDIT_INFO}>\n                                    <Tab.EditInfo isOwnProfile={state.profile.isOwnProfile} profile={state.profile} />\n                                </Route>\n                            </Switch>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </Boundary>\n    );\n};\n\nexport default Profile;\n","import { Link } from \"react-router-dom\";\nimport { useDocumentTitle } from \"~/hooks\";\n\nconst SocialAuthFailed = () => {\n    useDocumentTitle('Authentication Failed');\n\n    return (\n        <div className=\"contain pt-14 h-full\">\n            <h1 className=\"mt-8 text-2xl laptop:text-4xl dark:text-white\">Failed to authenticate</h1>\n            <br />\n            <h4 className=\"text-gray-600 dark:text-gray-400\">Possible cause(s):</h4>\n            <ul className=\"text-gray-500\">\n                <li className=\"list-disc ml-8\">Same email/username has been already linked to other social login eg: Google</li>\n            </ul>\n\n            <Link className=\"button inline-flex mt-8\" to=\"/\">Back to Login</Link>\n        </div>\n    );\n};\n\nexport default SocialAuthFailed;\n","export default __webpack_public_path__ + \"static/media/friends_meal_2.1cf17742.webp\";","import { EyeInvisibleOutlined, EyeOutlined } from '@ant-design/icons';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { SocialLogin } from '~/components/shared';\r\nimport { LOGIN } from '~/constants/routes';\r\nimport { useDocumentTitle } from '~/hooks';\r\nimport bg from '~/images/friends_meal_2.webp';\r\nimport logo from '~/images/logo-white.svg';\r\nimport logo_dark from '~/images/logo-cg.svg';\r\nimport { registerStart } from '~/redux/action/authActions';\r\nimport { setAuthErrorMessage } from '~/redux/action/errorActions';\r\nimport { IRootReducer } from '~/types/types';\r\n\r\nconst Register: React.FC = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [isPasswordVisible, setPasswordVisible] = useState(false);\r\n    const dispatch = useDispatch();\r\n\r\n    useDocumentTitle('Register to Cinemagram');\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(setAuthErrorMessage(null));\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const { error, isLoading } = useSelector((state: IRootReducer) => ({\r\n        error: state.error.authError,\r\n        isLoading: state.loading.isLoadingAuth\r\n    }));\r\n\r\n    const onEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const val = e.target.value.trim();\r\n\r\n        setEmail(val.toLowerCase());\r\n    };\r\n\r\n    const onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const val = e.target.value.trim();\r\n\r\n        setPassword(val);\r\n    };\r\n\r\n    const onUsernameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const val = e.target.value.trim();\r\n\r\n        setUsername(val.toLowerCase());\r\n    };\r\n\r\n    const onSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n\r\n        if (email && password && username) {\r\n            dispatch(registerStart({ email, password, username }));\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"min-h-screen flex bg-white\">\r\n            <div\r\n                className=\"relative hidden laptop:w-7/12 h-screen laptop:p-8 laptop:flex laptop:justify-start laptop:items-end !bg-cover !bg-no-repeat !bg-center\"\r\n                style={{\r\n                    background: `#f7f7f7 url(${bg})`\r\n                }}\r\n            >\r\n                {/* --- LOGO --- */}\r\n                <Link className=\"absolute left-8 top-8\" to=\"/\">\r\n                    <img src={logo} alt=\"Cinemagram Logo\" className=\"w-24\" />\r\n                </Link>\r\n                {/* -- INFO --- */}\r\n                <h3 className=\"animate-fade text-white w-9/12 mb-14\">\r\n                    Create your account now and discover new ideas and connect with people.\r\n                </h3>\r\n                {/* --- CREDITS LINK --- */}\r\n                <a\r\n                    className=\"animate-fade absolute bottom-8 left-8 text-1xs text-white underline\"\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                    href=\"https://infinityrimapts.com/5-reasons-host-dinner-party/friends-enjoying-a-meal/\"\r\n                >\r\n                    Photo: Credits to the photo owner\r\n                </a>\r\n            </div>\r\n            <div className=\"relative animate-fade w-full text-center laptop:w-5/12 laptop:text-left flex items-center flex-col justify-center pt-8 laptop:pt-0\">\r\n                <Link to=\"/\">\r\n                    <img\r\n                        src={logo_dark}\r\n                        alt=\"Cinemagram Logo\"\r\n                        className=\"w-24 relative mx-auto laptop:hidden\"\r\n                    />\r\n                </Link>\r\n                {error && (\r\n                    <div className=\"p-4 w-full text-center bg-red-100 border-red-400 absolute top-0 left-0\">\r\n                        <p className=\"text-red-500 text-sm\">{error?.error?.message || 'Something went wrong :('}</p>\r\n                    </div>\r\n                )}\r\n                <div className=\"w-full px-8 laptop:px-14\">\r\n                    <div>\r\n                        <h2 className=\"mt-6 text-xl laptop:text-2xl font-extrabold text-gray-900\">\r\n                            Create your account\r\n                        </h2>\r\n                    </div>\r\n                    <form className=\"mt-8 space-y-6\" onSubmit={onSubmit}>\r\n                        <div className=\"rounded-md shadow-sm space-y-2\">\r\n                            <div>\r\n                                <label htmlFor=\"email-address\" className=\"sr-only\">Username</label>\r\n                                <input\r\n                                    id=\"username\"\r\n                                    name=\"username\"\r\n                                    type=\"text\"\r\n                                    className={` ${error ? 'input--error' : ''}`}\r\n                                    onChange={onUsernameChange}\r\n                                    autoComplete=\"username\"\r\n                                    maxLength={30}\r\n                                    required\r\n                                    readOnly={isLoading}\r\n                                    placeholder=\"Username\"\r\n                                    value={username}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"email-address\" className=\"sr-only\">Email address</label>\r\n                                <input\r\n                                    id=\"email-address\"\r\n                                    name=\"email\"\r\n                                    type=\"email\"\r\n                                    className={` ${error ? 'input--error' : ''}`}\r\n                                    onChange={onEmailChange}\r\n                                    autoComplete=\"email\"\r\n                                    maxLength={64}\r\n                                    required\r\n                                    readOnly={isLoading}\r\n                                    placeholder=\"Email Address\"\r\n                                    value={email}\r\n                                />\r\n                            </div>\r\n                            <div className=\"relative\">\r\n                                <label htmlFor=\"password\" className=\"sr-only\">Password</label>\r\n                                <input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    type={isPasswordVisible ? 'text' : 'password'}\r\n                                    className={`!pr-12 ${error ? 'input--error' : ''}`}\r\n                                    onChange={onPasswordChange}\r\n                                    autoComplete=\"current-password\"\r\n                                    required\r\n                                    minLength={8}\r\n                                    maxLength={100}\r\n                                    readOnly={isLoading}\r\n                                    placeholder=\"Password\"\r\n                                    value={password}\r\n                                />\r\n                                <div className=\"absolute right-0 top-0 bottom-0 my-auto flex items-center justify-center w-12 h-12 hover:bg-gray-200 cursor-pointer rounded-tr-full rounded-br-full z-10\">\r\n                                    {isPasswordVisible ? (\r\n                                        <EyeInvisibleOutlined\r\n                                            className=\"h-full w-full outline-none text-gray-500\"\r\n                                            onClick={() => setPasswordVisible(false)}\r\n                                        />\r\n                                    ) : (\r\n                                        <EyeOutlined\r\n                                            className=\"h-full w-full outline-none\"\r\n                                            onClick={() => setPasswordVisible(true)}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <button type=\"submit\" className=\"button--stretch\" disabled={isLoading}>\r\n                                {isLoading ? 'Registering...' : 'Register'}\r\n                            </button>\r\n                        </div>\r\n                        <i className=\"social-login-divider\">OR</i>\r\n                        <div className=\"flex justify-between space-x-2\">\r\n                            <SocialLogin isLoading={isLoading} />\r\n                        </div>\r\n                    </form>\r\n                    <div className=\"text-center mt-8\">\r\n                        <Link\r\n                            className=\"underline font-medium\"\r\n                            onClick={(e) => isLoading && e.preventDefault()}\r\n                            to={LOGIN}\r\n                        >\r\n                            Login instead\r\n                        </Link>\r\n                    </div>\r\n                    {/* --- COPYRIGHT -- */}\r\n                    <span className=\"text-gray-400 text-xs mx-auto text-center block mt-4\">\r\n                        &copy;Copyright {new Date().getFullYear()} Cinemagram\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Register;\r\n","import { CommentOutlined, LikeOutlined } from '@ant-design/icons';\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport { useHistory } from 'react-router-dom';\r\nimport useDocumentTitle from '~/hooks/useDocumentTitle';\r\nimport thumbnail from '~/images/thumbnail.jpg';\r\nimport { IPost } from \"~/types/types\";\r\n\r\ndayjs.extend(relativeTime);\r\n\r\ninterface IProps {\r\n    posts: IPost[];\r\n    searchQuery: string;\r\n}\r\n\r\nconst boldString = (str: string, substr: string) => {\r\n    const origStr = str.toUpperCase();\r\n    const sub = substr.toUpperCase();\r\n    const x = origStr.indexOf(sub);\r\n    if (!sub || x === -1) {\r\n        return str;\r\n    }\r\n    const len = sub.length;\r\n    return str.substr(0, x) + '<b><span style=\"color: #818cf8\">' + str.substr(x, len) + '</span></b>' + str.substr(x + len);\r\n}\r\n\r\nconst Posts: React.FC<IProps> = ({ posts, searchQuery }) => {\r\n    const history = useHistory();\r\n    useDocumentTitle(`Search Posts | Cinemagram`);\r\n\r\n    const onClickPost = (id: string) => {\r\n        history.push(`/post/${id}`);\r\n    };\r\n\r\n    const onClickAuthor = (e: React.MouseEvent, username: string) => {\r\n        e.stopPropagation();\r\n        history.push(`/user/${username}`);\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {posts.map((post) => post.author && (\r\n                <div\r\n                    className=\"h-28 laptop:h-24 flex justify-start bg-white dark:bg-indigo-1100 rounded-md shadow-lg overflow-hidden cursor-pointer border border-transparent hover:border-indigo-700\"\r\n                    key={post.id}\r\n                    onClick={(e) => onClickPost(post.id)}\r\n                >\r\n                    <div\r\n                        className=\"w-24 laptop:w-32 h-full !bg-cover !bg-no-repeat !bg-center\"\r\n                        style={{\r\n                            background: `#f7f7f7 url(${post.photos[0]?.url || thumbnail})`\r\n                        }}\r\n                    />\r\n                    <div className=\"flex-grow p-2 pb-4 max-w-sm\">\r\n                        <h4\r\n                            className=\"break-all overflow-hidden overflow-ellipsis h-12 font-normal dark:text-white\"\r\n                            dangerouslySetInnerHTML={{ __html: boldString(post.description, searchQuery) }}\r\n                        >\r\n                        </h4>\r\n                        <div className=\"flex flex-col laptop:flex-row space-y-2 laptop:space-y-0 self-end\">\r\n                            <div className=\"flex\">\r\n                                <h6 className=\"text-xs text-gray-400 laptop:mr-4\">\r\n                                    Posted by\r\n                                    &nbsp;\r\n                                    <span\r\n                                        className=\"underline text-red-700 dark:text-indigo-400 cursor-pointer hover:text-red-400\"\r\n                                        onClick={(e) => onClickAuthor(e, post.author.username)}\r\n                                    >\r\n                                        {post.author.username}\r\n                                    </span>\r\n                                    &nbsp;\r\n                                    {dayjs(post.createdAt).fromNow()}\r\n                                </h6>\r\n                            </div>\r\n                            <div className=\"flex space-x-2\">\r\n                                <h6 className=\"text-sm text-gray-600 flex items-center\">\r\n                                    {post.likesCount}\r\n                                    &nbsp;\r\n                                    <LikeOutlined />\r\n                                </h6>\r\n                                <h6 className=\"text-sm text-gray-600 flex items-center\">\r\n                                    {post.commentsCount}\r\n                                    &nbsp;\r\n                                    <CommentOutlined />\r\n                                </h6>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Posts;\r\n","import UserCard from \"~/components/main/UserCard\";\r\nimport useDocumentTitle from \"~/hooks/useDocumentTitle\";\r\nimport { IProfile } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    users: IProfile[];\r\n}\r\n\r\nconst Users: React.FC<IProps> = ({ users }) => {\r\n    useDocumentTitle(`Search Users | Cinemagram`);\r\n\r\n    return (\r\n        <div>\r\n            {users.map((user) => (\r\n                <div\r\n                    className=\"bg-white dark:bg-indigo-1100 rounded-md mb-4 shadow-md dark:shadow-none divide-y divide-y-transparent dark:divide-gray-800\"\r\n                    key={user.id}\r\n                >\r\n                    <UserCard profile={user} />\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Users;\r\n","import { useEffect, useState } from \"react\";\r\nimport useInfiniteScroll from \"react-infinite-scroll-hook\";\r\nimport { Redirect, RouteComponentProps, useLocation } from \"react-router-dom\";\r\nimport { Loader, UserLoader } from \"~/components/shared\";\r\nimport { useDidMount } from \"~/hooks\";\r\nimport { search } from \"~/services/api\";\r\nimport { IError, IPost, IProfile } from \"~/types/types\";\r\nimport Posts from \"./Posts\";\r\nimport Users from \"./Users\";\r\n\r\n\r\nconst useQuery = () => {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nconst Search: React.FC<RouteComponentProps> = ({ history }) => {\r\n    const [users, setUsers] = useState<IProfile[]>([]);\r\n    const [posts, setPosts] = useState<IPost[]>([]);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const [userOffset, setUserOffset] = useState(0);\r\n    const [postOffset, setPostOffset] = useState(0);\r\n    const [isLoadingUser, setIsLoadingUser] = useState(false);\r\n    const [isLoadingPost, setIsLoadingPost] = useState(false);\r\n    const query = useQuery();\r\n    const didMount = useDidMount(true);\r\n    const searchQuery = query.get('q');\r\n    const searchType = query.get('type');\r\n\r\n    useEffect(() => {\r\n        console.log('mounted')\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (searchType === 'posts') {\r\n            dispatchSearchPosts();\r\n        } else {\r\n            dispatchSearchUsers();\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [searchType, searchQuery]);\r\n\r\n    const dispatchSearchPosts = async () => {\r\n        try {\r\n            if (searchQuery && searchType) {\r\n                setIsLoadingPost(true);\r\n                setError(null);\r\n                const fetchedPosts = await search({ q: searchQuery, type: 'posts', offset: postOffset });\r\n\r\n                if (didMount) {\r\n                    setPosts([...posts, ...(fetchedPosts as IPost[])]);\r\n                    setIsLoadingPost(false);\r\n                    setPostOffset(postOffset + 1);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsLoadingPost(false);\r\n                setError(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    const dispatchSearchUsers = async () => {\r\n        try {\r\n            if (searchQuery) {\r\n                setError(null);\r\n                setIsLoadingUser(true);\r\n                const fetchedUsers = await search({ q: searchQuery, offset: userOffset });\r\n\r\n                if (didMount) {\r\n                    setUsers([...users, ...(fetchedUsers as IProfile[])]);\r\n                    setIsLoadingUser(false);\r\n                    setUserOffset(userOffset + 1);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsLoadingUser(false);\r\n                setError(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    const onClickUserTab = () => {\r\n        history.push(`/search?q=${searchQuery}&type=users`)\r\n    }\r\n\r\n    const onClickPostTab = () => {\r\n        history.push(`/search?q=${searchQuery}&type=posts`)\r\n    }\r\n\r\n    const infiniteUserRef = useInfiniteScroll({\r\n        loading: isLoadingUser,\r\n        hasNextPage: !error && users.length >= 10,\r\n        onLoadMore: dispatchSearchUsers,\r\n        scrollContainer: 'window',\r\n        threshold: 100\r\n    });\r\n\r\n    const infinitePostRef = useInfiniteScroll({\r\n        loading: isLoadingPost,\r\n        hasNextPage: !error && posts.length >= 10,\r\n        onLoadMore: dispatchSearchPosts,\r\n        scrollContainer: 'window',\r\n        threshold: 100\r\n    });\r\n\r\n    return !searchQuery ? <Redirect to={'/'} /> : (\r\n        <div className=\"min-h-screen pt-20\">\r\n            <div className=\"contain\">\r\n                <h2 className=\"text-lg laptop:text-2xl dark:text-white\">\r\n                    You searched for: &nbsp;\r\n                    <span className=\"text-red-700 dark:text-indigo-400 break-all\">{searchQuery}</span>\r\n                </h2>\r\n                <span className=\"text-gray-400\">Search Result</span>\r\n                <ul className=\"space-x-4 mt-4\">\r\n                    <li\r\n                        className={`inline-block border-b-4 border-transparent px-2 py-4 cursor-pointer font-medium hover:border-indigo-700 text-gray-400 ${searchType !== 'posts' && ' border-indigo-700 text-gray-900 dark:text-white dark:border-indigo-400'}`}\r\n                        onClick={onClickUserTab}\r\n                    >\r\n                        Users\r\n                    </li>\r\n                    <li\r\n                        className={`inline-block border-b-4 border-transparent px-2 py-4 cursor-pointer font-medium hover:border-indigo-700 text-gray-400 ${searchType === 'posts' && ' border-indigo-700 text-gray-900 dark:text-white dark:border-indigo-400'}`}\r\n                        onClick={onClickPostTab}\r\n                    >\r\n                        Posts\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div className=\"contain bg-gray-200 dark:bg-indigo-1000 py-8 min-h-10rem\">\r\n                <div className=\"w-full laptop:w-3/4\">\r\n                    {searchType === 'posts' ? (\r\n                        <div ref={infinitePostRef as React.RefObject<HTMLDivElement>}>\r\n                            {(isLoadingPost && posts.length === 0) && (\r\n                                <div className=\"p-4 flex items-center justify-center\">\r\n                                    <Loader />\r\n                                </div>\r\n                            )}\r\n                            {(!isLoadingPost && posts.length === 0 && error) && (\r\n                                <div className=\"p-4 flex items-center justify-center\">\r\n                                    <span className=\"text-gray-400 italic font-medium\">\r\n                                        {error?.error?.message || 'Something went wrong :('}\r\n                                    </span>\r\n                                </div>\r\n                            )}\r\n                            {(posts.length !== 0) && (\r\n                                <Posts posts={posts} searchQuery={searchQuery} />\r\n                            )}\r\n                            {(isLoadingPost && posts.length >= 10 && !error) && (\r\n                                <div className=\"px-4 py-14 flex items-center justify-center\">\r\n                                    <Loader />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div ref={infiniteUserRef as React.RefObject<HTMLDivElement>}>\r\n                            {(isLoadingUser && users.length === 0) && (\r\n                                <div className=\"min-h-10rem\">\r\n                                    <UserLoader backgroundColor=\"#dadada\" />\r\n                                    <UserLoader backgroundColor=\"#dadada\" />\r\n                                    <UserLoader backgroundColor=\"#dadada\" />\r\n                                    <UserLoader backgroundColor=\"#dadada\" />\r\n                                    <UserLoader backgroundColor=\"#dadada\" />\r\n                                </div>\r\n                            )}\r\n                            {(!isLoadingUser && users.length === 0 && error) && (\r\n                                <div className=\"p-4 flex items-center justify-center\">\r\n                                    <span className=\"text-gray-400 italic font-medium\">\r\n                                        {error?.error?.message || 'Something went wrong :('}\r\n                                    </span>\r\n                                </div>\r\n                            )}\r\n                            {(users.length !== 0) && <Users users={users} />}\r\n                            {(isLoadingUser && users.length >= 10 && !error) && (\r\n                                <div className=\"px-4 py-14 flex items-center justify-center\">\r\n                                    <Loader />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;\r\n","import { useEffect, useState } from \"react\";\r\nimport useInfiniteScroll from \"react-infinite-scroll-hook\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport { UserCard } from \"~/components/main\";\r\nimport { Loader, UserLoader } from \"~/components/shared\";\r\nimport { useDidMount } from \"~/hooks\";\r\nimport { getSuggestedPeople } from \"~/services/api\";\r\nimport { IError, IProfile } from \"~/types/types\";\r\n\r\nconst SuggestedPeople = () => {\r\n    const [people, setPeople] = useState<IProfile[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<IError | null>(null);\r\n    const [offset, setOffset] = useState(0);\r\n    const didMount = useDidMount(true);\r\n\r\n    useEffect(() => {\r\n        fetchSuggested();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const fetchSuggested = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            const users = await getSuggestedPeople({ offset });\r\n\r\n            if (didMount) {\r\n                setPeople([...people, ...users]);\r\n                setOffset(offset + 1);\r\n                setIsLoading(false);\r\n            }\r\n        } catch (e) {\r\n            if (didMount) {\r\n                setIsLoading(false);\r\n                setError(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    const infiniteRef = useInfiniteScroll({\r\n        loading: isLoading,\r\n        hasNextPage: !error && people.length >= 10,\r\n        onLoadMore: fetchSuggested,\r\n        scrollContainer: 'window',\r\n    });\r\n\r\n    return (\r\n        <div className=\"contain min-h-screen w-full py-24\">\r\n            <div className=\"mb-8\">\r\n                <h2 className=\"dark:text-white\">Suggested People</h2>\r\n                <p className=\"text-gray-400 text-sm\">Follow people to see their updates</p>\r\n            </div>\r\n            {(isLoading && people.length === 0) && (\r\n                <div className=\"min-h-10rem px-4\">\r\n                    <UserLoader />\r\n                    <UserLoader />\r\n                    <UserLoader />\r\n                    <UserLoader />\r\n                </div>\r\n            )}\r\n            {(!isLoading && error && people.length === 0) && (\r\n                <div className=\"flex min-h-10rem items-center justify-center\">\r\n                    <span className=\"text-gray-400 italic\">\r\n                        {(error as IError)?.error?.message || 'Something went wrong :('}\r\n                    </span>\r\n                </div>\r\n            )}\r\n            <TransitionGroup component={null}>\r\n                <div\r\n                    className=\"grid grid-cols-1 laptop:grid-cols-2 laptop:gap-x-4\"\r\n                    ref={infiniteRef as React.RefObject<HTMLDivElement>}\r\n                >\r\n                    {people.map(user => (\r\n                        <CSSTransition\r\n                            timeout={500}\r\n                            classNames=\"fade\"\r\n                            key={user.id}\r\n                        >\r\n                            <div className=\"bg-white dark:bg-indigo-1000 rounded-md mb-4 shadow-md dark:shadow-none\" key={user.id}>\r\n                                <UserCard profile={user} />\r\n                            </div>\r\n                        </CSSTransition>\r\n                    ))}\r\n                </div>\r\n            </TransitionGroup>\r\n            {(isLoading && people.length >= 10 && !error) && (\r\n                <div className=\"px-4 py-14 flex items-center justify-center\">\r\n                    <Loader />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SuggestedPeople;\r\n","import { Redirect, Route } from \"react-router-dom\";\nimport withAuth from \"~/components/hoc/withAuth\";\nimport { LOGIN } from \"~/constants/routes\";\n\ninterface IProps {\n    component: React.ComponentType;\n    path: string;\n    isAuth: boolean;\n    [propName: string]: any;\n}\n\nconst ProtectedRoute: React.FC<IProps> = ({ isAuth, component: Component, path, ...rest }) => {\n    return (\n        <Route\n            {...rest}\n            component={(props: any) => {\n                return isAuth ? <Component {...props} /> : <Redirect to={LOGIN} />\n            }}\n        />\n    );\n}\n\nexport default withAuth(ProtectedRoute);\n","import { Redirect, Route } from \"react-router-dom\";\nimport withAuth from \"~/components/hoc/withAuth\";\nimport { HOME } from \"~/constants/routes\";\n\ninterface IProps {\n    component: React.ComponentType;\n    path: string;\n    isAuth: boolean;\n    [propName: string]: any;\n}\n\nconst PublicRoute: React.FC<IProps> = ({ isAuth, component: Component, path, ...rest }) => {\n    return (\n        <Route\n            {...rest}\n            component={(props: any) => {\n                return isAuth ? <Redirect to={HOME} /> : <Component {...props} />\n            }}\n        />\n    );\n};\n\nexport default withAuth(PublicRoute);\n","import { createBrowserHistory } from 'history';\nimport { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Route, Router, Switch } from \"react-router-dom\";\nimport { Slide, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Chats } from '~/components/main';\nimport { NavBar, Preloader } from \"~/components/shared\";\nimport * as ROUTE from \"~/constants/routes\";\nimport * as pages from '~/pages';\nimport { ProtectedRoute, PublicRoute } from \"~/routers\";\nimport { loginSuccess } from \"./redux/action/authActions\";\nimport { checkAuthSession } from \"./services/api\";\nimport socket from './socket/socket';\n\nexport const history = createBrowserHistory();\n\nfunction App() {\n  const [isCheckingSession, setCheckingSession] = useState(true);\n  const dispatch = useDispatch();\n  const isNotMobile = window.screen.width >= 800;\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const { auth } = await checkAuthSession();\n\n        dispatch(loginSuccess(auth));\n\n        socket.on('connect', () => {\n          socket.emit('userConnect', auth.id);\n          console.log('Client connected to socket.');\n        });\n\n        // Try to reconnect again\n        socket.on('error', function () {\n          socket.emit('userConnect', auth.id);\n        });\n\n        setCheckingSession(false);\n      } catch (e) {\n        console.log('ERROR', e);\n        setCheckingSession(false);\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return isCheckingSession ? (\n    <Preloader />\n  ) : (\n    <Router history={history}>\n      <main className=\"relative min-h-screen\">\n        <ToastContainer\n          position=\"bottom-left\"\n          autoClose={5000}\n          transition={Slide}\n          draggable={false}\n          hideProgressBar={true}\n          bodyStyle={{ paddingLeft: '15px' }}\n        />\n        <NavBar />\n        <Switch>\n          <PublicRoute path={ROUTE.REGISTER} component={pages.Register} />\n          <PublicRoute path={ROUTE.LOGIN} component={pages.Login} />\n          <ProtectedRoute path={ROUTE.SEARCH} component={pages.Search} />\n          <Route path={ROUTE.HOME} exact render={(props: any) => <pages.Home key={Date.now()} {...props} />} />\n          <ProtectedRoute path={ROUTE.POST} component={pages.Post} />\n          <ProtectedRoute path={ROUTE.PROFILE} component={pages.Profile} />\n          <ProtectedRoute path={ROUTE.CHAT} component={pages.Chat} />\n          <ProtectedRoute path={ROUTE.SUGGESTED_PEOPLE} component={pages.SuggestedPeople} />\n          <Route path={ROUTE.SOCIAL_AUTH_FAILED} component={pages.SocialAuthFailed} />\n          <Route component={pages.PageNotFound} />\n        </Switch>\n        {isNotMobile && <Chats />}\n      </main>\n    </Router>\n  );\n}\n\nexport default App;\n","import { LOGIN_SUCCESS, LOGOUT_SUCCESS, REGISTER_SUCCESS, UPDATE_AUTH_PICTURE } from '~/constants/actionType';\nimport { TAuthActionType } from '~/redux/action/authActions';\nimport { IUser } from '~/types/types';\n\nconst initState: IUser = {\n    id: '',\n    username: '',\n    fullname: '',\n    profilePicture: {}\n}\n\nconst authReducer = (state = initState, action: TAuthActionType) => {\n    switch (action.type) {\n        case LOGIN_SUCCESS:\n            return action.payload;\n        case LOGOUT_SUCCESS:\n            return initState;\n        case REGISTER_SUCCESS:\n            return action.payload;\n        case UPDATE_AUTH_PICTURE:\n            return {\n                ...state,\n                profilePicture: action.payload\n            }\n        default:\n            return state;\n    }\n};\n\nexport default authReducer;\n","import { CLEAR_CHAT, CLOSE_CHAT, GET_MESSAGES_SUCCESS, INITIATE_CHAT, MINIMIZE_CHAT, NEW_MESSAGE_ARRIVED } from \"~/constants/actionType\";\nimport { IChatState } from \"~/types/types\";\nimport { TChatActionType } from \"../action/chatActions\";\n\nconst initState: IChatState = {\n    active: '',\n    items: []\n};\n\nconst chatReducer = (state = initState, action: TChatActionType) => {\n    switch (action.type) {\n        case INITIATE_CHAT:\n            const exists = state.items.some(chat => (chat.id as unknown) === action.payload.id);\n            const initChat = {\n                username: action.payload.username,\n                id: action.payload.id,\n                profilePicture: action.payload.profilePicture,\n                minimized: false,\n                chats: []\n            };\n\n            const maxItems = 4;\n            const hasReachedLimit = state.items.length === maxItems;\n\n\n            if (!exists) {\n                // Delete first and set minimized to true\n                const mapped = state.items.map(chat => ({\n                    ...chat,\n                    minimized: true\n                }));\n                const deletedFirstItem = mapped.splice(1);\n\n                return {\n                    active: action.payload.id,\n                    items: hasReachedLimit\n                        ? [...deletedFirstItem, initChat]\n                        : [...(state.items.map(chat => ({\n                            ...chat,\n                            minimized: true\n                        }))), initChat]\n                }\n            } else {\n                return {\n                    active: action.payload.id,\n                    items: state.items.map((chat) => {\n                        if ((chat.id as unknown) === action.payload.id) {\n                            return {\n                                ...chat,\n                                minimized: false\n                            }\n                        }\n\n                        return {\n                            ...chat,\n                            minimized: true\n                        };\n                    })\n                };\n            }\n        case MINIMIZE_CHAT:\n            return {\n                active: '',\n                items: state.items.map((chat) => {\n                    if (chat.username === action.payload) {\n                        return {\n                            ...chat,\n                            minimized: true\n                        }\n                    }\n                    return chat;\n                })\n            }\n        case CLOSE_CHAT:\n            return {\n                active: '',\n                items: state.items.filter(chat => chat.username !== action.payload)\n            }\n        case GET_MESSAGES_SUCCESS:\n            return {\n                ...state,\n                items: state.items.map(chat => chat.username !== action.payload.username ? chat : {\n                    ...chat,\n                    offset: (chat.offset || 0) + 1,\n                    chats: [...action.payload.messages, ...chat.chats]\n                })\n            }\n        case NEW_MESSAGE_ARRIVED:\n            return {\n                ...state,\n                items: state.items.map(chat => chat.username !== action.payload.username ? chat : {\n                    ...chat,\n                    chats: [...chat.chats, action.payload.message]\n                })\n            }\n        case CLEAR_CHAT:\n            return initState;\n        default:\n            return state;\n    }\n};\n\nexport default chatReducer;\n","import {\n    CLEAR_AUTH_ERR_MSG,\n    SET_AUTH_ERR_MSG,\n    SET_NEWSFEED_ERR_MSG,\n    SET_PROFILE_ERR_MSG\n} from \"~/constants/actionType\";\nimport { IErrorState } from \"~/types/types\";\nimport { ErrorActionType } from \"../action/errorActions\";\n\nconst initState: IErrorState = {\n    authError: null,\n    profileError: null,\n    newsFeedError: null\n}\n\nconst errorReducer = (state = initState, action: ErrorActionType) => {\n    switch (action.type) {\n        case SET_AUTH_ERR_MSG:\n            return {\n                ...state,\n                authError: action.payload\n            }\n        case SET_PROFILE_ERR_MSG:\n            return {\n                ...state,\n                profileError: action.payload\n            }\n        case SET_NEWSFEED_ERR_MSG:\n            return {\n                ...state,\n                newsFeedError: action.payload\n            }\n        case CLEAR_AUTH_ERR_MSG:\n            return {\n                ...state,\n                authError: null\n            }\n        default:\n            return state;\n    }\n};\n\nexport default errorReducer;\n","import { SET_TARGET_COMMENT, SET_TARGET_POST } from \"~/constants/actionType\";\nimport { IHelperState } from \"~/types/types\";\nimport { helperActionType } from \"../action/helperActions\";\n\nconst initState: IHelperState = {\n    targetComment: null,\n    targetPost: null\n}\n\nconst helperReducer = (state = initState, action: helperActionType) => {\n    switch (action.type) {\n        case SET_TARGET_COMMENT:\n            return {\n                ...state,\n                targetComment: action.payload\n            }\n        case SET_TARGET_POST:\n            return {\n                ...state,\n                targetPost: action.payload\n            }\n        default:\n            return state;\n    }\n}\n\nexport default helperReducer;","import {\n    SET_AUTH_LOADING,\n    SET_CREATE_POST_LOADING,\n    SET_GET_FEED_LOADING,\n    SET_GET_USER_LOADING\n} from \"~/constants/actionType\";\nimport { TLoadingActionType } from \"../action/loadingActions\";\n\nconst initState = {\n    isLoadingAuth: false,\n    isLoadingCreatePost: false,\n    isLoadingGetUser: false,\n    isLoadingProfile: false,\n    isLoadingFeed: false\n}\n\nconst loadingReducer = (state = initState, action: TLoadingActionType) => {\n    switch (action.type) {\n        case SET_AUTH_LOADING:\n            return {\n                ...state,\n                isLoadingAuth: action.payload\n            }\n        case SET_CREATE_POST_LOADING:\n            return {\n                ...state,\n                isLoadingCreatePost: action.payload\n            }\n        case SET_GET_USER_LOADING:\n            return {\n                ...state,\n                isLoadingGetUser: action.payload\n            }\n        case SET_GET_FEED_LOADING:\n            return {\n                ...state,\n                isLoadingFeed: action.payload\n            }\n        default:\n            return state;\n    }\n};\n\nexport default loadingReducer;\n","import { HIDE_MODAL, SHOW_MODAL } from \"~/constants/actionType\";\nimport { EModalType, IModalState } from \"~/types/types\";\nimport { modalActionType } from \"../action/modalActions\";\n\nconst initState: IModalState = {\n    isOpenDeleteComment: false,\n    isOpenDeletePost: false,\n    isOpenEditPost: false,\n    isOpenPostLikes: false\n}\n\nconst modalMapType = {\n    [EModalType.DELETE_COMMENT]: 'isOpenDeleteComment',\n    [EModalType.DELETE_POST]: 'isOpenDeletePost',\n    [EModalType.EDIT_POST]: 'isOpenEditPost',\n    [EModalType.POST_LIKES]: 'isOpenPostLikes',\n}\n\nconst modalReducer = (state = initState, action: modalActionType) => {\n    switch (action.type) {\n        case SHOW_MODAL:\n            return {\n                ...state,\n                [modalMapType[action.payload]]: true\n            }\n        case HIDE_MODAL:\n            return {\n                ...state,\n                [modalMapType[action.payload]]: false\n            }\n        default:\n            return state;\n    }\n}\n\nexport default modalReducer;","import { CLEAR_FEED, CREATE_POST_SUCCESS, DELETE_FEED_POST, GET_FEED_SUCCESS, HAS_NEW_FEED, UPDATE_FEED_POST, UPDATE_POST_LIKES } from \"~/constants/actionType\";\nimport { INewsFeed, IPost } from \"~/types/types\";\nimport { TNewsFeedActionType } from \"../action/feedActions\";\n\nconst initState: INewsFeed = {\n    items: [],\n    offset: 0,\n    hasNewFeed: false\n};\n\nconst newsFeedReducer = (state = initState, action: TNewsFeedActionType) => {\n    switch (action.type) {\n        case GET_FEED_SUCCESS:\n            return {\n                ...state,\n                items: [...state.items, ...action.payload],\n                offset: state.offset + 1\n            };\n        case CREATE_POST_SUCCESS:\n            return {\n                ...state,\n                items: [action.payload, ...state.items]\n            };\n        case CLEAR_FEED:\n            return initState;\n        case UPDATE_FEED_POST:\n            return {\n                ...state,\n                items: state.items.map((post: IPost) => {\n                    if (post.id === action.payload.id) {\n                        return {\n                            ...post,\n                            ...action.payload\n                        };\n                    }\n                    return post;\n                })\n            }\n        case UPDATE_POST_LIKES:\n            return {\n                ...state,\n                items: state.items.map((post: IPost) => {\n                    if (post.id === action.payload.postID) {\n                        return {\n                            ...post,\n                            isLiked: action.payload.state,\n                            likesCount: action.payload.likesCount\n                        };\n                    }\n                    return post;\n                })\n            }\n        case DELETE_FEED_POST:\n            return {\n                ...state,\n                // eslint-disable-next-line array-callback-return\n                items: state.items.filter((post: IPost) => {\n                    if (post.id !== action.payload) {\n                        return post;\n                    }\n                })\n            }\n        case HAS_NEW_FEED:\n            return {\n                ...state,\n                hasNewFeed: action.payload\n            }\n        default:\n            return state;\n    }\n};\n\nexport default newsFeedReducer;\n","import { GET_USER_SUCCESS, UPDATE_COVER_PHOTO, UPDATE_PROFILE_INFO, UPDATE_PROFILE_PICTURE } from \"~/constants/actionType\";\nimport { IProfile } from \"~/types/types\";\nimport { TProfileActionTypes } from \"../action/profileActions\";\n\nconst initState: IProfile = {\n    _id: '',\n    id: '',\n    username: '',\n    email: '',\n    fullname: '',\n    firstname: '',\n    lastname: '',\n    info: {\n        bio: '',\n        birthday: '',\n        gender: 'unspecified',\n    },\n    isEmailValidated: false,\n    profilePicture: {},\n    coverPhoto: {},\n    followersCount: 0,\n    followingCount: 0,\n    dateJoined: ''\n};\n\nconst profileReducer = (state = initState, action: TProfileActionTypes) => {\n    switch (action.type) {\n        case GET_USER_SUCCESS:\n            return action.payload;\n        case UPDATE_PROFILE_PICTURE:\n            return {\n                ...state,\n                profilePicture: action.payload\n            }\n        case UPDATE_PROFILE_INFO:\n            const { payload: user } = action;\n            return {\n                ...state,\n                fullname: user.fullname,\n                firstname: user.firstname,\n                lastname: user.lastname,\n                info: user.info\n            }\n        case UPDATE_COVER_PHOTO:\n            return {\n                ...state,\n                coverPhoto: action.payload\n            }\n        default:\n            return state;\n    }\n};\n\nexport default profileReducer;\n","import { SET_THEME } from \"~/constants/actionType\";\r\nimport { ISettingsState } from \"~/types/types\";\r\nimport { TSettingsActionType } from \"../action/settingsActions\";\r\n\r\nconst initState: ISettingsState = {\r\n    theme: 'dark',\r\n    // ... more settings\r\n}\r\n\r\nconst settingsReducer = (state = initState, action: TSettingsActionType) => {\r\n    switch (action.type) {\r\n        case SET_THEME:\r\n            return {\r\n                ...state,\r\n                theme: action.payload\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default settingsReducer;\r\n","import { combineReducers } from 'redux';\nimport authReducer from './authReducer';\nimport chatReducer from './chatReducer';\nimport errorReducer from './errorReducer';\nimport helperReducer from './helperReducer';\nimport loadingReducer from './loadingReducer';\nimport modalReducer from './modalReducer';\nimport newsFeedReducer from './newsFeedReducer';\nimport profileReducer from './profileReducer';\nimport settingsReducer from './settingsReducer';\n\nconst rootReducer = combineReducers({\n    auth: authReducer,\n    error: errorReducer,\n    loading: loadingReducer,\n    newsFeed: newsFeedReducer,\n    profile: profileReducer,\n    chats: chatReducer,\n    helper: helperReducer,\n    modal: modalReducer,\n    settings: settingsReducer,\n});\n\nexport default rootReducer;\n","import {\n    SET_AUTH_LOADING,\n    SET_CREATE_POST_LOADING,\n    SET_GET_FEED_LOADING,\n    SET_GET_USER_LOADING\n} from \"~/constants/actionType\";\n\nexport const isAuthenticating = (bool: boolean = true) => (<const>{\n    type: SET_AUTH_LOADING,\n    payload: bool\n});\n\n\nexport const isCreatingPost = (bool: boolean = true) => (<const>{\n    type: SET_CREATE_POST_LOADING,\n    payload: bool\n});\n\nexport const isGettingUser = (bool: boolean = true) => (<const>{\n    type: SET_GET_USER_LOADING,\n    payload: bool\n});\n\nexport const isGettingFeed = (bool: boolean = true) => (<const>{\n    type: SET_GET_FEED_LOADING,\n    payload: bool\n});\n\nexport type TLoadingActionType =\n    | ReturnType<typeof isCreatingPost>\n    | ReturnType<typeof isGettingUser>\n    | ReturnType<typeof isGettingFeed>\n    | ReturnType<typeof isAuthenticating>;","import { call, put, select } from \"redux-saga/effects\";\nimport { history } from '~/App';\nimport { CHECK_SESSION, LOGIN_START, LOGOUT_START, REGISTER_START } from \"~/constants/actionType\";\nimport { LOGIN } from \"~/constants/routes\";\nimport { checkAuthSession, login, logout, register } from \"~/services/api\";\nimport socket from \"~/socket/socket\";\nimport { IError, IUser } from \"~/types/types\";\nimport { loginSuccess, logoutSuccess, registerSuccess } from \"../action/authActions\";\nimport { clearChat } from \"../action/chatActions\";\nimport { setAuthErrorMessage } from \"../action/errorActions\";\nimport { clearNewsFeed } from \"../action/feedActions\";\nimport { isAuthenticating } from \"../action/loadingActions\";\n\ninterface IAuthSaga {\n    type: string;\n    payload: any;\n}\n\nfunction* handleError(e: IError) {\n    yield put(isAuthenticating(false));\n\n    yield put(setAuthErrorMessage(e));\n}\n\nfunction* authSaga({ type, payload }: IAuthSaga) {\n    switch (type) {\n        case LOGIN_START:\n            try {\n                yield put(isAuthenticating(true));\n                const { auth } = yield call(login, payload.email, payload.password);\n                socket.emit('userConnect', auth.id);\n                yield put(clearNewsFeed());\n                yield put(loginSuccess(auth));\n                yield put(isAuthenticating(false));\n            } catch (e) {\n                console.log(e);\n\n                yield handleError(e);\n            }\n            break;\n        case CHECK_SESSION:\n            try {\n                yield put(isAuthenticating(true));\n                const { auth } = yield call(checkAuthSession);\n\n                console.log('SUCCESS ', auth);\n                yield put(loginSuccess(auth));\n                yield put(isAuthenticating(false));\n            } catch (e) {\n                yield handleError(e);\n            }\n            break;\n        case LOGOUT_START:\n            try {\n                const { auth } = yield select();\n                yield put(isAuthenticating(true));\n                yield call(logout);\n\n                payload.callback && payload.callback();\n\n                yield put(logoutSuccess());\n                yield put(isAuthenticating(false));\n                yield put(clearNewsFeed());\n                yield put(clearChat());\n                history.push(LOGIN);\n                socket.emit('userDisconnect', auth.id);\n            } catch (e) {\n                yield handleError(e);\n            }\n            break;\n        case REGISTER_START:\n            try {\n                yield put(isAuthenticating(true));\n\n                const user: IUser = yield call(register, payload);\n\n                socket.emit('userConnect', user.id);\n                yield put(registerSuccess(user));\n                yield put(isAuthenticating(false));\n            }\n            catch (e) {\n                console.log('ERR', e);\n                yield handleError(e);\n            }\n            break;\n        default:\n            return;\n    }\n}\n\nexport default authSaga;\n","import { toast } from \"react-toastify\";\nimport { call, put } from \"redux-saga/effects\";\nimport { CREATE_POST_START, GET_FEED_START } from \"~/constants/actionType\";\nimport { createPost, getNewsFeed } from \"~/services/api\";\nimport { IPost } from \"~/types/types\";\nimport { setNewsFeedErrorMessage } from \"../action/errorActions\";\nimport { createPostSuccess, getNewsFeedSuccess } from \"../action/feedActions\";\nimport { isCreatingPost, isGettingFeed } from \"../action/loadingActions\";\n\ninterface INewsFeedSaga {\n    type: string;\n    payload: any;\n}\n\nfunction* newsFeedSaga({ type, payload }: INewsFeedSaga) {\n    switch (type) {\n        case GET_FEED_START:\n            try {\n                yield put(isGettingFeed(true));\n                yield put(setNewsFeedErrorMessage(null));\n\n                const posts: IPost[] = yield call(getNewsFeed, payload);\n\n                yield put(isGettingFeed(false));\n                yield put(getNewsFeedSuccess(posts));\n            } catch (e) {\n                console.log(e);\n                yield put(isGettingFeed(false));\n                yield put(setNewsFeedErrorMessage(e))\n            }\n\n            break;\n        case CREATE_POST_START:\n            try {\n                yield put(isCreatingPost(true));\n\n                const post: IPost = yield call(createPost, payload);\n\n                yield put(createPostSuccess(post));\n                yield put(isCreatingPost(false));\n                toast.dismiss();\n                toast.dark('Post succesfully created.');\n            } catch (e) {\n                yield put(isCreatingPost(false));\n                console.log(e);\n            }\n            break;\n        default:\n            throw new Error('Unexpected action type.')\n    }\n}\n\nexport default newsFeedSaga;\n","import { call, put } from \"redux-saga/effects\";\nimport { GET_USER_START } from \"~/constants/actionType\";\nimport { getUser } from \"~/services/api\";\nimport { IProfile } from \"~/types/types\";\nimport { setProfileErrorMessage } from \"../action/errorActions\";\nimport { isGettingUser } from \"../action/loadingActions\";\nimport { getUserSuccess } from \"../action/profileActions\";\n\ninterface IProfileSaga {\n    type: string;\n    payload: any;\n}\n\nfunction* profileSaga({ type, payload }: IProfileSaga) {\n    switch (type) {\n        case GET_USER_START:\n            try {\n                yield put(isGettingUser(true));\n                const user: IProfile = yield call(getUser, payload);\n\n                yield put(isGettingUser(false));\n                yield put(setProfileErrorMessage(null));\n                yield put(getUserSuccess(user));\n            } catch (e) {\n                yield put(setProfileErrorMessage(e));\n                yield put(isGettingUser(false));\n                console.log(e);\n            }\n            break;\n        default:\n            throw new Error(`Unexpected action type ${type}.`);\n    }\n}\n\nexport default profileSaga;\n","import { takeLatest } from 'redux-saga/effects';\nimport {\n    CHECK_SESSION,\n    CREATE_POST_START,\n    GET_FEED_START,\n    GET_USER_START,\n    LOGIN_START,\n    LOGOUT_START,\n    REGISTER_START\n} from '~/constants/actionType';\nimport authSaga from './authSaga';\nimport newsFeedSaga from './newsFeedSaga';\nimport profileSaga from './profileSaga';\n\nfunction* rootSaga() {\n    yield takeLatest([\n        LOGIN_START,\n        LOGOUT_START,\n        REGISTER_START,\n        CHECK_SESSION,\n    ], authSaga);\n\n    yield takeLatest([\n        GET_FEED_START,\n        CREATE_POST_START\n    ], newsFeedSaga);\n\n    yield takeLatest([\n        GET_USER_START\n    ], profileSaga)\n}\n\nexport default rootSaga;","import { Dispatch } from \"react\";\nimport { applyMiddleware, compose, createStore, Store } from \"redux\";\nimport createSagaMiddleware from \"redux-saga\";\nimport rootReducer from \"../reducer/rootReducer\";\nimport rootSaga from \"../sagas\";\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n  }\n}\n\nconst localStorageMiddleware = (store: Store) => {\n  return (next: Dispatch<void>) => (action: any) => {\n    const result = next(action);\n    try {\n      const { settings } = store.getState();\n      localStorage.setItem(\"cinemagram_theme\", JSON.stringify(settings.theme));\n    } catch (e) {\n      console.log(\"Error while saving in localStorage\", e);\n    }\n    return result;\n  };\n};\n\nconst reHydrateStore = () => {\n  const storage = localStorage.getItem(\"cinemagram_theme\");\n  if (storage && storage !== null) {\n    return {\n      settings: {\n        theme: JSON.parse(storage),\n      },\n    };\n  }\n  return undefined;\n};\n\nconst sagaMiddleware = createSagaMiddleware();\nconst middlewares: any = [sagaMiddleware, localStorageMiddleware];\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nif (process.env.NODE_ENV === `development`) {\n  const { logger } = require(`redux-logger`);\n\n  middlewares.push(logger);\n}\n\nconst configureStore = () => {\n  const store = createStore(\n    rootReducer,\n    reHydrateStore(),\n    composeEnhancers(applyMiddleware(...middlewares))\n  );\n\n  sagaMiddleware.run(rootSaga);\n  return store;\n};\n\nconst store = configureStore();\n\nexport default store;\n\n","import {\r\n    ArrowLeftOutlined, ArrowRightOutlined, CloseOutlined,\r\n    LogoutOutlined, MenuOutlined, SearchOutlined,\r\n    StarOutlined, TeamOutlined, UsergroupAddOutlined\r\n} from \"@ant-design/icons\";\r\nimport { useState } from \"react\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { Messages, Notification } from \"~/components/main\";\r\nimport { Avatar, SearchInput, ThemeToggler } from \"~/components/shared\";\r\nimport { LOGIN, REGISTER, SUGGESTED_PEOPLE } from \"~/constants/routes\";\r\nimport logo from '~/images/logo-cg.svg';\r\nimport { IUser } from \"~/types/types\";\r\n\r\ninterface IProps {\r\n    isAuth: boolean;\r\n    theme: string;\r\n    auth: IUser;\r\n    openModal: () => void;\r\n}\r\n\r\nconst NavBarMobile: React.FC<IProps> = ({ theme, isAuth, auth, openModal }) => {\r\n    const [isOpenSearch, setOpenSearch] = useState(false);\r\n    const [isOpenMenu, setOpenMenu] = useState(false);\r\n    const { pathname } = useLocation();\r\n    const history = useHistory();\r\n\r\n    const onClickMenuItem = () => {\r\n        setOpenMenu(false);\r\n    }\r\n\r\n    const clickSearchItemCallback = (user: IUser) => {\r\n        setOpenSearch(false);\r\n        history.push(`/user/${user.username}`);\r\n    }\r\n\r\n    return isOpenSearch ? (\r\n        <div className=\"fixed top-0 left-0 flex w-full items-center bg-indigo-700 z-9999 py-2 pr-2 shadow-xl\">\r\n            <div\r\n                className=\"p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500\"\r\n                onClick={() => setOpenSearch(false)}\r\n            >\r\n                <ArrowLeftOutlined className=\"text-white\" style={{ fontSize: '18px' }} />\r\n            </div>\r\n            <SearchInput\r\n                clickItemCallback={clickSearchItemCallback}\r\n                inputClassName=\"w-full\"\r\n            />\r\n        </div>\r\n    ) : (\r\n        <nav className=\"contain flex justify-between z-9999 align-center w-100 border-b border-transparent bg-white dark:bg-indigo-1000 text-gray-700 h-60px py-2 fixed top-0 left-0 w-full shadow-md laptop:shadow-sm dark:border-gray-800\">\r\n            <div className=\"flex items-center space-x-8\">\r\n                {/* ---- LOGO -------- */}\r\n                <Link\r\n                    to={{\r\n                        pathname: '/',\r\n                        state: { from: pathname }\r\n                    }}\r\n                >\r\n                    <img\r\n                        src={logo}\r\n                        alt=\"\"\r\n                        className=\"w-36\"\r\n                        style={{ filter: `brightness(${theme === 'dark' ? 3.5 : 1})` }}\r\n                    />\r\n                </Link>\r\n            </div>\r\n            {/* ---- NAVICONS FOR MOBILE ---- */}\r\n            <div className=\"flex items-center space-x-4 laptop:hidden\">\r\n                {isAuth && (\r\n                    <>\r\n                        <div\r\n                            className=\"p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200  dark:hover:bg-indigo-1100\"\r\n                        >\r\n                            <Messages isAuth={isAuth} />\r\n                        </div>\r\n                        <div\r\n                            className=\"p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200  dark:hover:bg-indigo-1100\"\r\n                        >\r\n                            <Notification isAuth={isAuth} />\r\n                        </div>\r\n                    </>\r\n                )}\r\n                <div\r\n                    className=\"p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:text-white dark:hover:bg-indigo-1100\"\r\n                    onClick={() => setOpenSearch(true)}\r\n                >\r\n                    <SearchOutlined style={{ fontSize: '20px' }} />\r\n                </div>\r\n                <div\r\n                    className=\"p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200  dark:text-white dark:hover:bg-indigo-1100\"\r\n                    onClick={() => setOpenMenu(true)}\r\n                >\r\n                    <MenuOutlined style={{ fontSize: '20px' }} />\r\n                </div>\r\n            </div>\r\n            {/* ---- NAV DRAWER FOR MOBILE --- */}\r\n            <div className={`flex  flex-col w-full h-screen fixed top-0 right-0 transition-transform  transform ${isOpenMenu ? 'translate-x-0' : 'translate-x-full'} bg-white dark:bg-indigo-1000 laptop:hidden`}>\r\n                <div className=\"flex items-center justify-between px-4\">\r\n                    <div className=\"flex items-center space-x-4\">\r\n                        <h1 className=\"dark:text-white\">Menu</h1>\r\n                        <ThemeToggler />\r\n                    </div>\r\n                    <div\r\n                        className=\"p-2 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 dark:text-white dark:hover:bg-indigo-1100\"\r\n                        onClick={() => setOpenMenu(false)}\r\n                    >\r\n                        <CloseOutlined style={{ fontSize: '20px' }} />\r\n                    </div>\r\n                </div>\r\n                {isAuth ? (\r\n                    <ul className=\"divide-y divide-gray-100 dark:divide-gray-800\">\r\n                        <li className=\"px-4 py-3 pb-4 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-1100\">\r\n                            <Link\r\n                                className=\"flex font-medium dark:text-indigo-400\"\r\n                                onClick={onClickMenuItem}\r\n                                to={`/user/${auth.username}`}\r\n                            >\r\n                                <Avatar url={auth.profilePicture?.url} size=\"lg\" className=\"mr-2\" />\r\n                                <div className=\"flex flex-col\">\r\n                                    <span>{auth.username}</span>\r\n                                    <span className=\"text-gray-400 text-xs\">View Profile</span>\r\n                                </div>\r\n                            </Link>\r\n                        </li>\r\n                        <li className=\"p-4 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-1100\">\r\n                            <Link\r\n                                className=\"flex items-center text-black dark:text-white\"\r\n                                onClick={onClickMenuItem}\r\n                                to={`/user/${auth.username}/following`}\r\n                            >\r\n                                <TeamOutlined className=\"text-red-700 dark:text-indigo-400\" style={{ fontSize: '30px', marginRight: '25px' }} />\r\n                                <h6 className=\"text-sm\">Following</h6>\r\n                            </Link>\r\n                        </li>\r\n                        <li className=\"p-4 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-1100\">\r\n                            <Link\r\n                                className=\"flex items-center text-black dark:text-white\"\r\n                                onClick={onClickMenuItem}\r\n                                to={`/user/${auth.username}/followers`}\r\n                            >\r\n                                <TeamOutlined className=\"text-red-700 dark:text-indigo-400\" style={{ fontSize: '30px', marginRight: '25px' }} />\r\n                                <h6 className=\"text-sm\">Followers</h6>\r\n                            </Link>\r\n                        </li>\r\n                        <li className=\"p-4 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-1100\">\r\n                            <Link\r\n                                className=\"flex items-center text-black dark:text-white\"\r\n                                onClick={onClickMenuItem}\r\n                                to={`/user/${auth.username}/bookmarks`}\r\n                            >\r\n                                <StarOutlined className=\"text-red-700 dark:text-indigo-400\" style={{ fontSize: '30px', marginRight: '25px' }} />\r\n                                <h6 className=\"text-sm\">Bookmarks</h6>\r\n                            </Link>\r\n                        </li>\r\n                        <li className=\"p-4 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-1100\">\r\n                            <Link\r\n                                className=\"flex items-center text-black dark:text-white\"\r\n                                onClick={onClickMenuItem}\r\n                                to={SUGGESTED_PEOPLE}\r\n                            >\r\n                                <UsergroupAddOutlined className=\"text-red-700 dark:text-indigo-400\" style={{ fontSize: '30px', marginRight: '25px' }} />\r\n                                <h6 className=\"text-sm\">Suggested People</h6>\r\n                            </Link>\r\n                        </li>\r\n                        <li className=\"p-4 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-1100\">\r\n                            <div\r\n                                className=\"flex items-center text-black dark:text-white\"\r\n                                onClick={() => {\r\n                                    openModal();\r\n                                    setOpenMenu(false);\r\n                                }}\r\n                            >\r\n                                <LogoutOutlined className=\"text-red-500\" style={{ fontSize: '30px', marginRight: '25px' }} />\r\n                                <h6 className=\"text-sm text-red-500\">Logout</h6>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                ) : (\r\n                    <ul className=\"divide-y divide-gray-100 dark:divide-gray-800\">\r\n                        <li className=\"px-4 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-1100 flex items-center justify-start\">\r\n                            <ArrowRightOutlined className=\"dark:text-white\" />\r\n                            <Link\r\n                                className=\"p-4 font-medium dark:text-indigo-400 flex-grow\"\r\n                                to={LOGIN}\r\n                            >\r\n                                Login\r\n                            </Link>\r\n                        </li>\r\n                        <li className=\"px-4 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-1100 flex items-center justify-start\">\r\n                            <ArrowRightOutlined className=\"dark:text-white\" />\r\n                            <Link\r\n                                className=\"p-4 font-medium dark:text-indigo-400 flex-grow\"\r\n                                to={REGISTER}\r\n                            >\r\n                                Register\r\n                            </Link>\r\n                        </li>\r\n                    </ul>\r\n                )}\r\n                {/* --- COPYRIGHT -- */}\r\n                <span className=\"text-gray-400 text-xs absolute bottom-8 left-0 right-0 mx-auto text-center\">\r\n                    &copy;Copyright {new Date().getFullYear()} Cinemagram\r\n                </span>\r\n            </div>\r\n        </nav>\r\n    )\r\n};\r\n\r\nexport default NavBarMobile;\r\n"],"sourceRoot":""}